var en=Object.defineProperty;var tn=(l,a,m)=>a in l?en(l,a,{enumerable:!0,configurable:!0,writable:!0,value:m}):l[a]=m;var De=(l,a,m)=>(tn(l,typeof a!="symbol"?a+"":a,m),m),ut=(l,a,m)=>{if(!a.has(l))throw TypeError("Cannot "+m)};var O=(l,a,m)=>(ut(l,a,"read from private field"),m?m.call(l):a.get(l)),oe=(l,a,m)=>{if(a.has(l))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(l):a.set(l,m)},ge=(l,a,m,o)=>(ut(l,a,"write to private field"),o?o.call(l,m):a.set(l,m),m),it=(l,a,m,o)=>({set _(A){ge(l,a,A,m)},get _(){return O(l,a,o)}}),he=(l,a,m)=>(ut(l,a,"access private method"),m);import{r as requirePropTypes,M as Modal}from"./index-7ac34a3a.js";import{r as reactExports,A as AntdIcon,_ as _objectSpread2,X as getAugmentedNamespace,j as jsxs,a as jsx,B as Button,Y as LeftOutlined,Z as RightOutlined,$ as commonjsGlobal,a0 as getDefaultExportFromCjs,s as useRouter,a1 as useGetFileByIdWithAccessQuery,F as Fragment,a2 as Header,T as Typography,a3 as getFileURL,a4 as Image,a5 as hasVideoExtension,a6 as isAudioExtension,a7 as downloadURI}from"./index-69c07cab.js";import{D as DownloadOutlined}from"./DownloadOutlined-d7f02177.js";var ArrowLeftOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};const ArrowLeftOutlinedSvg=ArrowLeftOutlined$2;var ArrowLeftOutlined=function(a,m){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},a),{},{ref:m,icon:ArrowLeftOutlinedSvg}))};ArrowLeftOutlined.displayName="ArrowLeftOutlined";const ArrowLeftOutlined$1=reactExports.forwardRef(ArrowLeftOutlined);function commonjsRequire(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(l){pdfExports=l}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(a,m){module.exports=m()})(globalThis,()=>(()=>{var __webpack_modules__=[,(l,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VerbosityLevel=a.Util=a.UnknownErrorException=a.UnexpectedResponseException=a.TextRenderingMode=a.RenderingIntentFlag=a.PermissionFlag=a.PasswordResponses=a.PasswordException=a.PageActionEventType=a.OPS=a.MissingPDFException=a.MAX_IMAGE_SIZE_TO_CACHE=a.LINE_FACTOR=a.LINE_DESCENT_FACTOR=a.InvalidPDFException=a.ImageKind=a.IDENTITY_MATRIX=a.FormatError=a.FeatureTest=a.FONT_IDENTITY_MATRIX=a.DocumentActionEventType=a.CMapCompressionType=a.BaseException=a.BASELINE_FACTOR=a.AnnotationType=a.AnnotationStateModelType=a.AnnotationReviewState=a.AnnotationReplyType=a.AnnotationMode=a.AnnotationMarkedState=a.AnnotationFlag=a.AnnotationFieldFlag=a.AnnotationEditorType=a.AnnotationEditorPrefix=a.AnnotationEditorParamsType=a.AnnotationBorderStyleType=a.AnnotationActionEventType=a.AbortException=void 0,a.assert=V,a.bytesToString=q,a.createPromiseCapability=we,a.createValidAbsoluteUrl=y,a.getModificationDate=be,a.getVerbosityLevel=H,a.info=U,a.isArrayBuffer=me,a.isArrayEqual=Se,a.objectFromMap=N,a.objectSize=C,a.setVerbosityLevel=J,a.shadow=p,a.string32=v,a.stringToBytes=d,a.stringToPDFString=ye,a.stringToUTF8String=fe,a.unreachable=K,a.utf8StringToString=_e,a.warn=z;const m=[1,0,0,1,0,0];a.IDENTITY_MATRIX=m;const o=[.001,0,0,.001,0,0];a.FONT_IDENTITY_MATRIX=o;const A=1e7;a.MAX_IMAGE_SIZE_TO_CACHE=A;const D=1.35;a.LINE_FACTOR=D;const j=.35;a.LINE_DESCENT_FACTOR=j;const re=j/D;a.BASELINE_FACTOR=re;const R={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};a.RenderingIntentFlag=R;const T={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};a.AnnotationMode=T;const _="pdfjs_internal_editor_";a.AnnotationEditorPrefix=_;const F={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};a.AnnotationEditorType=F;const k={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};a.AnnotationEditorParamsType=k;const S={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};a.PermissionFlag=S;const g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};a.TextRenderingMode=g;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};a.ImageKind=b;const u={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};a.AnnotationType=u;const h={MARKED:"Marked",REVIEW:"Review"};a.AnnotationStateModelType=h;const I={MARKED:"Marked",UNMARKED:"Unmarked"};a.AnnotationMarkedState=I;const x={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};a.AnnotationReviewState=x;const E={GROUP:"Group",REPLY:"R"};a.AnnotationReplyType=E;const s={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};a.AnnotationFlag=s;const c={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};a.AnnotationFieldFlag=c;const r={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};a.AnnotationBorderStyleType=r;const e={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};a.AnnotationActionEventType=e;const t={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};a.DocumentActionEventType=t;const n={O:"PageOpen",C:"PageClose"};a.PageActionEventType=n;const i={ERRORS:0,WARNINGS:1,INFOS:5};a.VerbosityLevel=i;const f={NONE:0,BINARY:1};a.CMapCompressionType=f;const M={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};a.OPS=M;const P={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};a.PasswordResponses=P;let B=i.WARNINGS;function J(G){Number.isInteger(G)&&(B=G)}function H(){return B}function U(G){B>=i.INFOS&&console.log(`Info: ${G}`)}function z(G){B>=i.WARNINGS&&console.log(`Warning: ${G}`)}function K(G){throw new Error(G)}function V(G,te){G||K(te)}function L(G){if(!G)return!1;switch(G.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function y(G,te=null,ne=null){if(!G)return null;try{if(ne&&typeof G=="string"){if(ne.addDefaultProtocol&&G.startsWith("www.")){const Ee=G.match(/\./g);Ee&&Ee.length>=2&&(G=`http://${G}`)}if(ne.tryConvertEncoding)try{G=fe(G)}catch{}}const ve=te?new URL(G,te):new URL(G);if(L(ve))return ve}catch{}return null}function p(G,te,ne,ve=!1){return Object.defineProperty(G,te,{value:ne,enumerable:!ve,configurable:!0,writable:!1}),ne}const w=function(){function te(ne,ve){this.constructor===te&&K("Cannot initialize BaseException."),this.message=ne,this.name=ve}return te.prototype=new Error,te.constructor=te,te}();a.BaseException=w;class X extends w{constructor(te,ne){super(te,"PasswordException"),this.code=ne}}a.PasswordException=X;class W extends w{constructor(te,ne){super(te,"UnknownErrorException"),this.details=ne}}a.UnknownErrorException=W;class Z extends w{constructor(te){super(te,"InvalidPDFException")}}a.InvalidPDFException=Z;class ee extends w{constructor(te){super(te,"MissingPDFException")}}a.MissingPDFException=ee;class ae extends w{constructor(te,ne){super(te,"UnexpectedResponseException"),this.status=ne}}a.UnexpectedResponseException=ae;class ie extends w{constructor(te){super(te,"FormatError")}}a.FormatError=ie;class Y extends w{constructor(te){super(te,"AbortException")}}a.AbortException=Y;function q(G){(typeof G!="object"||G===null||G.length===void 0)&&K("Invalid argument for bytesToString");const te=G.length,ne=8192;if(te<ne)return String.fromCharCode.apply(null,G);const ve=[];for(let Ee=0;Ee<te;Ee+=ne){const se=Math.min(Ee+ne,te),pe=G.subarray(Ee,se);ve.push(String.fromCharCode.apply(null,pe))}return ve.join("")}function d(G){typeof G!="string"&&K("Invalid argument for stringToBytes");const te=G.length,ne=new Uint8Array(te);for(let ve=0;ve<te;++ve)ne[ve]=G.charCodeAt(ve)&255;return ne}function v(G){return String.fromCharCode(G>>24&255,G>>16&255,G>>8&255,G&255)}function C(G){return Object.keys(G).length}function N(G){const te=Object.create(null);for(const[ne,ve]of G)te[ne]=ve;return te}function $(){const G=new Uint8Array(4);return G[0]=1,new Uint32Array(G.buffer,0,1)[0]===1}function Q(){try{return new Function(""),!0}catch{return!1}}class ce{static get isLittleEndian(){return p(this,"isLittleEndian",$())}static get isEvalSupported(){return p(this,"isEvalSupported",Q())}static get isOffscreenCanvasSupported(){return p(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?p(this,"platform",{isWin:!1,isMac:!1}):p(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}a.FeatureTest=ce;const le=[...Array(256).keys()].map(G=>G.toString(16).padStart(2,"0"));class ue{static makeHexColor(te,ne,ve){return`#${le[te]}${le[ne]}${le[ve]}`}static scaleMinMax(te,ne){let ve;te[0]?(te[0]<0&&(ve=ne[0],ne[0]=ne[1],ne[1]=ve),ne[0]*=te[0],ne[1]*=te[0],te[3]<0&&(ve=ne[2],ne[2]=ne[3],ne[3]=ve),ne[2]*=te[3],ne[3]*=te[3]):(ve=ne[0],ne[0]=ne[2],ne[2]=ve,ve=ne[1],ne[1]=ne[3],ne[3]=ve,te[1]<0&&(ve=ne[2],ne[2]=ne[3],ne[3]=ve),ne[2]*=te[1],ne[3]*=te[1],te[2]<0&&(ve=ne[0],ne[0]=ne[1],ne[1]=ve),ne[0]*=te[2],ne[1]*=te[2]),ne[0]+=te[4],ne[1]+=te[4],ne[2]+=te[5],ne[3]+=te[5]}static transform(te,ne){return[te[0]*ne[0]+te[2]*ne[1],te[1]*ne[0]+te[3]*ne[1],te[0]*ne[2]+te[2]*ne[3],te[1]*ne[2]+te[3]*ne[3],te[0]*ne[4]+te[2]*ne[5]+te[4],te[1]*ne[4]+te[3]*ne[5]+te[5]]}static applyTransform(te,ne){const ve=te[0]*ne[0]+te[1]*ne[2]+ne[4],Ee=te[0]*ne[1]+te[1]*ne[3]+ne[5];return[ve,Ee]}static applyInverseTransform(te,ne){const ve=ne[0]*ne[3]-ne[1]*ne[2],Ee=(te[0]*ne[3]-te[1]*ne[2]+ne[2]*ne[5]-ne[4]*ne[3])/ve,se=(-te[0]*ne[1]+te[1]*ne[0]+ne[4]*ne[1]-ne[5]*ne[0])/ve;return[Ee,se]}static getAxialAlignedBoundingBox(te,ne){const ve=ue.applyTransform(te,ne),Ee=ue.applyTransform(te.slice(2,4),ne),se=ue.applyTransform([te[0],te[3]],ne),pe=ue.applyTransform([te[2],te[1]],ne);return[Math.min(ve[0],Ee[0],se[0],pe[0]),Math.min(ve[1],Ee[1],se[1],pe[1]),Math.max(ve[0],Ee[0],se[0],pe[0]),Math.max(ve[1],Ee[1],se[1],pe[1])]}static inverseTransform(te){const ne=te[0]*te[3]-te[1]*te[2];return[te[3]/ne,-te[1]/ne,-te[2]/ne,te[0]/ne,(te[2]*te[5]-te[4]*te[3])/ne,(te[4]*te[1]-te[5]*te[0])/ne]}static singularValueDecompose2dScale(te){const ne=[te[0],te[2],te[1],te[3]],ve=te[0]*ne[0]+te[1]*ne[2],Ee=te[0]*ne[1]+te[1]*ne[3],se=te[2]*ne[0]+te[3]*ne[2],pe=te[2]*ne[1]+te[3]*ne[3],Ae=(ve+pe)/2,Pe=Math.sqrt((ve+pe)**2-4*(ve*pe-se*Ee))/2,ke=Ae+Pe||1,Re=Ae-Pe||1;return[Math.sqrt(ke),Math.sqrt(Re)]}static normalizeRect(te){const ne=te.slice(0);return te[0]>te[2]&&(ne[0]=te[2],ne[2]=te[0]),te[1]>te[3]&&(ne[1]=te[3],ne[3]=te[1]),ne}static intersect(te,ne){const ve=Math.max(Math.min(te[0],te[2]),Math.min(ne[0],ne[2])),Ee=Math.min(Math.max(te[0],te[2]),Math.max(ne[0],ne[2]));if(ve>Ee)return null;const se=Math.max(Math.min(te[1],te[3]),Math.min(ne[1],ne[3])),pe=Math.min(Math.max(te[1],te[3]),Math.max(ne[1],ne[3]));return se>pe?null:[ve,se,Ee,pe]}static bezierBoundingBox(te,ne,ve,Ee,se,pe,Ae,Pe){const ke=[],Re=[[],[]];let Ce,Te,Me,Oe,Ne,xe,Le,Fe;for(let He=0;He<2;++He){if(He===0?(Te=6*te-12*ve+6*se,Ce=-3*te+9*ve-9*se+3*Ae,Me=3*ve-3*te):(Te=6*ne-12*Ee+6*pe,Ce=-3*ne+9*Ee-9*pe+3*Pe,Me=3*Ee-3*ne),Math.abs(Ce)<1e-12){if(Math.abs(Te)<1e-12)continue;Oe=-Me/Te,0<Oe&&Oe<1&&ke.push(Oe);continue}Le=Te*Te-4*Me*Ce,Fe=Math.sqrt(Le),!(Le<0)&&(Ne=(-Te+Fe)/(2*Ce),0<Ne&&Ne<1&&ke.push(Ne),xe=(-Te-Fe)/(2*Ce),0<xe&&xe<1&&ke.push(xe))}let Ue=ke.length,Ie;const je=Ue;for(;Ue--;)Oe=ke[Ue],Ie=1-Oe,Re[0][Ue]=Ie*Ie*Ie*te+3*Ie*Ie*Oe*ve+3*Ie*Oe*Oe*se+Oe*Oe*Oe*Ae,Re[1][Ue]=Ie*Ie*Ie*ne+3*Ie*Ie*Oe*Ee+3*Ie*Oe*Oe*pe+Oe*Oe*Oe*Pe;return Re[0][je]=te,Re[1][je]=ne,Re[0][je+1]=Ae,Re[1][je+1]=Pe,Re[0].length=Re[1].length=je+2,[Math.min(...Re[0]),Math.min(...Re[1]),Math.max(...Re[0]),Math.max(...Re[1])]}}a.Util=ue;const de=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ye(G){if(G[0]>="ï"){let ne;if(G[0]==="þ"&&G[1]==="ÿ"?ne="utf-16be":G[0]==="ÿ"&&G[1]==="þ"?ne="utf-16le":G[0]==="ï"&&G[1]==="»"&&G[2]==="¿"&&(ne="utf-8"),ne)try{const ve=new TextDecoder(ne,{fatal:!0}),Ee=d(G);return ve.decode(Ee)}catch(ve){z(`stringToPDFString: "${ve}".`)}}const te=[];for(let ne=0,ve=G.length;ne<ve;ne++){const Ee=de[G.charCodeAt(ne)];te.push(Ee?String.fromCharCode(Ee):G.charAt(ne))}return te.join("")}function fe(G){return decodeURIComponent(escape(G))}function _e(G){return unescape(encodeURIComponent(G))}function me(G){return typeof G=="object"&&G!==null&&G.byteLength!==void 0}function Se(G,te){if(G.length!==te.length)return!1;for(let ne=0,ve=G.length;ne<ve;ne++)if(G[ne]!==te[ne])return!1;return!0}function be(G=new Date){return[G.getUTCFullYear().toString(),(G.getUTCMonth()+1).toString().padStart(2,"0"),G.getUTCDate().toString().padStart(2,"0"),G.getUTCHours().toString().padStart(2,"0"),G.getUTCMinutes().toString().padStart(2,"0"),G.getUTCSeconds().toString().padStart(2,"0")].join("")}function we(){const G=Object.create(null);let te=!1;return Object.defineProperty(G,"settled",{get(){return te}}),G.promise=new Promise(function(ne,ve){G.resolve=function(Ee){te=!0,ne(Ee)},G.reject=function(Ee){te=!0,ve(Ee)}}),G}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var l,m,o,A,ze,j,at,R,T,_,F,k,S,g,b,dt,h,I,ht,E,s;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:r,NodeCMapReaderFactory:e,NodeFilterFactory:t,NodeStandardFontDataFactory:n}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=r,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultFilterFactory=DefaultFilterFactory=t,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=n}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:r}=__w_pdfjs_require__(21);createPDFNetworkStream=e=>new r(e)}else{const{PDFNetworkStream:r}=__w_pdfjs_require__(24),{PDFFetchStream:e}=__w_pdfjs_require__(25);createPDFNetworkStream=t=>(0,_display_utils.isValidFetchUrl)(t.url)?new e(t):new r(t)}function getDocument(r){if(typeof r=="string"||r instanceof URL?r={url:r}:(0,_util.isArrayBuffer)(r)&&(r={data:r}),typeof r!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!r.url&&!r.data&&!r.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new PDFDocumentLoadingTask,{docId:t}=e,n=r.url?getUrlProp(r.url):null,i=r.data?getDataProp(r.data):null,f=r.httpHeaders||null,M=r.withCredentials===!0,P=r.password??null,B=r.range instanceof PDFDataRangeTransport?r.range:null,J=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let H=r.worker instanceof PDFWorker?r.worker:null;const U=r.verbosity,z=typeof r.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(r.docBaseUrl)?r.docBaseUrl:null,K=typeof r.cMapUrl=="string"?r.cMapUrl:null,V=r.cMapPacked!==!1,L=r.CMapReaderFactory||DefaultCMapReaderFactory,y=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,p=r.StandardFontDataFactory||DefaultStandardFontDataFactory,w=r.stopAtErrors!==!0,X=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,W=r.isEvalSupported!==!1,Z=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!_is_node.isNodeJS,ee=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,ae=typeof r.disableFontFace=="boolean"?r.disableFontFace:_is_node.isNodeJS,ie=r.fontExtraProperties===!0,Y=r.enableXfa===!0,q=r.ownerDocument||globalThis.document,d=r.disableRange===!0,v=r.disableStream===!0,C=r.disableAutoFetch===!0,N=r.pdfBug===!0,$=B?B.length:r.length??NaN,Q=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!_is_node.isNodeJS&&!ae,ce=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:L===_display_utils.DOMCMapReaderFactory&&p===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(K,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(y,document.baseURI),le=r.canvasFactory||new DefaultCanvasFactory({ownerDocument:q}),ue=r.filterFactory||new DefaultFilterFactory({docId:t,ownerDocument:q}),de=null;(0,_util.setVerbosityLevel)(U);const ye={canvasFactory:le,filterFactory:ue};if(ce||(ye.cMapReaderFactory=new L({baseUrl:K,isCompressed:V}),ye.standardFontDataFactory=new p({baseUrl:y})),!H){const me={verbosity:U,port:_worker_options.GlobalWorkerOptions.workerPort};H=me.port?PDFWorker.fromPort(me):new PDFWorker(me),e._worker=H}const fe={docId:t,apiVersion:"3.5.141",data:i,password:P,disableAutoFetch:C,rangeChunkSize:J,length:$,docBaseUrl:z,enableXfa:Y,evaluatorOptions:{maxImageSize:X,disableFontFace:ae,ignoreErrors:w,isEvalSupported:W,isOffscreenCanvasSupported:Z,canvasMaxAreaInBytes:ee,fontExtraProperties:ie,useSystemFonts:Q,cMapUrl:ce?K:null,standardFontDataUrl:ce?y:null}},_e={ignoreErrors:w,isEvalSupported:W,disableFontFace:ae,fontExtraProperties:ie,enableXfa:Y,ownerDocument:q,disableAutoFetch:C,pdfBug:N,styleElement:de};return H.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const me=_fetchDocument(H,fe),Se=new Promise(function(be){let we;B?we=new _transport_stream.PDFDataTransportStream({length:$,initialData:B.initialData,progressiveDone:B.progressiveDone,contentDispositionFilename:B.contentDispositionFilename,disableRange:d,disableStream:v},B):i||(we=createPDFNetworkStream({url:n,length:$,httpHeaders:f,withCredentials:M,rangeChunkSize:J,disableRange:d,disableStream:v})),be(we)});return Promise.all([me,Se]).then(function([be,we]){if(e.destroyed)throw new Error("Loading aborted");const G=new _message_handler.MessageHandler(t,be,H.port),te=new WorkerTransport(G,e,we,_e,ye);e._transport=te,G.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(r,e){if(r.destroyed)throw new Error("Worker was destroyed");const t=await r.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(r.destroyed)throw new Error("Worker was destroyed");return t}function getUrlProp(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch{if(_is_node.isNodeJS&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(r){if(_is_node.isNodeJS&&typeof Buffer<"u"&&r instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(r);if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return(0,_util.stringToBytes)(r);if(typeof r=="object"&&!isNaN(r==null?void 0:r.length)||(0,_util.isArrayBuffer)(r))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const a=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${it(a,l)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0,await((e=this._transport)==null?void 0:e.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=a;l=new WeakMap,oe(PDFDocumentLoadingTask,l,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,t,n=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,t,n,i=!1){oe(this,A);oe(this,j);oe(this,m,null);oe(this,o,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:f=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:f})}getAnnotations({intent:e="display"}={}){const t=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:i=_util.AnnotationMode.ENABLE,transform:f=null,background:M=null,optionalContentConfigPromise:P=null,annotationCanvasMap:B=null,pageColors:J=null,printAnnotationStorage:H=null}){var p,w,X;if((p=arguments[0])!=null&&p.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(w=this._stats)==null||w.time("Overall");const U=this._transport.getRenderingIntent(n,i,H);ge(this,o,!1),he(this,j,at).call(this),P||(P=this._transport.getOptionalContentConfig());let z=this._intentStates.get(U.cacheKey);z||(z=Object.create(null),this._intentStates.set(U.cacheKey,z)),z.streamReaderCancelTimeout&&(clearTimeout(z.streamReaderCancelTimeout),z.streamReaderCancelTimeout=null);const K=!!(U.renderingIntent&_util.RenderingIntentFlag.PRINT);z.displayReadyCapability||(z.displayReadyCapability=(0,_util.createPromiseCapability)(),z.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(X=this._stats)==null||X.time("Page Request"),this._pumpOperatorList(U));const V=W=>{var Z,ee;z.renderTasks.delete(L),(this._maybeCleanupAfterRender||K)&&ge(this,o,!0),he(this,A,ze).call(this,!K),W?(L.capability.reject(W),this._abortOperatorList({intentState:z,reason:W instanceof Error?W:new Error(W)})):L.capability.resolve(),(Z=this._stats)==null||Z.timeEnd("Rendering"),(ee=this._stats)==null||ee.timeEnd("Overall")},L=new InternalRenderTask({callback:V,params:{canvasContext:e,viewport:t,transform:f,background:M},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:B,operatorList:z.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!K,pdfBug:this._pdfBug,pageColors:J});(z.renderTasks||(z.renderTasks=new Set)).add(L);const y=L.task;return Promise.all([z.displayReadyCapability.promise,P]).then(([W,Z])=>{var ee;if(O(this,o)){V();return}(ee=this._stats)==null||ee.time("Rendering"),L.initializeGraphics({transparency:W,optionalContentConfig:Z}),L.operatorListChanged()}).catch(V),y}getOperatorList({intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}={}){var B;function i(){M.operatorList.lastChunk&&(M.opListReadCapability.resolve(M.operatorList),M.renderTasks.delete(P))}const f=this._transport.getRenderingIntent(e,t,n,!0);let M=this._intentStates.get(f.cacheKey);M||(M=Object.create(null),this._intentStates.set(f.cacheKey,M));let P;return M.opListReadCapability||(P=Object.create(null),P.operatorListChanged=i,M.opListReadCapability=(0,_util.createPromiseCapability)(),(M.renderTasks||(M.renderTasks=new Set)).add(P),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(B=this._stats)==null||B.time("Page Request"),this._pumpOperatorList(f)),M.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>_xfa_text.XfaText.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function f(){M.read().then(function({value:B,done:J}){if(J){n(P);return}Object.assign(P.styles,B.styles),P.items.push(...B.items),f()},i)}const M=t.getReader(),P={items:[],styles:Object.create(null)};f()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),ge(this,o,!1),he(this,j,at).call(this),Promise.all(e)}cleanup(e=!1){ge(this,o,!0);const t=he(this,A,ze).call(this,!1);return e&&t&&this._stats&&(this._stats=new _display_utils.StatTimer),t}_startRenderPage(e,t){var i,f;const n=this._intentStates.get(t);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(f=n.displayReadyCapability)==null||f.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&he(this,A,ze).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageMap:n}){const f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:n}).getReader(),M=this._intentStates.get(t);M.streamReader=f;const P=()=>{f.read().then(({value:B,done:J})=>{if(J){M.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(B,M),P())},B=>{if(M.streamReader=null,!this._transport.destroyed){if(M.operatorList){M.operatorList.lastChunk=!0;for(const J of M.renderTasks)J.operatorListChanged();he(this,A,ze).call(this,!0)}if(M.displayReadyCapability)M.displayReadyCapability.reject(B);else if(M.opListReadCapability)M.opListReadCapability.reject(B);else throw B}})};P()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof _display_utils.RenderingCancelledException){let i=RENDERING_CANCELLED_TIMEOUT;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new _util.AbortException(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,f]of this._intentStates)if(f===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}m=new WeakMap,o=new WeakMap,A=new WeakSet,ze=function(e=!1){if(he(this,j,at).call(this),!O(this,o))return!1;if(e)return ge(this,m,setTimeout(()=>{ge(this,m,null),he(this,A,ze).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ge(this,o,!1),!0},j=new WeakSet,at=function(){O(this,m)&&(clearTimeout(O(this,m)),ge(this,m,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){oe(this,R,new Set);oe(this,T,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};O(this,T).then(()=>{for(const i of O(this,R))i.call(this,n)})}addEventListener(e,t){O(this,R).add(t)}removeEventListener(e,t){O(this,R).delete(t)}terminate(){O(this,R).clear()}}R=new WeakMap,T=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const r=(_=document==null?void 0:document.currentScript)==null?void 0:_.src;r&&(PDFWorkerUtil.fallbackWorkerSrc=r.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(r,e){let t;try{if(t=new URL(r),!t.origin||t.origin==="null")return!1}catch{return!1}const n=new URL(e,t);return t.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(r){const e=`importScripts("${r}");`;return URL.createObjectURL(new Blob([e]))}}const _PDFWorker=class{constructor({name:r=null,port:e=null,verbosity:t=(0,_util.getVerbosityLevel)()}={}){if(e&&O(_PDFWorker,F).has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=r,this.destroyed=!1,this.verbosity=t,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e){O(_PDFWorker,F).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(r){this._port=r,this._messageHandler=new _message_handler.MessageHandler("main","worker",r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:r}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,r)||(r=PDFWorkerUtil.createCDNWrapper(new URL(r,window.location).href));const e=new Worker(r),t=new _message_handler.MessageHandler("main","worker",e),n=()=>{e.removeEventListener("error",i),t.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||n()};e.addEventListener("error",i),t.on("test",M=>{if(e.removeEventListener("error",i),this.destroyed){n();return}M?(this._messageHandler=t,this._port=e,this._webWorker=e,this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),t.destroy(),e.terminate())}),t.on("ready",M=>{if(e.removeEventListener("error",i),this.destroyed){n();return}try{f()}catch{this._setupFakeWorker()}});const f=()=>{const M=new Uint8Array;t.send("test",M,[M.buffer])};f();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(r=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const t=`fake${PDFWorkerUtil.fakeWorkerId++}`,n=new _message_handler.MessageHandler(t+"_worker",t,e);r.setup(n,e);const i=new _message_handler.MessageHandler(t,t+"_worker",e);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})}).catch(r=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${r.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),O(_PDFWorker,F).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(r){if(!(r!=null&&r.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return O(this,F).has(r.port)?O(this,F).get(r.port):new _PDFWorker(r)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var r;try{return((r=globalThis.pdfjsWorker)==null?void 0:r.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;F=new WeakMap,oe(PDFWorker,F,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(e,t,n,i,f){oe(this,b);oe(this,k,new Map);oe(this,S,new Map);oe(this,g,new Map);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this._params=i,this.canvasFactory=f.canvasFactory,this.filterFactory=f.filterFactory,this.cMapReaderFactory=f.cMapReaderFactory,this.standardFontDataFactory=f.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,t=_util.AnnotationMode.ENABLE,n=null,i=!1){let f=_util.RenderingIntentFlag.DISPLAY,M=null;switch(e){case"any":f=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":f=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case _util.AnnotationMode.DISABLE:f+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:f+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:f+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,M=(f&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return i&&(f+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:f,cacheKey:`${f}_${_annotation_storage.AnnotationStorage.getHash(M)}`,annotationStorageMap:M}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of O(this,S).values())e.push(n._destroy());O(this,S).clear(),O(this,g).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),O(this,k).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=f=>{this._lastProgress={loaded:f.loaded,total:f.total}},i.onPull=()=>{this._fullReader.read().then(function({value:f,done:M}){if(M){i.close();return}(0,_util.assert)(f instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(f),1,[f])}).catch(f=>{i.error(f)})},i.onCancel=f=>{this._fullReader.cancel(f),i.ready.catch(M=>{if(!this.destroyed)throw M})}}),e.on("ReaderHeadersReady",n=>{const i=(0,_util.createPromiseCapability)(),f=this._fullReader;return f.headersReady.then(()=>{var M;(!f.isStreamingSupported||!f.isRangeSupported)&&(this._lastProgress&&((M=t.onProgress)==null||M.call(t,this._lastProgress)),f.onProgress=P=>{var B;(B=t.onProgress)==null||B.call(t,{loaded:P.loaded,total:P.total})}),i.resolve({isStreamingSupported:f.isStreamingSupported,isRangeSupported:f.isRangeSupported,contentLength:f.contentLength})},i.reject),i.promise}),e.on("GetRangeReader",(n,i)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const f=this._networkStream.getRangeReader(n.begin,n.end);if(!f){i.close();return}i.onPull=()=>{f.read().then(function({value:M,done:P}){if(P){i.close();return}(0,_util.assert)(M instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(M),1,[M])}).catch(M=>{i.error(M)})},i.onCancel=M=>{f.cancel(M),i.ready.catch(P=>{if(!this.destroyed)throw P})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(n,this))}),e.on("DocException",function(n){let i;switch(n.name){case"PasswordException":i=new _util.PasswordException(n.message,n.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(n.message);break;case"MissingPDFException":i=new _util.MissingPDFException(n.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(n.message,n.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(n.message,n.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(i)}),e.on("PasswordRequest",n=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const i=f=>{f instanceof Error?this._passwordCapability.reject(f):this._passwordCapability.resolve({password:f})};try{t.onPassword(i,n.code)}catch(f){this._passwordCapability.reject(f)}}else this._passwordCapability.reject(new _util.PasswordException(n.message,n.code));return this._passwordCapability.promise}),e.on("DataLoaded",n=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;O(this,S).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,f])=>{var M;if(!this.destroyed&&!this.commonObjs.has(n))switch(i){case"Font":const P=this._params;if("error"in f){const H=f.error;(0,_util.warn)(`Error during font loading: ${H}`),this.commonObjs.resolve(n,H);break}const B=P.pdfBug&&((M=globalThis.FontInspector)!=null&&M.enabled)?(H,U)=>globalThis.FontInspector.fontAdded(H,U):null,J=new _font_loader.FontFaceObject(f,{isEvalSupported:P.isEvalSupported,disableFontFace:P.disableFontFace,ignoreErrors:P.ignoreErrors,inspectFont:B});this.fontLoader.bind(J).catch(H=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!P.fontExtraProperties&&J.data&&(J.data=null),this.commonObjs.resolve(n,J)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,f);break;default:throw new Error(`Got unknown common object type ${i}`)}}),e.on("obj",([n,i,f,M])=>{var B;if(this.destroyed)return;const P=O(this,S).get(i);if(!P.objs.has(n))switch(f){case"Image":if(P.objs.resolve(n,M),M){let J;if(M.bitmap){const{width:H,height:U}=M;J=H*U*4}else J=((B=M.data)==null?void 0:B.length)||0;J>_util.MAX_IMAGE_SIZE_TO_CACHE&&(P._maybeCleanupAfterRender=!0)}break;case"Pattern":P.objs.resolve(n,M);break;default:throw new Error(`Got unknown object type ${f}`)}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((e=this._fullReader)==null?void 0:e.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=O(this,g).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(f=>{if(this.destroyed)throw new Error("Transport destroyed");const M=new PDFPageProxy(t,f,this,this._params.pdfBug);return O(this,S).set(t,M),M});return O(this,g).set(t,i),i}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return he(this,b,dt).call(this,"GetFieldObjects")}hasJSActions(){return he(this,b,dt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=O(this,k).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var f,M;return{info:i[0],metadata:i[1]?new _metadata.Metadata(i[1]):null,contentDispositionFilename:((f=this._fullReader)==null?void 0:f.filename)??null,contentLength:((M=this._fullReader)==null?void 0:M.contentLength)??null}});return O(this,k).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of O(this,S).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),O(this,k).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:t}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:t})}}k=new WeakMap,S=new WeakMap,g=new WeakMap,b=new WeakSet,dt=function(e,t=null){const n=O(this,k).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return O(this,k).set(e,i),i};class PDFObjects{constructor(){oe(this,I);oe(this,h,Object.create(null))}get(e,t=null){if(t){const i=he(this,I,ht).call(this,e);return i.capability.promise.then(()=>t(i.data)),null}const n=O(this,h)[e];if(!(n!=null&&n.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=O(this,h)[e];return(t==null?void 0:t.capability.settled)||!1}resolve(e,t=null){const n=he(this,I,ht).call(this,e);n.data=t,n.capability.resolve()}clear(){var e;for(const t in O(this,h)){const{data:n}=O(this,h)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}ge(this,h,Object.create(null))}}h=new WeakMap,I=new WeakSet,ht=function(e){const t=O(this,h)[e];return t||(O(this,h)[e]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(e){oe(this,E,null);ge(this,E,e),this.onContinue=null}get promise(){return O(this,E).capability.promise}cancel(e=0){O(this,E).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=O(this,E).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=O(this,E);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}E=new WeakMap,exports.RenderTask=RenderTask;const c=class{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:f,operatorList:M,pageIndex:P,canvasFactory:B,filterFactory:J,useRequestAnimationFrame:H=!1,pdfBug:U=!1,pageColors:z=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=f,this.operatorListIdx=null,this.operatorList=M,this._pageIndex=P,this.canvasFactory=B,this.filterFactory=J,this._pdfBug=U,this.pageColors=z,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=H===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var P,B;if(this.cancelled)return;if(this._canvas){if(O(c,s).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");O(c,s).add(this._canvas)}this._pdfBug&&((P=globalThis.StepperManager)!=null&&P.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:f,background:M}=this.params;this.gfx=new _canvas.CanvasGraphics(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap),this.gfx.beginDrawing({transform:f,viewport:i,transparency:e,background:M}),this.operatorListIdx=0,this.graphicsReady=!0,(B=this.graphicsReadyCallback)==null||B.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(this.pageColors),this._canvas&&O(c,s).delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&O(c,s).delete(this._canvas),this.callback())))}};let InternalRenderTask=c;s=new WeakMap,oe(InternalRenderTask,s,new WeakSet);const version="3.5.141";exports.version=version;const build="be0f6ee08";exports.build=build},(l,a,m)=>{var R,T,_,xt,k;Object.defineProperty(a,"__esModule",{value:!0}),a.PrintAnnotationStorage=a.AnnotationStorage=void 0;var o=m(1),A=m(4),D=m(8);class j{constructor(){oe(this,_);oe(this,R,!1);oe(this,T,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,b){const u=O(this,T).get(g);return u===void 0?b:Object.assign(b,u)}getRawValue(g){return O(this,T).get(g)}remove(g){if(O(this,T).delete(g),O(this,T).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const b of O(this,T).values())if(b instanceof A.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,b){const u=O(this,T).get(g);let h=!1;if(u!==void 0)for(const[I,x]of Object.entries(b))u[I]!==x&&(h=!0,u[I]=x);else h=!0,O(this,T).set(g,b);h&&he(this,_,xt).call(this),b instanceof A.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(b.constructor._type)}has(g){return O(this,T).has(g)}getAll(){return O(this,T).size>0?(0,o.objectFromMap)(O(this,T)):null}setAll(g){for(const[b,u]of Object.entries(g))this.setValue(b,u)}get size(){return O(this,T).size}resetModified(){O(this,R)&&(ge(this,R,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new re(this)}get serializable(){if(O(this,T).size===0)return null;const g=new Map;for(const[b,u]of O(this,T)){const h=u instanceof A.AnnotationEditor?u.serialize():u;h&&g.set(b,h)}return g}static getHash(g){if(!g)return"";const b=new D.MurmurHash3_64;for(const[u,h]of g)b.update(`${u}:${JSON.stringify(h)}`);return b.hexdigest()}}R=new WeakMap,T=new WeakMap,_=new WeakSet,xt=function(){O(this,R)||(ge(this,R,!0),typeof this.onSetModified=="function"&&this.onSetModified())},a.AnnotationStorage=j;class re extends j{constructor(b){super();oe(this,k,null);ge(this,k,structuredClone(b.serializable))}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return O(this,k)}}k=new WeakMap,a.PrintAnnotationStorage=re},(l,a,m)=>{var j,re,R,T,_,F;Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditor=void 0;var o=m(5),A=m(1);const k=class{constructor(g){oe(this,j,this.focusin.bind(this));oe(this,re,this.focusout.bind(this));oe(this,R,!1);oe(this,T,!1);oe(this,_,!1);De(this,"_uiManager",null);oe(this,F,k._zIndex++);this.constructor===k&&(0,A.unreachable)("Cannot initialize AnnotationEditor."),this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager;const{rotation:b,rawDims:{pageWidth:u,pageHeight:h,pageX:I,pageY:x}}=this.parent.viewport;this.rotation=b,this.pageDimensions=[u,h],this.pageTranslation=[I,x];const[E,s]=this.parentDimensions;this.x=g.x/E,this.y=g.y/s,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,A.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=O(this,F)}setParent(g){g!==null&&(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions),this.parent=g}focusin(g){O(this,R)?ge(this,R,!1):this.parent.setSelected(this)}focusout(g){var u;if(!this.isAttachedToDOM)return;const b=g.relatedTarget;b!=null&&b.closest(`#${this.id}`)||(g.preventDefault(),(u=this.parent)!=null&&u.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(g){const b=this.parent.div.getBoundingClientRect();this.startX=g.clientX-b.x,this.startY=g.clientY-b.y,g.dataTransfer.setData("text/plain",this.id),g.dataTransfer.effectAllowed="move"}setAt(g,b,u,h){const[I,x]=this.parentDimensions;[u,h]=this.screenToPageTranslation(u,h),this.x=(g+u)/I,this.y=(b+h)/x,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(g,b){const[u,h]=this.parentDimensions;[g,b]=this.screenToPageTranslation(g,b),this.x+=g/u,this.y+=b/h,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(g,b){switch(this.parentRotation){case 90:return[b,-g];case 180:return[-g,-b];case 270:return[-b,g];default:return[g,b]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return this._uiManager.viewParameters.rotation}get parentDimensions(){const{realScale:g}=this._uiManager.viewParameters,[b,u]=this.pageDimensions;return[b*g,u*g]}setDims(g,b){const[u,h]=this.parentDimensions;this.div.style.width=`${100*g/u}%`,this.div.style.height=`${100*b/h}%`}fixDims(){const{style:g}=this.div,{height:b,width:u}=g,h=u.endsWith("%"),I=b.endsWith("%");if(h&&I)return;const[x,E]=this.parentDimensions;h||(g.width=`${100*parseFloat(u)/x}%`),I||(g.height=`${100*parseFloat(b)/E}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",O(this,j)),this.div.addEventListener("focusout",O(this,re));const[g,b]=this.getInitialTranslation();return this.translate(g,b),(0,o.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(g){const{isMac:b}=A.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&b){g.preventDefault();return}g.ctrlKey&&!b||g.shiftKey||g.metaKey&&b?this.parent.toggleSelected(this):this.parent.setSelected(this),ge(this,R,!0)}getRect(g,b){const u=this.parentScale,[h,I]=this.pageDimensions,[x,E]=this.pageTranslation,s=g/u,c=b/u,r=this.x*h,e=this.y*I,t=this.width*h,n=this.height*I;switch(this.rotation){case 0:return[r+s+x,I-e-c-n+E,r+s+t+x,I-e-c+E];case 90:return[r+c+x,I-e+s+E,r+c+n+x,I-e+s+t+E];case 180:return[r-s-t+x,I-e+c+E,r-s+x,I-e+c+n+E];case 270:return[r-c-n+x,I-e-s-t+E,r-c+x,I-e-s+E];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,b){const[u,h,I,x]=g,E=I-u,s=x-h;switch(this.rotation){case 0:return[u,b-x,E,s];case 90:return[u,b-h,s,E];case 180:return[I,b-h,E,s];case 270:return[I,b-x,s,E];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ge(this,_,!0)}disableEditMode(){ge(this,_,!1)}isInEditMode(){return O(this,_)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var g;(g=this.div)==null||g.addEventListener("focusin",O(this,j))}serialize(){(0,A.unreachable)("An editor must be serializable")}static deserialize(g,b,u){const h=new this.prototype.constructor({parent:b,id:b.getNextId(),uiManager:u});h.rotation=g.rotation;const[I,x]=h.pageDimensions,[E,s,c,r]=h.getRectInCurrentCoords(g.rect,x);return h.x=E/I,h.y=s/x,h.width=c/I,h.height=r/x,h}remove(){this.div.removeEventListener("focusin",O(this,j)),this.div.removeEventListener("focusout",O(this,re)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var g;(g=this.div)==null||g.classList.add("selectedEditor")}unselect(){var g;(g=this.div)==null||g.classList.remove("selectedEditor")}updateParams(g,b){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return O(this,T)}set isEditing(g){ge(this,T,g),g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let D=k;j=new WeakMap,re=new WeakMap,R=new WeakMap,T=new WeakMap,_=new WeakMap,F=new WeakMap,De(D,"_colorManager",new o.ColorManager),De(D,"_zIndex",1),a.AnnotationEditor=D},(l,a,m)=>{var k,S,g,b,u,h,Dt,E,s,c,r,e,t,n,i,f,M,P,B,J,H,U,z,K,V,L,y,p,w,X,W,Lt,ee,ft,ie,It,q,Ft,v,We,N,Je,Q,Nt,le,Ut,de,pt,fe,Qe,me,yt;Object.defineProperty(a,"__esModule",{value:!0}),a.KeyboardManager=a.CommandManager=a.ColorManager=a.AnnotationEditorUIManager=void 0,a.bindEvents=D,a.opacityToHex=j;var o=m(1),A=m(6);function D(we,G,te){for(const ne of te)G.addEventListener(ne,we[ne].bind(we))}function j(we){return Math.round(Math.min(255,Math.max(1,255*we))).toString(16).padStart(2,"0")}class re{constructor(){oe(this,k,0)}getId(){return`${o.AnnotationEditorPrefix}${it(this,k)._++}`}}k=new WeakMap;class R{constructor(G=128){oe(this,S,[]);oe(this,g,!1);oe(this,b,void 0);oe(this,u,-1);ge(this,b,G)}add({cmd:G,undo:te,mustExec:ne,type:ve=NaN,overwriteIfSameType:Ee=!1,keepUndo:se=!1}){if(ne&&G(),O(this,g))return;const pe={cmd:G,undo:te,type:ve};if(O(this,u)===-1){O(this,S).length>0&&(O(this,S).length=0),ge(this,u,0),O(this,S).push(pe);return}if(Ee&&O(this,S)[O(this,u)].type===ve){se&&(pe.undo=O(this,S)[O(this,u)].undo),O(this,S)[O(this,u)]=pe;return}const Ae=O(this,u)+1;Ae===O(this,b)?O(this,S).splice(0,1):(ge(this,u,Ae),Ae<O(this,S).length&&O(this,S).splice(Ae)),O(this,S).push(pe)}undo(){O(this,u)!==-1&&(ge(this,g,!0),O(this,S)[O(this,u)].undo(),ge(this,g,!1),ge(this,u,O(this,u)-1))}redo(){O(this,u)<O(this,S).length-1&&(ge(this,u,O(this,u)+1),ge(this,g,!0),O(this,S)[O(this,u)].cmd(),ge(this,g,!1))}hasSomethingToUndo(){return O(this,u)!==-1}hasSomethingToRedo(){return O(this,u)<O(this,S).length-1}destroy(){ge(this,S,null)}}S=new WeakMap,g=new WeakMap,b=new WeakMap,u=new WeakMap,a.CommandManager=R;class T{constructor(G){oe(this,h);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:te}=o.FeatureTest.platform;for(const[ne,ve]of G)for(const Ee of ne){const se=Ee.startsWith("mac+");te&&se?(this.callbacks.set(Ee.slice(4),ve),this.allKeys.add(Ee.split("+").at(-1))):!te&&!se&&(this.callbacks.set(Ee,ve),this.allKeys.add(Ee.split("+").at(-1)))}}exec(G,te){if(!this.allKeys.has(te.key))return;const ne=this.callbacks.get(he(this,h,Dt).call(this,te));ne&&(ne.bind(G)(),te.stopPropagation(),te.preventDefault())}}h=new WeakSet,Dt=function(G){G.altKey&&this.buffer.push("alt"),G.ctrlKey&&this.buffer.push("ctrl"),G.metaKey&&this.buffer.push("meta"),G.shiftKey&&this.buffer.push("shift"),this.buffer.push(G.key);const te=this.buffer.join("+");return this.buffer.length=0,te},a.KeyboardManager=T;const x=class{get _colors(){const G=new Map([["CanvasText",null],["Canvas",null]]);return(0,A.getColorValues)(G),(0,o.shadow)(this,"_colors",G)}convert(G){const te=(0,A.getRGB)(G);if(!window.matchMedia("(forced-colors: active)").matches)return te;for(const[ne,ve]of this._colors)if(ve.every((Ee,se)=>Ee===te[se]))return x._colorsMapping.get(ne);return te}getHexCode(G){const te=this._colors.get(G);return te?o.Util.makeHexColor(...te):G}};let _=x;De(_,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),a.ColorManager=_;const be=class{constructor(G,te,ne){oe(this,W);oe(this,ee);oe(this,ie);oe(this,q);oe(this,v);oe(this,N);oe(this,Q);oe(this,le);oe(this,de);oe(this,fe);oe(this,me);oe(this,E,null);oe(this,s,new Map);oe(this,c,new Map);oe(this,r,null);oe(this,e,new R);oe(this,t,0);oe(this,n,null);oe(this,i,new Set);oe(this,f,null);oe(this,M,new re);oe(this,P,!1);oe(this,B,o.AnnotationEditorType.NONE);oe(this,J,new Set);oe(this,H,this.copy.bind(this));oe(this,U,this.cut.bind(this));oe(this,z,this.paste.bind(this));oe(this,K,this.keydown.bind(this));oe(this,V,this.onEditingAction.bind(this));oe(this,L,this.onPageChanging.bind(this));oe(this,y,this.onScaleChanging.bind(this));oe(this,p,this.onRotationChanging.bind(this));oe(this,w,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});oe(this,X,null);ge(this,X,G),ge(this,f,te),O(this,f)._on("editingaction",O(this,V)),O(this,f)._on("pagechanging",O(this,L)),O(this,f)._on("scalechanging",O(this,y)),O(this,f)._on("rotationchanging",O(this,p)),ge(this,r,ne),this.viewParameters={realScale:A.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){he(this,ee,ft).call(this),O(this,f)._off("editingaction",O(this,V)),O(this,f)._off("pagechanging",O(this,L)),O(this,f)._off("scalechanging",O(this,y)),O(this,f)._off("rotationchanging",O(this,p));for(const G of O(this,c).values())G.destroy();O(this,c).clear(),O(this,s).clear(),O(this,i).clear(),ge(this,E,null),O(this,J).clear(),O(this,e).destroy()}onPageChanging({pageNumber:G}){ge(this,t,G-1)}focusMainContainer(){O(this,X).focus()}addShouldRescale(G){O(this,i).add(G)}removeShouldRescale(G){O(this,i).delete(G)}onScaleChanging({scale:G}){this.commitOrRemove(),this.viewParameters.realScale=G*A.PixelsPerInch.PDF_TO_CSS_UNITS;for(const te of O(this,i))te.onScaleChanging()}onRotationChanging({pagesRotation:G}){this.commitOrRemove(),this.viewParameters.rotation=G}addToAnnotationStorage(G){!G.isEmpty()&&O(this,r)&&!O(this,r).has(G.id)&&O(this,r).setValue(G.id,G)}copy(G){if(G.preventDefault(),O(this,E)&&O(this,E).commitOrRemove(),!this.hasSelection)return;const te=[];for(const ne of O(this,J))ne.isEmpty()||te.push(ne.serialize());te.length!==0&&G.clipboardData.setData("application/pdfjs",JSON.stringify(te))}cut(G){this.copy(G),this.delete()}paste(G){G.preventDefault();let te=G.clipboardData.getData("application/pdfjs");if(!te)return;try{te=JSON.parse(te)}catch(ve){(0,o.warn)(`paste: "${ve.message}".`);return}if(!Array.isArray(te))return;this.unselectAll();const ne=O(this,c).get(O(this,t));try{const ve=[];for(const pe of te){const Ae=ne.deserialize(pe);if(!Ae)return;ve.push(Ae)}const Ee=()=>{for(const pe of ve)he(this,de,pt).call(this,pe);he(this,me,yt).call(this,ve)},se=()=>{for(const pe of ve)pe.remove()};this.addCommands({cmd:Ee,undo:se,mustExec:!0})}catch(ve){(0,o.warn)(`paste: "${ve.message}".`)}}keydown(G){var te;(te=this.getActive())!=null&&te.shouldGetKeyboardEvents()||be._keyboardManager.exec(this,G)}onEditingAction(G){["undo","redo","delete","selectAll"].includes(G.name)&&this[G.name]()}setEditingState(G){G?(he(this,W,Lt).call(this),he(this,ie,It).call(this),he(this,v,We).call(this,{isEditing:O(this,B)!==o.AnnotationEditorType.NONE,isEmpty:he(this,fe,Qe).call(this),hasSomethingToUndo:O(this,e).hasSomethingToUndo(),hasSomethingToRedo:O(this,e).hasSomethingToRedo(),hasSelectedEditor:!1})):(he(this,ee,ft).call(this),he(this,q,Ft).call(this),he(this,v,We).call(this,{isEditing:!1}))}registerEditorTypes(G){if(!O(this,n)){ge(this,n,G);for(const te of O(this,n))he(this,N,Je).call(this,te.defaultPropertiesToUpdate)}}getId(){return O(this,M).getId()}get currentLayer(){return O(this,c).get(O(this,t))}get currentPageIndex(){return O(this,t)}addLayer(G){O(this,c).set(G.pageIndex,G),O(this,P)?G.enable():G.disable()}removeLayer(G){O(this,c).delete(G.pageIndex)}updateMode(G){if(ge(this,B,G),G===o.AnnotationEditorType.NONE)this.setEditingState(!1),he(this,le,Ut).call(this);else{this.setEditingState(!0),he(this,Q,Nt).call(this);for(const te of O(this,c).values())te.updateMode(G)}}updateToolbar(G){G!==O(this,B)&&O(this,f).dispatch("switchannotationeditormode",{source:this,mode:G})}updateParams(G,te){if(O(this,n)){for(const ne of O(this,J))ne.updateParams(G,te);for(const ne of O(this,n))ne.updateDefaultParams(G,te)}}getEditors(G){const te=[];for(const ne of O(this,s).values())ne.pageIndex===G&&te.push(ne);return te}getEditor(G){return O(this,s).get(G)}addEditor(G){O(this,s).set(G.id,G)}removeEditor(G){var te;O(this,s).delete(G.id),this.unselect(G),(te=O(this,r))==null||te.remove(G.id)}setActiveEditor(G){O(this,E)!==G&&(ge(this,E,G),G&&he(this,N,Je).call(this,G.propertiesToUpdate))}toggleSelected(G){if(O(this,J).has(G)){O(this,J).delete(G),G.unselect(),he(this,v,We).call(this,{hasSelectedEditor:this.hasSelection});return}O(this,J).add(G),G.select(),he(this,N,Je).call(this,G.propertiesToUpdate),he(this,v,We).call(this,{hasSelectedEditor:!0})}setSelected(G){for(const te of O(this,J))te!==G&&te.unselect();O(this,J).clear(),O(this,J).add(G),G.select(),he(this,N,Je).call(this,G.propertiesToUpdate),he(this,v,We).call(this,{hasSelectedEditor:!0})}isSelected(G){return O(this,J).has(G)}unselect(G){G.unselect(),O(this,J).delete(G),he(this,v,We).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return O(this,J).size!==0}undo(){O(this,e).undo(),he(this,v,We).call(this,{hasSomethingToUndo:O(this,e).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:he(this,fe,Qe).call(this)})}redo(){O(this,e).redo(),he(this,v,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:O(this,e).hasSomethingToRedo(),isEmpty:he(this,fe,Qe).call(this)})}addCommands(G){O(this,e).add(G),he(this,v,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:he(this,fe,Qe).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const G=[...O(this,J)],te=()=>{for(const ve of G)ve.remove()},ne=()=>{for(const ve of G)he(this,de,pt).call(this,ve)};this.addCommands({cmd:te,undo:ne,mustExec:!0})}commitOrRemove(){var G;(G=O(this,E))==null||G.commitOrRemove()}selectAll(){for(const G of O(this,J))G.commit();he(this,me,yt).call(this,O(this,s).values())}unselectAll(){if(O(this,E)){O(this,E).commitOrRemove();return}if(O(this,J).size!==0){for(const G of O(this,J))G.unselect();O(this,J).clear(),he(this,v,We).call(this,{hasSelectedEditor:!1})}}isActive(G){return O(this,E)===G}getActive(){return O(this,E)}getMode(){return O(this,B)}};let F=be;E=new WeakMap,s=new WeakMap,c=new WeakMap,r=new WeakMap,e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new WeakMap,f=new WeakMap,M=new WeakMap,P=new WeakMap,B=new WeakMap,J=new WeakMap,H=new WeakMap,U=new WeakMap,z=new WeakMap,K=new WeakMap,V=new WeakMap,L=new WeakMap,y=new WeakMap,p=new WeakMap,w=new WeakMap,X=new WeakMap,W=new WeakSet,Lt=function(){O(this,X).addEventListener("keydown",O(this,K))},ee=new WeakSet,ft=function(){O(this,X).removeEventListener("keydown",O(this,K))},ie=new WeakSet,It=function(){document.addEventListener("copy",O(this,H)),document.addEventListener("cut",O(this,U)),document.addEventListener("paste",O(this,z))},q=new WeakSet,Ft=function(){document.removeEventListener("copy",O(this,H)),document.removeEventListener("cut",O(this,U)),document.removeEventListener("paste",O(this,z))},v=new WeakSet,We=function(G){Object.entries(G).some(([ne,ve])=>O(this,w)[ne]!==ve)&&O(this,f).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(O(this,w),G)})},N=new WeakSet,Je=function(G){O(this,f).dispatch("annotationeditorparamschanged",{source:this,details:G})},Q=new WeakSet,Nt=function(){if(!O(this,P)){ge(this,P,!0);for(const G of O(this,c).values())G.enable()}},le=new WeakSet,Ut=function(){if(this.unselectAll(),O(this,P)){ge(this,P,!1);for(const G of O(this,c).values())G.disable()}},de=new WeakSet,pt=function(G){const te=O(this,c).get(G.pageIndex);te?te.addOrRebuild(G):this.addEditor(G)},fe=new WeakSet,Qe=function(){if(O(this,s).size===0)return!0;if(O(this,s).size===1)for(const G of O(this,s).values())return G.isEmpty();return!1},me=new WeakSet,yt=function(G){O(this,J).clear();for(const te of G)te.isEmpty()||(O(this,J).add(te),te.select());he(this,v,We).call(this,{hasSelectedEditor:!0})},De(F,"_keyboardManager",new T([[["ctrl+a","mac+meta+a"],be.prototype.selectAll],[["ctrl+z","mac+meta+z"],be.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],be.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],be.prototype.delete],[["Escape","mac+Escape"],be.prototype.unselectAll]])),a.AnnotationEditorUIManager=F},(l,a,m)=>{var H,U,z,K,V,L,y,p,w,Ke,W,Ge,ee,qe;Object.defineProperty(a,"__esModule",{value:!0}),a.StatTimer=a.RenderingCancelledException=a.PixelsPerInch=a.PageViewport=a.PDFDateString=a.DOMStandardFontDataFactory=a.DOMSVGFactory=a.DOMFilterFactory=a.DOMCanvasFactory=a.DOMCMapReaderFactory=a.AnnotationPrefix=void 0,a.deprecated=r,a.getColorValues=f,a.getCurrentTransform=M,a.getCurrentTransformInverse=P,a.getFilenameFromUrl=I,a.getPdfFilenameFromUrl=x,a.getRGB=i,a.getXfaPageViewport=n,a.isDataScheme=u,a.isPdfFile=h,a.isValidFetchUrl=s,a.loadScript=c,a.setLayerDimensions=B;var o=m(7),A=m(1);const D="http://www.w3.org/2000/svg",j="pdfjs_internal_id_";a.AnnotationPrefix=j;const J=class{};let re=J;De(re,"CSS",96),De(re,"PDF",72),De(re,"PDF_TO_CSS_UNITS",J.CSS/J.PDF),a.PixelsPerInch=re;class R extends o.BaseFilterFactory{constructor({docId:q,ownerDocument:d=globalThis.document}={}){super();oe(this,w);oe(this,W);oe(this,ee);oe(this,H,void 0);oe(this,U,void 0);oe(this,z,void 0);oe(this,K,void 0);oe(this,V,void 0);oe(this,L,void 0);oe(this,y,void 0);oe(this,p,0);ge(this,z,q),ge(this,K,d)}addFilter(q){if(!q)return"none";let d=O(this,w,Ke).get(q);if(d)return d;let v,C,N,$;if(q.length===1){const de=q[0],ye=new Array(256);for(let fe=0;fe<256;fe++)ye[fe]=de[fe]/255;$=v=C=N=ye.join(",")}else{const[de,ye,fe]=q,_e=new Array(256),me=new Array(256),Se=new Array(256);for(let be=0;be<256;be++)_e[be]=de[be]/255,me[be]=ye[be]/255,Se[be]=fe[be]/255;v=_e.join(","),C=me.join(","),N=Se.join(","),$=`${v}${C}${N}`}if(d=O(this,w,Ke).get($),d)return O(this,w,Ke).set(q,d),d;const Q=`g_${O(this,z)}_transfer_map_${it(this,p)._++}`,ce=`url(#${Q})`;O(this,w,Ke).set(q,ce),O(this,w,Ke).set($,ce);const le=O(this,K).createElementNS(D,"filter",D);le.setAttribute("id",Q),le.setAttribute("color-interpolation-filters","sRGB");const ue=O(this,K).createElementNS(D,"feComponentTransfer");return le.append(ue),he(this,ee,qe).call(this,ue,"feFuncR",v),he(this,ee,qe).call(this,ue,"feFuncG",C),he(this,ee,qe).call(this,ue,"feFuncB",N),O(this,W,Ge).append(le),ce}addHCMFilter(q,d){var fe;const v=`${q}-${d}`;if(O(this,L)===v)return O(this,y);if(ge(this,L,v),ge(this,y,"none"),(fe=O(this,V))==null||fe.remove(),!q||!d)return O(this,y);O(this,W,Ge).style.color=q,q=getComputedStyle(O(this,W,Ge)).getPropertyValue("color");const C=i(q);q=A.Util.makeHexColor(...C),O(this,W,Ge).style.color=d,d=getComputedStyle(O(this,W,Ge)).getPropertyValue("color");const N=i(d);if(d=A.Util.makeHexColor(...N),O(this,W,Ge).style.color="",q==="#000000"&&d==="#ffffff"||q===d)return O(this,y);const $=new Array(256);for(let _e=0;_e<=255;_e++){const me=_e/255;$[_e]=me<=.03928?me/12.92:((me+.055)/1.055)**2.4}const Q=$.join(","),ce=`g_${O(this,z)}_hcm_filter`,le=ge(this,V,O(this,K).createElementNS(D,"filter",D));le.setAttribute("id",ce),le.setAttribute("color-interpolation-filters","sRGB");let ue=O(this,K).createElementNS(D,"feComponentTransfer");le.append(ue),he(this,ee,qe).call(this,ue,"feFuncR",Q),he(this,ee,qe).call(this,ue,"feFuncG",Q),he(this,ee,qe).call(this,ue,"feFuncB",Q);const de=O(this,K).createElementNS(D,"feColorMatrix");de.setAttribute("type","matrix"),de.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),le.append(de),ue=O(this,K).createElementNS(D,"feComponentTransfer"),le.append(ue);const ye=(_e,me)=>{const Se=C[_e]/255,be=N[_e]/255,we=new Array(me+1);for(let G=0;G<=me;G++)we[G]=Se+G/me*(be-Se);return we.join(",")};return he(this,ee,qe).call(this,ue,"feFuncR",ye(0,5)),he(this,ee,qe).call(this,ue,"feFuncG",ye(1,5)),he(this,ee,qe).call(this,ue,"feFuncB",ye(2,5)),O(this,W,Ge).append(le),ge(this,y,`url(#${ce})`),O(this,y)}destroy(q=!1){q&&O(this,y)||(O(this,U)&&(O(this,U).parentNode.parentNode.remove(),ge(this,U,null)),O(this,H)&&(O(this,H).clear(),ge(this,H,null)),ge(this,p,0))}}H=new WeakMap,U=new WeakMap,z=new WeakMap,K=new WeakMap,V=new WeakMap,L=new WeakMap,y=new WeakMap,p=new WeakMap,w=new WeakSet,Ke=function(){return O(this,H)||ge(this,H,new Map)},W=new WeakSet,Ge=function(){if(!O(this,U)){const q=O(this,K).createElement("div"),{style:d}=q;d.visibility="hidden",d.contain="strict",d.width=d.height=0,d.position="absolute",d.top=d.left=0,d.zIndex=-1;const v=O(this,K).createElementNS(D,"svg");v.setAttribute("width",0),v.setAttribute("height",0),ge(this,U,O(this,K).createElementNS(D,"defs")),q.append(v),v.append(O(this,U)),O(this,K).body.append(q)}return O(this,U)},ee=new WeakSet,qe=function(q,d,v){const C=O(this,K).createElementNS(D,d);C.setAttribute("type","discrete"),C.setAttribute("tableValues",v),q.append(C)},a.DOMFilterFactory=R;class T extends o.BaseCanvasFactory{constructor({ownerDocument:Y=globalThis.document}={}){super(),this._document=Y}_createCanvas(Y,q){const d=this._document.createElement("canvas");return d.width=Y,d.height=q,d}}a.DOMCanvasFactory=T;async function _(ie,Y=!1){if(s(ie,document.baseURI)){const q=await fetch(ie);if(!q.ok)throw new Error(q.statusText);return Y?new Uint8Array(await q.arrayBuffer()):(0,A.stringToBytes)(await q.text())}return new Promise((q,d)=>{const v=new XMLHttpRequest;v.open("GET",ie,!0),Y&&(v.responseType="arraybuffer"),v.onreadystatechange=()=>{if(v.readyState===XMLHttpRequest.DONE){if(v.status===200||v.status===0){let C;if(Y&&v.response?C=new Uint8Array(v.response):!Y&&v.responseText&&(C=(0,A.stringToBytes)(v.responseText)),C){q(C);return}}d(new Error(v.statusText))}},v.send(null)})}class F extends o.BaseCMapReaderFactory{_fetchData(Y,q){return _(Y,this.isCompressed).then(d=>({cMapData:d,compressionType:q}))}}a.DOMCMapReaderFactory=F;class k extends o.BaseStandardFontDataFactory{_fetchData(Y){return _(Y,!0)}}a.DOMStandardFontDataFactory=k;class S extends o.BaseSVGFactory{_createSVG(Y){return document.createElementNS(D,Y)}}a.DOMSVGFactory=S;class g{constructor({viewBox:Y,scale:q,rotation:d,offsetX:v=0,offsetY:C=0,dontFlip:N=!1}){this.viewBox=Y,this.scale=q,this.rotation=d,this.offsetX=v,this.offsetY=C;const $=(Y[2]+Y[0])/2,Q=(Y[3]+Y[1])/2;let ce,le,ue,de;switch(d%=360,d<0&&(d+=360),d){case 180:ce=-1,le=0,ue=0,de=1;break;case 90:ce=0,le=1,ue=1,de=0;break;case 270:ce=0,le=-1,ue=-1,de=0;break;case 0:ce=1,le=0,ue=0,de=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}N&&(ue=-ue,de=-de);let ye,fe,_e,me;ce===0?(ye=Math.abs(Q-Y[1])*q+v,fe=Math.abs($-Y[0])*q+C,_e=(Y[3]-Y[1])*q,me=(Y[2]-Y[0])*q):(ye=Math.abs($-Y[0])*q+v,fe=Math.abs(Q-Y[1])*q+C,_e=(Y[2]-Y[0])*q,me=(Y[3]-Y[1])*q),this.transform=[ce*q,le*q,ue*q,de*q,ye-ce*q*$-ue*q*Q,fe-le*q*$-de*q*Q],this.width=_e,this.height=me}get rawDims(){const{viewBox:Y}=this;return(0,A.shadow)(this,"rawDims",{pageWidth:Y[2]-Y[0],pageHeight:Y[3]-Y[1],pageX:Y[0],pageY:Y[1]})}clone({scale:Y=this.scale,rotation:q=this.rotation,offsetX:d=this.offsetX,offsetY:v=this.offsetY,dontFlip:C=!1}={}){return new g({viewBox:this.viewBox.slice(),scale:Y,rotation:q,offsetX:d,offsetY:v,dontFlip:C})}convertToViewportPoint(Y,q){return A.Util.applyTransform([Y,q],this.transform)}convertToViewportRectangle(Y){const q=A.Util.applyTransform([Y[0],Y[1]],this.transform),d=A.Util.applyTransform([Y[2],Y[3]],this.transform);return[q[0],q[1],d[0],d[1]]}convertToPdfPoint(Y,q){return A.Util.applyInverseTransform([Y,q],this.transform)}}a.PageViewport=g;class b extends A.BaseException{constructor(Y,q,d=0){super(Y,"RenderingCancelledException"),this.type=q,this.extraDelay=d}}a.RenderingCancelledException=b;function u(ie){const Y=ie.length;let q=0;for(;q<Y&&ie[q].trim()==="";)q++;return ie.substring(q,q+5).toLowerCase()==="data:"}function h(ie){return typeof ie=="string"&&/\.pdf$/i.test(ie)}function I(ie,Y=!1){return Y||([ie]=ie.split(/[#?]/,1)),ie.substring(ie.lastIndexOf("/")+1)}function x(ie,Y="document.pdf"){if(typeof ie!="string")return Y;if(u(ie))return(0,A.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Y;const q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,v=q.exec(ie);let C=d.exec(v[1])||d.exec(v[2])||d.exec(v[3]);if(C&&(C=C[0],C.includes("%")))try{C=d.exec(decodeURIComponent(C))[0]}catch{}return C||Y}class E{constructor(){De(this,"started",Object.create(null));De(this,"times",[])}time(Y){Y in this.started&&(0,A.warn)(`Timer is already running for ${Y}`),this.started[Y]=Date.now()}timeEnd(Y){Y in this.started||(0,A.warn)(`Timer has not been started for ${Y}`),this.times.push({name:Y,start:this.started[Y],end:Date.now()}),delete this.started[Y]}toString(){const Y=[];let q=0;for(const{name:d}of this.times)q=Math.max(d.length,q);for(const{name:d,start:v,end:C}of this.times)Y.push(`${d.padEnd(q)} ${C-v}ms
`);return Y.join("")}}a.StatTimer=E;function s(ie,Y){try{const{protocol:q}=Y?new URL(ie,Y):new URL(ie);return q==="http:"||q==="https:"}catch{return!1}}function c(ie,Y=!1){return new Promise((q,d)=>{const v=document.createElement("script");v.src=ie,v.onload=function(C){Y&&v.remove(),q(C)},v.onerror=function(){d(new Error(`Cannot load script at: ${v.src}`))},(document.head||document.documentElement).append(v)})}function r(ie){console.log("Deprecated API usage: "+ie)}let e;class t{static toDateObject(Y){if(!Y||typeof Y!="string")return null;e||(e=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const q=e.exec(Y);if(!q)return null;const d=parseInt(q[1],10);let v=parseInt(q[2],10);v=v>=1&&v<=12?v-1:0;let C=parseInt(q[3],10);C=C>=1&&C<=31?C:1;let N=parseInt(q[4],10);N=N>=0&&N<=23?N:0;let $=parseInt(q[5],10);$=$>=0&&$<=59?$:0;let Q=parseInt(q[6],10);Q=Q>=0&&Q<=59?Q:0;const ce=q[7]||"Z";let le=parseInt(q[8],10);le=le>=0&&le<=23?le:0;let ue=parseInt(q[9],10)||0;return ue=ue>=0&&ue<=59?ue:0,ce==="-"?(N+=le,$+=ue):ce==="+"&&(N-=le,$-=ue),new Date(Date.UTC(d,v,C,N,$,Q))}}a.PDFDateString=t;function n(ie,{scale:Y=1,rotation:q=0}){const{width:d,height:v}=ie.attributes.style,C=[0,0,parseInt(d),parseInt(v)];return new g({viewBox:C,scale:Y,rotation:q})}function i(ie){if(ie.startsWith("#")){const Y=parseInt(ie.slice(1),16);return[(Y&16711680)>>16,(Y&65280)>>8,Y&255]}return ie.startsWith("rgb(")?ie.slice(4,-1).split(",").map(Y=>parseInt(Y)):ie.startsWith("rgba(")?ie.slice(5,-1).split(",").map(Y=>parseInt(Y)).slice(0,3):((0,A.warn)(`Not a valid color format: "${ie}"`),[0,0,0])}function f(ie){const Y=document.createElement("span");Y.style.visibility="hidden",document.body.append(Y);for(const q of ie.keys()){Y.style.color=q;const d=window.getComputedStyle(Y).color;ie.set(q,i(d))}Y.remove()}function M(ie){const{a:Y,b:q,c:d,d:v,e:C,f:N}=ie.getTransform();return[Y,q,d,v,C,N]}function P(ie){const{a:Y,b:q,c:d,d:v,e:C,f:N}=ie.getTransform().invertSelf();return[Y,q,d,v,C,N]}function B(ie,Y,q=!1,d=!0){if(Y instanceof g){const{pageWidth:v,pageHeight:C}=Y.rawDims,{style:N}=ie,$=`calc(var(--scale-factor) * ${v}px)`,Q=`calc(var(--scale-factor) * ${C}px)`;!q||Y.rotation%180===0?(N.width=$,N.height=Q):(N.width=Q,N.height=$)}d&&ie.setAttribute("data-main-rotation",Y.rotation)}},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseStandardFontDataFactory=a.BaseSVGFactory=a.BaseFilterFactory=a.BaseCanvasFactory=a.BaseCMapReaderFactory=void 0;var o=m(1);class A{constructor(){this.constructor===A&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(_){return"none"}addHCMFilter(_,F){return"none"}destroy(_=!1){}}a.BaseFilterFactory=A;class D{constructor(){this.constructor===D&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(_,F){if(_<=0||F<=0)throw new Error("Invalid canvas size");const k=this._createCanvas(_,F);return{canvas:k,context:k.getContext("2d")}}reset(_,F,k){if(!_.canvas)throw new Error("Canvas is not specified");if(F<=0||k<=0)throw new Error("Invalid canvas size");_.canvas.width=F,_.canvas.height=k}destroy(_){if(!_.canvas)throw new Error("Canvas is not specified");_.canvas.width=0,_.canvas.height=0,_.canvas=null,_.context=null}_createCanvas(_,F){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}a.BaseCanvasFactory=D;class j{constructor({baseUrl:_=null,isCompressed:F=!0}){this.constructor===j&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_,this.isCompressed=F}async fetch({name:_}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_)throw new Error("CMap name must be specified.");const F=this.baseUrl+_+(this.isCompressed?".bcmap":""),k=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(F,k).catch(S=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${F}`)})}_fetchData(_,F){(0,o.unreachable)("Abstract method `_fetchData` called.")}}a.BaseCMapReaderFactory=j;class re{constructor({baseUrl:_=null}){this.constructor===re&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_}async fetch({filename:_}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_)throw new Error("Font filename must be specified.");const F=`${this.baseUrl}${_}`;return this._fetchData(F).catch(k=>{throw new Error(`Unable to load font data at: ${F}`)})}_fetchData(_){(0,o.unreachable)("Abstract method `_fetchData` called.")}}a.BaseStandardFontDataFactory=re;class R{constructor(){this.constructor===R&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(_,F,k=!1){if(_<=0||F<=0)throw new Error("Invalid SVG dimensions");const S=this._createSVG("svg:svg");return S.setAttribute("version","1.1"),k||(S.setAttribute("width",`${_}px`),S.setAttribute("height",`${F}px`)),S.setAttribute("preserveAspectRatio","none"),S.setAttribute("viewBox",`0 0 ${_} ${F}`),S}createElement(_){if(typeof _!="string")throw new Error("Invalid SVG element type");return this._createSVG(_)}_createSVG(_){(0,o.unreachable)("Abstract method `_createSVG` called.")}}a.BaseSVGFactory=R},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MurmurHash3_64=void 0;var o=m(1);const A=3285377520,D=4294901760,j=65535;class re{constructor(T){this.h1=T?T&4294967295:A,this.h2=T?T&4294967295:A}update(T){let _,F;if(typeof T=="string"){_=new Uint8Array(T.length*2),F=0;for(let r=0,e=T.length;r<e;r++){const t=T.charCodeAt(r);t<=255?_[F++]=t:(_[F++]=t>>>8,_[F++]=t&255)}}else if((0,o.isArrayBuffer)(T))_=T.slice(),F=_.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const k=F>>2,S=F-k*4,g=new Uint32Array(_.buffer,0,k);let b=0,u=0,h=this.h1,I=this.h2;const x=3432918353,E=461845907,s=x&j,c=E&j;for(let r=0;r<k;r++)r&1?(b=g[r],b=b*x&D|b*s&j,b=b<<15|b>>>17,b=b*E&D|b*c&j,h^=b,h=h<<13|h>>>19,h=h*5+3864292196):(u=g[r],u=u*x&D|u*s&j,u=u<<15|u>>>17,u=u*E&D|u*c&j,I^=u,I=I<<13|I>>>19,I=I*5+3864292196);switch(b=0,S){case 3:b^=_[k*4+2]<<16;case 2:b^=_[k*4+1]<<8;case 1:b^=_[k*4],b=b*x&D|b*s&j,b=b<<15|b>>>17,b=b*E&D|b*c&j,k&1?h^=b:I^=b}this.h1=h,this.h2=I}hexdigest(){let T=this.h1,_=this.h2;return T^=_>>>1,T=T*3981806797&D|T*36045&j,_=_*4283543511&D|((_<<16|T>>>16)*2950163797&D)>>>16,T^=_>>>1,T=T*444984403&D|T*60499&j,_=_*3301882366&D|((_<<16|T>>>16)*3120437893&D)>>>16,T^=_>>>1,(T>>>0).toString(16).padStart(8,"0")+(_>>>0).toString(16).padStart(8,"0")}}a.MurmurHash3_64=re},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FontLoader=a.FontFaceObject=void 0;var o=m(1),A=m(10);class D{constructor({ownerDocument:R=globalThis.document,styleElement:T=null}){this._document=R,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(R){this.nativeFontFaces.push(R),this._document.fonts.add(R)}insertRule(R){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const T=this.styleElement.sheet;T.insertRule(R,T.cssRules.length)}clear(){for(const R of this.nativeFontFaces)this._document.fonts.delete(R);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(R){if(R.attached||R.missingFile)return;if(R.attached=!0,this.isFontLoadingAPISupported){const _=R.createNativeFontFace();if(_){this.addNativeFontFace(_);try{await _.loaded}catch(F){throw(0,o.warn)(`Failed to load font '${_.family}': '${F}'.`),R.disableFontFace=!0,F}}return}const T=R.createFontFaceRule();if(T){if(this.insertRule(T),this.isSyncFontLoadingSupported)return;await new Promise(_=>{const F=this._queueLoadingCallback(_);this._prepareFontLoadEvent(R,F)})}}get isFontLoadingAPISupported(){var T;const R=!!((T=this._document)!=null&&T.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",R)}get isSyncFontLoadingSupported(){let R=!1;return(A.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(R=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",R)}_queueLoadingCallback(R){function T(){for((0,o.assert)(!F.done,"completeRequest() cannot be called twice."),F.done=!0;_.length>0&&_[0].done;){const k=_.shift();setTimeout(k.callback,0)}}const{loadingRequests:_}=this,F={done:!1,complete:T,callback:R};return _.push(F),F}get _loadTestFont(){const R=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",R)}_prepareFontLoadEvent(R,T){function _(i,f){return i.charCodeAt(f)<<24|i.charCodeAt(f+1)<<16|i.charCodeAt(f+2)<<8|i.charCodeAt(f+3)&255}function F(i,f,M,P){const B=i.substring(0,f),J=i.substring(f+M);return B+P+J}let k,S;const g=this._document.createElement("canvas");g.width=1,g.height=1;const b=g.getContext("2d");let u=0;function h(i,f){if(++u>30){(0,o.warn)("Load test font never loaded."),f();return}if(b.font="30px "+i,b.fillText(".",0,20),b.getImageData(0,0,1,1).data[3]>0){f();return}setTimeout(h.bind(null,i,f))}const I=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=F(x,976,I.length,I);const s=16,c=1482184792;let r=_(x,s);for(k=0,S=I.length-3;k<S;k+=4)r=r-c+_(I,k)|0;k<I.length&&(r=r-c+_(I+"XXX",k)|0),x=F(x,s,4,(0,o.string32)(r));const e=`url(data:font/opentype;base64,${btoa(x)});`,t=`@font-face {font-family:"${I}";src:${e}}`;this.insertRule(t);const n=this._document.createElement("div");n.style.visibility="hidden",n.style.width=n.style.height="10px",n.style.position="absolute",n.style.top=n.style.left="0px";for(const i of[R.loadedName,I]){const f=this._document.createElement("span");f.textContent="Hi",f.style.fontFamily=i,n.append(f)}this._document.body.append(n),h(I,()=>{n.remove(),T.complete()})}}a.FontLoader=D;class j{constructor(R,{isEvalSupported:T=!0,disableFontFace:_=!1,ignoreErrors:F=!1,inspectFont:k=null}){this.compiledGlyphs=Object.create(null);for(const S in R)this[S]=R[S];this.isEvalSupported=T!==!1,this.disableFontFace=_===!0,this.ignoreErrors=F===!0,this._inspectFont=k}createNativeFontFace(){var T;if(!this.data||this.disableFontFace)return null;let R;if(!this.cssFontInfo)R=new FontFace(this.loadedName,this.data,{});else{const _={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_.style=`oblique ${this.cssFontInfo.italicAngle}deg`),R=new FontFace(this.cssFontInfo.fontFamily,this.data,_)}return(T=this._inspectFont)==null||T.call(this,this),R}createFontFaceRule(){var F;if(!this.data||this.disableFontFace)return null;const R=(0,o.bytesToString)(this.data),T=`url(data:${this.mimetype};base64,${btoa(R)});`;let _;if(!this.cssFontInfo)_=`@font-face {font-family:"${this.loadedName}";src:${T}}`;else{let k=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(k+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),_=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${k}src:${T}}`}return(F=this._inspectFont)==null||F.call(this,this,T),_}getPathGenerator(R,T){if(this.compiledGlyphs[T]!==void 0)return this.compiledGlyphs[T];let _;try{_=R.get(this.loadedName+"_path_"+T)}catch(F){if(!this.ignoreErrors)throw F;return(0,o.warn)(`getPathGenerator - ignoring character: "${F}".`),this.compiledGlyphs[T]=function(k,S){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const F=[];for(const k of _){const S=k.args!==void 0?k.args.join(","):"";F.push("c.",k.cmd,"(",S,`);
`)}return this.compiledGlyphs[T]=new Function("c","size",F.join(""))}return this.compiledGlyphs[T]=function(F,k){for(const S of _)S.cmd==="scale"&&(S.args=[k,-k]),F[S.cmd].apply(F,S.args)}}}a.FontFaceObject=j},(l,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isNodeJS=void 0;const m=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");a.isNodeJS=m},(l,a,m)=>{var z,gt;Object.defineProperty(a,"__esModule",{value:!0}),a.CanvasGraphics=void 0;var o=m(1),A=m(6),D=m(12),j=m(13),re=m(10);const R=16,T=100,_=4096,F=15,k=10,S=1e3,g=16;function b(L,y){if(L._removeMirroring)throw new Error("Context is already forwarding operations.");L.__originalSave=L.save,L.__originalRestore=L.restore,L.__originalRotate=L.rotate,L.__originalScale=L.scale,L.__originalTranslate=L.translate,L.__originalTransform=L.transform,L.__originalSetTransform=L.setTransform,L.__originalResetTransform=L.resetTransform,L.__originalClip=L.clip,L.__originalMoveTo=L.moveTo,L.__originalLineTo=L.lineTo,L.__originalBezierCurveTo=L.bezierCurveTo,L.__originalRect=L.rect,L.__originalClosePath=L.closePath,L.__originalBeginPath=L.beginPath,L._removeMirroring=()=>{L.save=L.__originalSave,L.restore=L.__originalRestore,L.rotate=L.__originalRotate,L.scale=L.__originalScale,L.translate=L.__originalTranslate,L.transform=L.__originalTransform,L.setTransform=L.__originalSetTransform,L.resetTransform=L.__originalResetTransform,L.clip=L.__originalClip,L.moveTo=L.__originalMoveTo,L.lineTo=L.__originalLineTo,L.bezierCurveTo=L.__originalBezierCurveTo,L.rect=L.__originalRect,L.closePath=L.__originalClosePath,L.beginPath=L.__originalBeginPath,delete L._removeMirroring},L.save=function(){y.save(),this.__originalSave()},L.restore=function(){y.restore(),this.__originalRestore()},L.translate=function(w,X){y.translate(w,X),this.__originalTranslate(w,X)},L.scale=function(w,X){y.scale(w,X),this.__originalScale(w,X)},L.transform=function(w,X,W,Z,ee,ae){y.transform(w,X,W,Z,ee,ae),this.__originalTransform(w,X,W,Z,ee,ae)},L.setTransform=function(w,X,W,Z,ee,ae){y.setTransform(w,X,W,Z,ee,ae),this.__originalSetTransform(w,X,W,Z,ee,ae)},L.resetTransform=function(){y.resetTransform(),this.__originalResetTransform()},L.rotate=function(w){y.rotate(w),this.__originalRotate(w)},L.clip=function(w){y.clip(w),this.__originalClip(w)},L.moveTo=function(p,w){y.moveTo(p,w),this.__originalMoveTo(p,w)},L.lineTo=function(p,w){y.lineTo(p,w),this.__originalLineTo(p,w)},L.bezierCurveTo=function(p,w,X,W,Z,ee){y.bezierCurveTo(p,w,X,W,Z,ee),this.__originalBezierCurveTo(p,w,X,W,Z,ee)},L.rect=function(p,w,X,W){y.rect(p,w,X,W),this.__originalRect(p,w,X,W)},L.closePath=function(){y.closePath(),this.__originalClosePath()},L.beginPath=function(){y.beginPath(),this.__originalBeginPath()}}class u{constructor(y){this.canvasFactory=y,this.cache=Object.create(null)}getCanvas(y,p,w){let X;return this.cache[y]!==void 0?(X=this.cache[y],this.canvasFactory.reset(X,p,w)):(X=this.canvasFactory.create(p,w),this.cache[y]=X),X}delete(y){delete this.cache[y]}clear(){for(const y in this.cache){const p=this.cache[y];this.canvasFactory.destroy(p),delete this.cache[y]}}}function h(L,y,p,w,X,W,Z,ee,ae,ie){const[Y,q,d,v,C,N]=(0,A.getCurrentTransform)(L);if(q===0&&d===0){const ce=Z*Y+C,le=Math.round(ce),ue=ee*v+N,de=Math.round(ue),ye=(Z+ae)*Y+C,fe=Math.abs(Math.round(ye)-le)||1,_e=(ee+ie)*v+N,me=Math.abs(Math.round(_e)-de)||1;return L.setTransform(Math.sign(Y),0,0,Math.sign(v),le,de),L.drawImage(y,p,w,X,W,0,0,fe,me),L.setTransform(Y,q,d,v,C,N),[fe,me]}if(Y===0&&v===0){const ce=ee*d+C,le=Math.round(ce),ue=Z*q+N,de=Math.round(ue),ye=(ee+ie)*d+C,fe=Math.abs(Math.round(ye)-le)||1,_e=(Z+ae)*q+N,me=Math.abs(Math.round(_e)-de)||1;return L.setTransform(0,Math.sign(q),Math.sign(d),0,le,de),L.drawImage(y,p,w,X,W,0,0,me,fe),L.setTransform(Y,q,d,v,C,N),[me,fe]}L.drawImage(y,p,w,X,W,Z,ee,ae,ie);const $=Math.hypot(Y,q),Q=Math.hypot(d,v);return[$*ae,Q*ie]}function I(L){const{width:y,height:p}=L;if(y>S||p>S)return null;const w=1e3,X=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),W=y+1;let Z=new Uint8Array(W*(p+1)),ee,ae,ie;const Y=y+7&-8;let q=new Uint8Array(Y*p),d=0;for(const Q of L.data){let ce=128;for(;ce>0;)q[d++]=Q&ce?0:255,ce>>=1}let v=0;for(d=0,q[d]!==0&&(Z[0]=1,++v),ae=1;ae<y;ae++)q[d]!==q[d+1]&&(Z[ae]=q[d]?2:1,++v),d++;for(q[d]!==0&&(Z[ae]=2,++v),ee=1;ee<p;ee++){d=ee*Y,ie=ee*W,q[d-Y]!==q[d]&&(Z[ie]=q[d]?1:8,++v);let Q=(q[d]?4:0)+(q[d-Y]?8:0);for(ae=1;ae<y;ae++)Q=(Q>>2)+(q[d+1]?4:0)+(q[d-Y+1]?8:0),X[Q]&&(Z[ie+ae]=X[Q],++v),d++;if(q[d-Y]!==q[d]&&(Z[ie+ae]=q[d]?2:4,++v),v>w)return null}for(d=Y*(p-1),ie=ee*W,q[d]!==0&&(Z[ie]=8,++v),ae=1;ae<y;ae++)q[d]!==q[d+1]&&(Z[ie+ae]=q[d]?4:8,++v),d++;if(q[d]!==0&&(Z[ie+ae]=4,++v),v>w)return null;const C=new Int32Array([0,W,-1,0,-W,0,0,0,1]),N=new Path2D;for(ee=0;v&&ee<=p;ee++){let Q=ee*W;const ce=Q+y;for(;Q<ce&&!Z[Q];)Q++;if(Q===ce)continue;N.moveTo(Q%W,ee);const le=Q;let ue=Z[Q];do{const de=C[ue];do Q+=de;while(!Z[Q]);const ye=Z[Q];ye!==5&&ye!==10?(ue=ye,Z[Q]=0):(ue=ye&51*ue>>4,Z[Q]&=ue>>2|ue<<2),N.lineTo(Q%W,Q/W|0),Z[Q]||--v}while(le!==Q);--ee}return q=null,Z=null,function(Q){Q.save(),Q.scale(1/y,-1/p),Q.translate(0,-p),Q.fill(N),Q.beginPath(),Q.restore()}}class x{constructor(y,p){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,y,p])}clone(){const y=Object.create(this);return y.clipBox=this.clipBox.slice(),y}setCurrentPoint(y,p){this.x=y,this.y=p}updatePathMinMax(y,p,w){[p,w]=o.Util.applyTransform([p,w],y),this.minX=Math.min(this.minX,p),this.minY=Math.min(this.minY,w),this.maxX=Math.max(this.maxX,p),this.maxY=Math.max(this.maxY,w)}updateRectMinMax(y,p){const w=o.Util.applyTransform(p,y),X=o.Util.applyTransform(p.slice(2),y);this.minX=Math.min(this.minX,w[0],X[0]),this.minY=Math.min(this.minY,w[1],X[1]),this.maxX=Math.max(this.maxX,w[0],X[0]),this.maxY=Math.max(this.maxY,w[1],X[1])}updateScalingPathMinMax(y,p){o.Util.scaleMinMax(y,p),this.minX=Math.min(this.minX,p[0]),this.maxX=Math.max(this.maxX,p[1]),this.minY=Math.min(this.minY,p[2]),this.maxY=Math.max(this.maxY,p[3])}updateCurvePathMinMax(y,p,w,X,W,Z,ee,ae,ie,Y){const q=o.Util.bezierBoundingBox(p,w,X,W,Z,ee,ae,ie);if(Y){Y[0]=Math.min(Y[0],q[0],q[2]),Y[1]=Math.max(Y[1],q[0],q[2]),Y[2]=Math.min(Y[2],q[1],q[3]),Y[3]=Math.max(Y[3],q[1],q[3]);return}this.updateRectMinMax(y,q)}getPathBoundingBox(y=D.PathType.FILL,p=null){const w=[this.minX,this.minY,this.maxX,this.maxY];if(y===D.PathType.STROKE){p||(0,o.unreachable)("Stroke bounding box must include transform.");const X=o.Util.singularValueDecompose2dScale(p),W=X[0]*this.lineWidth/2,Z=X[1]*this.lineWidth/2;w[0]-=W,w[1]-=Z,w[2]+=W,w[3]+=Z}return w}updateClipFromPath(){const y=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(y||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(y){this.clipBox=y,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(y=D.PathType.FILL,p=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(y,p))}}function E(L,y){if(typeof ImageData<"u"&&y instanceof ImageData){L.putImageData(y,0,0);return}const p=y.height,w=y.width,X=p%g,W=(p-X)/g,Z=X===0?W:W+1,ee=L.createImageData(w,g);let ae=0,ie;const Y=y.data,q=ee.data;let d,v,C,N;if(y.kind===o.ImageKind.GRAYSCALE_1BPP){const $=Y.byteLength,Q=new Uint32Array(q.buffer,0,q.byteLength>>2),ce=Q.length,le=w+7>>3,ue=4294967295,de=o.FeatureTest.isLittleEndian?4278190080:255;for(d=0;d<Z;d++){for(C=d<W?g:X,ie=0,v=0;v<C;v++){const ye=$-ae;let fe=0;const _e=ye>le?w:ye*8-7,me=_e&-8;let Se=0,be=0;for(;fe<me;fe+=8)be=Y[ae++],Q[ie++]=be&128?ue:de,Q[ie++]=be&64?ue:de,Q[ie++]=be&32?ue:de,Q[ie++]=be&16?ue:de,Q[ie++]=be&8?ue:de,Q[ie++]=be&4?ue:de,Q[ie++]=be&2?ue:de,Q[ie++]=be&1?ue:de;for(;fe<_e;fe++)Se===0&&(be=Y[ae++],Se=128),Q[ie++]=be&Se?ue:de,Se>>=1}for(;ie<ce;)Q[ie++]=0;L.putImageData(ee,0,d*g)}}else if(y.kind===o.ImageKind.RGBA_32BPP){for(v=0,N=w*g*4,d=0;d<W;d++)q.set(Y.subarray(ae,ae+N)),ae+=N,L.putImageData(ee,0,v),v+=g;d<Z&&(N=w*X*4,q.set(Y.subarray(ae,ae+N)),L.putImageData(ee,0,v))}else if(y.kind===o.ImageKind.RGB_24BPP)for(C=g,N=w*C,d=0;d<Z;d++){for(d>=W&&(C=X,N=w*C),ie=0,v=N;v--;)q[ie++]=Y[ae++],q[ie++]=Y[ae++],q[ie++]=Y[ae++],q[ie++]=255;L.putImageData(ee,0,d*g)}else throw new Error(`bad image kind: ${y.kind}`)}function s(L,y){if(y.bitmap){L.drawImage(y.bitmap,0,0);return}const p=y.height,w=y.width,X=p%g,W=(p-X)/g,Z=X===0?W:W+1,ee=L.createImageData(w,g);let ae=0;const ie=y.data,Y=ee.data;for(let q=0;q<Z;q++){const d=q<W?g:X;({srcPos:ae}=(0,j.convertBlackAndWhiteToRGBA)({src:ie,srcPos:ae,dest:Y,width:w,height:d,nonBlackColor:0})),L.putImageData(ee,0,q*g)}}function c(L,y){const p=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const w of p)L[w]!==void 0&&(y[w]=L[w]);L.setLineDash!==void 0&&(y.setLineDash(L.getLineDash()),y.lineDashOffset=L.lineDashOffset)}function r(L){L.strokeStyle=L.fillStyle="#000000",L.fillRule="nonzero",L.globalAlpha=1,L.lineWidth=1,L.lineCap="butt",L.lineJoin="miter",L.miterLimit=10,L.globalCompositeOperation="source-over",L.font="10px sans-serif",L.setLineDash!==void 0&&(L.setLineDash([]),L.lineDashOffset=0),re.isNodeJS||(L.filter="none")}function e(L,y,p,w){const X=L.length;for(let W=3;W<X;W+=4){const Z=L[W];if(Z===0)L[W-3]=y,L[W-2]=p,L[W-1]=w;else if(Z<255){const ee=255-Z;L[W-3]=L[W-3]*Z+y*ee>>8,L[W-2]=L[W-2]*Z+p*ee>>8,L[W-1]=L[W-1]*Z+w*ee>>8}}}function t(L,y,p){const w=L.length,X=1/255;for(let W=3;W<w;W+=4){const Z=p?p[L[W]]:L[W];y[W]=y[W]*Z*X|0}}function n(L,y,p){const w=L.length;for(let X=3;X<w;X+=4){const W=L[X-3]*77+L[X-2]*152+L[X-1]*28;y[X]=p?y[X]*p[W>>8]>>8:y[X]*W>>16}}function i(L,y,p,w,X,W,Z,ee,ae,ie,Y){const q=!!W,d=q?W[0]:0,v=q?W[1]:0,C=q?W[2]:0;let N;X==="Luminosity"?N=n:N=t;const Q=Math.min(w,Math.ceil(1048576/p));for(let ce=0;ce<w;ce+=Q){const le=Math.min(Q,w-ce),ue=L.getImageData(ee-ie,ce+(ae-Y),p,le),de=y.getImageData(ee,ce+ae,p,le);q&&e(ue.data,d,v,C),N(ue.data,de.data,Z),y.putImageData(de,ee,ce+ae)}}function f(L,y,p,w){const X=w[0],W=w[1],Z=w[2]-X,ee=w[3]-W;Z===0||ee===0||(i(y.context,p,Z,ee,y.subtype,y.backdrop,y.transferMap,X,W,y.offsetX,y.offsetY),L.save(),L.globalAlpha=1,L.globalCompositeOperation="source-over",L.setTransform(1,0,0,1,0,0),L.drawImage(p.canvas,0,0),L.restore())}function M(L,y){const p=o.Util.singularValueDecompose2dScale(L);p[0]=Math.fround(p[0]),p[1]=Math.fround(p[1]);const w=Math.fround((globalThis.devicePixelRatio||1)*A.PixelsPerInch.PDF_TO_CSS_UNITS);return y!==void 0?y:p[0]<=w||p[1]<=w}const P=["butt","round","square"],B=["miter","round","bevel"],J={},H={},V=class{constructor(y,p,w,X,W,{optionalContentConfig:Z,markedContentStack:ee=null},ae){oe(this,z);this.ctx=y,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=p,this.objs=w,this.canvasFactory=X,this.filterFactory=W,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=ee||[],this.optionalContentConfig=Z,this.cachedCanvases=new u(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ae,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(y,p=null){return typeof y=="string"?y.startsWith("g_")?this.commonObjs.get(y):this.objs.get(y):p}beginDrawing({transform:y,viewport:p,transparency:w=!1,background:X=null}){const W=this.ctx.canvas.width,Z=this.ctx.canvas.height,ee=this.ctx.fillStyle;if(this.ctx.fillStyle=X||"#ffffff",this.ctx.fillRect(0,0,W,Z),this.ctx.fillStyle=ee,w){const ae=this.cachedCanvases.getCanvas("transparent",W,Z);this.compositeCtx=this.ctx,this.transparentCanvas=ae.canvas,this.ctx=ae.context,this.ctx.save(),this.ctx.transform(...(0,A.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),r(this.ctx),y&&(this.ctx.transform(...y),this.outputScaleX=y[0],this.outputScaleY=y[0]),this.ctx.transform(...p.transform),this.viewportScale=p.scale,this.baseTransform=(0,A.getCurrentTransform)(this.ctx)}executeOperatorList(y,p,w,X){const W=y.argsArray,Z=y.fnArray;let ee=p||0;const ae=W.length;if(ae===ee)return ee;const ie=ae-ee>k&&typeof w=="function",Y=ie?Date.now()+F:0;let q=0;const d=this.commonObjs,v=this.objs;let C;for(;;){if(X!==void 0&&ee===X.nextBreakPoint)return X.breakIt(ee,w),ee;if(C=Z[ee],C!==o.OPS.dependency)this[C].apply(this,W[ee]);else for(const N of W[ee]){const $=N.startsWith("g_")?d:v;if(!$.has(N))return $.get(N,w),ee}if(ee++,ee===ae)return ee;if(ie&&++q>k){if(Date.now()>Y)return w(),ee;q=0}}}endDrawing(y=null){he(this,z,gt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const p of this._cachedBitmapsMap.values()){for(const w of p.values())typeof HTMLCanvasElement<"u"&&w instanceof HTMLCanvasElement&&(w.width=w.height=0);p.clear()}if(this._cachedBitmapsMap.clear(),y){const p=this.filterFactory.addHCMFilter(y.foreground,y.background);if(p!=="none"){const w=this.ctx.filter;this.ctx.filter=p,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=w}}}_scaleImage(y,p){const w=y.width,X=y.height;let W=Math.max(Math.hypot(p[0],p[1]),1),Z=Math.max(Math.hypot(p[2],p[3]),1),ee=w,ae=X,ie="prescale1",Y,q;for(;W>2&&ee>1||Z>2&&ae>1;){let d=ee,v=ae;W>2&&ee>1&&(d=ee>=16384?Math.floor(ee/2)-1||1:Math.ceil(ee/2),W/=ee/d),Z>2&&ae>1&&(v=ae>=16384?Math.floor(ae/2)-1||1:Math.ceil(ae)/2,Z/=ae/v),Y=this.cachedCanvases.getCanvas(ie,d,v),q=Y.context,q.clearRect(0,0,d,v),q.drawImage(y,0,0,ee,ae,0,0,d,v),y=Y.canvas,ee=d,ae=v,ie=ie==="prescale1"?"prescale2":"prescale1"}return{img:y,paintWidth:ee,paintHeight:ae}}_createMaskCanvas(y){const p=this.ctx,{width:w,height:X}=y,W=this.current.fillColor,Z=this.current.patternFill,ee=(0,A.getCurrentTransform)(p);let ae,ie,Y,q;if((y.bitmap||y.data)&&y.count>1){const fe=y.bitmap||y.data.buffer;ie=JSON.stringify(Z?ee:[ee.slice(0,4),W]),ae=this._cachedBitmapsMap.get(fe),ae||(ae=new Map,this._cachedBitmapsMap.set(fe,ae));const _e=ae.get(ie);if(_e&&!Z){const me=Math.round(Math.min(ee[0],ee[2])+ee[4]),Se=Math.round(Math.min(ee[1],ee[3])+ee[5]);return{canvas:_e,offsetX:me,offsetY:Se}}Y=_e}Y||(q=this.cachedCanvases.getCanvas("maskCanvas",w,X),s(q.context,y));let d=o.Util.transform(ee,[1/w,0,0,-1/X,0,0]);d=o.Util.transform(d,[1,0,0,1,0,-X]);const v=o.Util.applyTransform([0,0],d),C=o.Util.applyTransform([w,X],d),N=o.Util.normalizeRect([v[0],v[1],C[0],C[1]]),$=Math.round(N[2]-N[0])||1,Q=Math.round(N[3]-N[1])||1,ce=this.cachedCanvases.getCanvas("fillCanvas",$,Q),le=ce.context,ue=Math.min(v[0],C[0]),de=Math.min(v[1],C[1]);le.translate(-ue,-de),le.transform(...d),Y||(Y=this._scaleImage(q.canvas,(0,A.getCurrentTransformInverse)(le)),Y=Y.img,ae&&Z&&ae.set(ie,Y)),le.imageSmoothingEnabled=M((0,A.getCurrentTransform)(le),y.interpolate),h(le,Y,0,0,Y.width,Y.height,0,0,w,X),le.globalCompositeOperation="source-in";const ye=o.Util.transform((0,A.getCurrentTransformInverse)(le),[1,0,0,1,-ue,-de]);return le.fillStyle=Z?W.getPattern(p,this,ye,D.PathType.FILL):W,le.fillRect(0,0,w,X),ae&&!Z&&(this.cachedCanvases.delete("fillCanvas"),ae.set(ie,ce.canvas)),{canvas:ce.canvas,offsetX:Math.round(ue),offsetY:Math.round(de)}}setLineWidth(y){y!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=y,this.ctx.lineWidth=y}setLineCap(y){this.ctx.lineCap=P[y]}setLineJoin(y){this.ctx.lineJoin=B[y]}setMiterLimit(y){this.ctx.miterLimit=y}setDash(y,p){const w=this.ctx;w.setLineDash!==void 0&&(w.setLineDash(y),w.lineDashOffset=p)}setRenderingIntent(y){}setFlatness(y){}setGState(y){for(const[p,w]of y)switch(p){case"LW":this.setLineWidth(w);break;case"LC":this.setLineCap(w);break;case"LJ":this.setLineJoin(w);break;case"ML":this.setMiterLimit(w);break;case"D":this.setDash(w[0],w[1]);break;case"RI":this.setRenderingIntent(w);break;case"FL":this.setFlatness(w);break;case"Font":this.setFont(w[0],w[1]);break;case"CA":this.current.strokeAlpha=w;break;case"ca":this.current.fillAlpha=w,this.ctx.globalAlpha=w;break;case"BM":this.ctx.globalCompositeOperation=w;break;case"SMask":this.current.activeSMask=w?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(w);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const y=this.inSMaskMode;this.current.activeSMask&&!y?this.beginSMaskMode():!this.current.activeSMask&&y&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const y=this.ctx.canvas.width,p=this.ctx.canvas.height,w="smaskGroupAt"+this.groupLevel,X=this.cachedCanvases.getCanvas(w,y,p);this.suspendedCtx=this.ctx,this.ctx=X.context;const W=this.ctx;W.setTransform(...(0,A.getCurrentTransform)(this.suspendedCtx)),c(this.suspendedCtx,W),b(W,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),c(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(y){if(!this.current.activeSMask)return;y?(y[0]=Math.floor(y[0]),y[1]=Math.floor(y[1]),y[2]=Math.ceil(y[2]),y[3]=Math.ceil(y[3])):y=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const p=this.current.activeSMask,w=this.suspendedCtx;f(w,p,this.ctx,y),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(c(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const y=this.current;this.stateStack.push(y),this.current=y.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),c(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(y,p,w,X,W,Z){this.ctx.transform(y,p,w,X,W,Z),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(y,p,w){const X=this.ctx,W=this.current;let Z=W.x,ee=W.y,ae,ie;const Y=(0,A.getCurrentTransform)(X),q=Y[0]===0&&Y[3]===0||Y[1]===0&&Y[2]===0,d=q?w.slice(0):null;for(let v=0,C=0,N=y.length;v<N;v++)switch(y[v]|0){case o.OPS.rectangle:Z=p[C++],ee=p[C++];const $=p[C++],Q=p[C++],ce=Z+$,le=ee+Q;X.moveTo(Z,ee),$===0||Q===0?X.lineTo(ce,le):(X.lineTo(ce,ee),X.lineTo(ce,le),X.lineTo(Z,le)),q||W.updateRectMinMax(Y,[Z,ee,ce,le]),X.closePath();break;case o.OPS.moveTo:Z=p[C++],ee=p[C++],X.moveTo(Z,ee),q||W.updatePathMinMax(Y,Z,ee);break;case o.OPS.lineTo:Z=p[C++],ee=p[C++],X.lineTo(Z,ee),q||W.updatePathMinMax(Y,Z,ee);break;case o.OPS.curveTo:ae=Z,ie=ee,Z=p[C+4],ee=p[C+5],X.bezierCurveTo(p[C],p[C+1],p[C+2],p[C+3],Z,ee),W.updateCurvePathMinMax(Y,ae,ie,p[C],p[C+1],p[C+2],p[C+3],Z,ee,d),C+=6;break;case o.OPS.curveTo2:ae=Z,ie=ee,X.bezierCurveTo(Z,ee,p[C],p[C+1],p[C+2],p[C+3]),W.updateCurvePathMinMax(Y,ae,ie,Z,ee,p[C],p[C+1],p[C+2],p[C+3],d),Z=p[C+2],ee=p[C+3],C+=4;break;case o.OPS.curveTo3:ae=Z,ie=ee,Z=p[C+2],ee=p[C+3],X.bezierCurveTo(p[C],p[C+1],Z,ee,Z,ee),W.updateCurvePathMinMax(Y,ae,ie,p[C],p[C+1],Z,ee,Z,ee,d),C+=4;break;case o.OPS.closePath:X.closePath();break}q&&W.updateScalingPathMinMax(Y,d),W.setCurrentPoint(Z,ee)}closePath(){this.ctx.closePath()}stroke(y=!0){const p=this.ctx,w=this.current.strokeColor;p.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof w=="object"&&(w!=null&&w.getPattern)?(p.save(),p.strokeStyle=w.getPattern(p,this,(0,A.getCurrentTransformInverse)(p),D.PathType.STROKE),this.rescaleAndStroke(!1),p.restore()):this.rescaleAndStroke(!0)),y&&this.consumePath(this.current.getClippedPathBoundingBox()),p.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(y=!0){const p=this.ctx,w=this.current.fillColor,X=this.current.patternFill;let W=!1;X&&(p.save(),p.fillStyle=w.getPattern(p,this,(0,A.getCurrentTransformInverse)(p),D.PathType.FILL),W=!0);const Z=this.current.getClippedPathBoundingBox();this.contentVisible&&Z!==null&&(this.pendingEOFill?(p.fill("evenodd"),this.pendingEOFill=!1):p.fill()),W&&p.restore(),y&&this.consumePath(Z)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=J}eoClip(){this.pendingClip=H}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const y=this.pendingTextPaths,p=this.ctx;if(y===void 0){p.beginPath();return}p.save(),p.beginPath();for(const w of y)p.setTransform(...w.transform),p.translate(w.x,w.y),w.addToPath(p,w.fontSize);p.restore(),p.clip(),p.beginPath(),delete this.pendingTextPaths}setCharSpacing(y){this.current.charSpacing=y}setWordSpacing(y){this.current.wordSpacing=y}setHScale(y){this.current.textHScale=y/100}setLeading(y){this.current.leading=-y}setFont(y,p){const w=this.commonObjs.get(y),X=this.current;if(!w)throw new Error(`Can't find font for ${y}`);if(X.fontMatrix=w.fontMatrix||o.FONT_IDENTITY_MATRIX,(X.fontMatrix[0]===0||X.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+y),p<0?(p=-p,X.fontDirection=-1):X.fontDirection=1,this.current.font=w,this.current.fontSize=p,w.isType3Font)return;const W=w.loadedName||"sans-serif";let Z="normal";w.black?Z="900":w.bold&&(Z="bold");const ee=w.italic?"italic":"normal",ae=`"${W}", ${w.fallbackName}`;let ie=p;p<R?ie=R:p>T&&(ie=T),this.current.fontSizeScale=p/ie,this.ctx.font=`${ee} ${Z} ${ie}px ${ae}`}setTextRenderingMode(y){this.current.textRenderingMode=y}setTextRise(y){this.current.textRise=y}moveText(y,p){this.current.x=this.current.lineX+=y,this.current.y=this.current.lineY+=p}setLeadingMoveText(y,p){this.setLeading(-p),this.moveText(y,p)}setTextMatrix(y,p,w,X,W,Z){this.current.textMatrix=[y,p,w,X,W,Z],this.current.textMatrixScale=Math.hypot(y,p),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(y,p,w,X){const W=this.ctx,Z=this.current,ee=Z.font,ae=Z.textRenderingMode,ie=Z.fontSize/Z.fontSizeScale,Y=ae&o.TextRenderingMode.FILL_STROKE_MASK,q=!!(ae&o.TextRenderingMode.ADD_TO_PATH_FLAG),d=Z.patternFill&&!ee.missingFile;let v;(ee.disableFontFace||q||d)&&(v=ee.getPathGenerator(this.commonObjs,y)),ee.disableFontFace||d?(W.save(),W.translate(p,w),W.beginPath(),v(W,ie),X&&W.setTransform(...X),(Y===o.TextRenderingMode.FILL||Y===o.TextRenderingMode.FILL_STROKE)&&W.fill(),(Y===o.TextRenderingMode.STROKE||Y===o.TextRenderingMode.FILL_STROKE)&&W.stroke(),W.restore()):((Y===o.TextRenderingMode.FILL||Y===o.TextRenderingMode.FILL_STROKE)&&W.fillText(y,p,w),(Y===o.TextRenderingMode.STROKE||Y===o.TextRenderingMode.FILL_STROKE)&&W.strokeText(y,p,w)),q&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,A.getCurrentTransform)(W),x:p,y:w,fontSize:ie,addToPath:v})}get isFontSubpixelAAEnabled(){const{context:y}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);y.scale(1.5,1),y.fillText("I",0,10);const p=y.getImageData(0,0,10,10).data;let w=!1;for(let X=3;X<p.length;X+=4)if(p[X]>0&&p[X]<255){w=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",w)}showText(y){const p=this.current,w=p.font;if(w.isType3Font)return this.showType3Text(y);const X=p.fontSize;if(X===0)return;const W=this.ctx,Z=p.fontSizeScale,ee=p.charSpacing,ae=p.wordSpacing,ie=p.fontDirection,Y=p.textHScale*ie,q=y.length,d=w.vertical,v=d?1:-1,C=w.defaultVMetrics,N=X*p.fontMatrix[0],$=p.textRenderingMode===o.TextRenderingMode.FILL&&!w.disableFontFace&&!p.patternFill;W.save(),W.transform(...p.textMatrix),W.translate(p.x,p.y+p.textRise),ie>0?W.scale(Y,-1):W.scale(Y,1);let Q;if(p.patternFill){W.save();const ye=p.fillColor.getPattern(W,this,(0,A.getCurrentTransformInverse)(W),D.PathType.FILL);Q=(0,A.getCurrentTransform)(W),W.restore(),W.fillStyle=ye}let ce=p.lineWidth;const le=p.textMatrixScale;if(le===0||ce===0){const ye=p.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(ye===o.TextRenderingMode.STROKE||ye===o.TextRenderingMode.FILL_STROKE)&&(ce=this.getSinglePixelWidth())}else ce/=le;if(Z!==1&&(W.scale(Z,Z),ce/=Z),W.lineWidth=ce,w.isInvalidPDFjsFont){const ye=[];let fe=0;for(const _e of y)ye.push(_e.unicode),fe+=_e.width;W.fillText(ye.join(""),0,0),p.x+=fe*N*Y,W.restore(),this.compose();return}let ue=0,de;for(de=0;de<q;++de){const ye=y[de];if(typeof ye=="number"){ue+=v*ye*X/1e3;continue}let fe=!1;const _e=(ye.isSpace?ae:0)+ee,me=ye.fontChar,Se=ye.accent;let be,we,G=ye.width;if(d){const ne=ye.vmetric||C,ve=-(ye.vmetric?ne[1]:G*.5)*N,Ee=ne[2]*N;G=ne?-ne[0]:G,be=ve/Z,we=(ue+Ee)/Z}else be=ue/Z,we=0;if(w.remeasure&&G>0){const ne=W.measureText(me).width*1e3/X*Z;if(G<ne&&this.isFontSubpixelAAEnabled){const ve=G/ne;fe=!0,W.save(),W.scale(ve,1),be/=ve}else G!==ne&&(be+=(G-ne)/2e3*X/Z)}if(this.contentVisible&&(ye.isInFont||w.missingFile)){if($&&!Se)W.fillText(me,be,we);else if(this.paintChar(me,be,we,Q),Se){const ne=be+X*Se.offset.x/Z,ve=we-X*Se.offset.y/Z;this.paintChar(Se.fontChar,ne,ve,Q)}}let te;d?te=G*N-_e*ie:te=G*N+_e*ie,ue+=te,fe&&W.restore()}d?p.y-=ue:p.x+=ue*Y,W.restore(),this.compose()}showType3Text(y){const p=this.ctx,w=this.current,X=w.font,W=w.fontSize,Z=w.fontDirection,ee=X.vertical?1:-1,ae=w.charSpacing,ie=w.wordSpacing,Y=w.textHScale*Z,q=w.fontMatrix||o.FONT_IDENTITY_MATRIX,d=y.length,v=w.textRenderingMode===o.TextRenderingMode.INVISIBLE;let C,N,$,Q;if(!(v||W===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,p.save(),p.transform(...w.textMatrix),p.translate(w.x,w.y),p.scale(Y,Z),C=0;C<d;++C){if(N=y[C],typeof N=="number"){Q=ee*N*W/1e3,this.ctx.translate(Q,0),w.x+=Q*Y;continue}const ce=(N.isSpace?ie:0)+ae,le=X.charProcOperatorList[N.operatorListId];if(!le){(0,o.warn)(`Type3 character "${N.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=N,this.save(),p.scale(W,W),p.transform(...q),this.executeOperatorList(le),this.restore()),$=o.Util.applyTransform([N.width,0],q)[0]*W+ce,p.translate($,0),w.x+=$*Y}p.restore(),this.processingType3=null}}setCharWidth(y,p){}setCharWidthAndBounds(y,p,w,X,W,Z){this.ctx.rect(w,X,W-w,Z-X),this.ctx.clip(),this.endPath()}getColorN_Pattern(y){let p;if(y[0]==="TilingPattern"){const w=y[1],X=this.baseTransform||(0,A.getCurrentTransform)(this.ctx),W={createCanvasGraphics:Z=>new V(Z,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};p=new D.TilingPattern(y,w,this.ctx,W,X)}else p=this._getPattern(y[1],y[2]);return p}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(y,p,w){const X=o.Util.makeHexColor(y,p,w);this.ctx.strokeStyle=X,this.current.strokeColor=X}setFillRGBColor(y,p,w){const X=o.Util.makeHexColor(y,p,w);this.ctx.fillStyle=X,this.current.fillColor=X,this.current.patternFill=!1}_getPattern(y,p=null){let w;return this.cachedPatterns.has(y)?w=this.cachedPatterns.get(y):(w=(0,D.getShadingPattern)(this.getObject(y)),this.cachedPatterns.set(y,w)),p&&(w.matrix=p),w}shadingFill(y){if(!this.contentVisible)return;const p=this.ctx;this.save();const w=this._getPattern(y);p.fillStyle=w.getPattern(p,this,(0,A.getCurrentTransformInverse)(p),D.PathType.SHADING);const X=(0,A.getCurrentTransformInverse)(p);if(X){const W=p.canvas,Z=W.width,ee=W.height,ae=o.Util.applyTransform([0,0],X),ie=o.Util.applyTransform([0,ee],X),Y=o.Util.applyTransform([Z,0],X),q=o.Util.applyTransform([Z,ee],X),d=Math.min(ae[0],ie[0],Y[0],q[0]),v=Math.min(ae[1],ie[1],Y[1],q[1]),C=Math.max(ae[0],ie[0],Y[0],q[0]),N=Math.max(ae[1],ie[1],Y[1],q[1]);this.ctx.fillRect(d,v,C-d,N-v)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(y,p){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(y)&&y.length===6&&this.transform(...y),this.baseTransform=(0,A.getCurrentTransform)(this.ctx),p)){const w=p[2]-p[0],X=p[3]-p[1];this.ctx.rect(p[0],p[1],w,X),this.current.updateRectMinMax((0,A.getCurrentTransform)(this.ctx),p),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(y){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const p=this.ctx;y.isolated||(0,o.info)("TODO: Support non-isolated groups."),y.knockout&&(0,o.warn)("Knockout groups not supported.");const w=(0,A.getCurrentTransform)(p);if(y.matrix&&p.transform(...y.matrix),!y.bbox)throw new Error("Bounding box is required.");let X=o.Util.getAxialAlignedBoundingBox(y.bbox,(0,A.getCurrentTransform)(p));const W=[0,0,p.canvas.width,p.canvas.height];X=o.Util.intersect(X,W)||[0,0,0,0];const Z=Math.floor(X[0]),ee=Math.floor(X[1]);let ae=Math.max(Math.ceil(X[2])-Z,1),ie=Math.max(Math.ceil(X[3])-ee,1),Y=1,q=1;ae>_&&(Y=ae/_,ae=_),ie>_&&(q=ie/_,ie=_),this.current.startNewPathAndClipBox([0,0,ae,ie]);let d="groupAt"+this.groupLevel;y.smask&&(d+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(d,ae,ie),C=v.context;C.scale(1/Y,1/q),C.translate(-Z,-ee),C.transform(...w),y.smask?this.smaskStack.push({canvas:v.canvas,context:C,offsetX:Z,offsetY:ee,scaleX:Y,scaleY:q,subtype:y.smask.subtype,backdrop:y.smask.backdrop,transferMap:y.smask.transferMap||null,startTransformInverse:null}):(p.setTransform(1,0,0,1,0,0),p.translate(Z,ee),p.scale(Y,q),p.save()),c(p,C),this.ctx=C,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(p),this.groupLevel++}endGroup(y){if(!this.contentVisible)return;this.groupLevel--;const p=this.ctx,w=this.groupStack.pop();if(this.ctx=w,this.ctx.imageSmoothingEnabled=!1,y.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const X=(0,A.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...X);const W=o.Util.getAxialAlignedBoundingBox([0,0,p.canvas.width,p.canvas.height],X);this.ctx.drawImage(p.canvas,0,0),this.ctx.restore(),this.compose(W)}}beginAnnotation(y,p,w,X,W){if(he(this,z,gt).call(this),r(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(p)&&p.length===4){const Z=p[2]-p[0],ee=p[3]-p[1];if(W&&this.annotationCanvasMap){w=w.slice(),w[4]-=p[0],w[5]-=p[1],p=p.slice(),p[0]=p[1]=0,p[2]=Z,p[3]=ee;const[ae,ie]=o.Util.singularValueDecompose2dScale((0,A.getCurrentTransform)(this.ctx)),{viewportScale:Y}=this,q=Math.ceil(Z*this.outputScaleX*Y),d=Math.ceil(ee*this.outputScaleY*Y);this.annotationCanvas=this.canvasFactory.create(q,d);const{canvas:v,context:C}=this.annotationCanvas;this.annotationCanvasMap.set(y,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=C,this.ctx.setTransform(ae,0,0,-ie,0,ee*ie),r(this.ctx)}else r(this.ctx),this.ctx.rect(p[0],p[1],Z,ee),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...w),this.transform(...X)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(y){if(!this.contentVisible)return;const p=y.count;y=this.getObject(y.data,y),y.count=p;const w=this.ctx,X=this.processingType3;if(X&&(X.compiled===void 0&&(X.compiled=I(y)),X.compiled)){X.compiled(w);return}const W=this._createMaskCanvas(y),Z=W.canvas;w.save(),w.setTransform(1,0,0,1,0,0),w.drawImage(Z,W.offsetX,W.offsetY),w.restore(),this.compose()}paintImageMaskXObjectRepeat(y,p,w=0,X=0,W,Z){if(!this.contentVisible)return;y=this.getObject(y.data,y);const ee=this.ctx;ee.save();const ae=(0,A.getCurrentTransform)(ee);ee.transform(p,w,X,W,0,0);const ie=this._createMaskCanvas(y);ee.setTransform(1,0,0,1,ie.offsetX-ae[4],ie.offsetY-ae[5]);for(let Y=0,q=Z.length;Y<q;Y+=2){const d=o.Util.transform(ae,[p,w,X,W,Z[Y],Z[Y+1]]),[v,C]=o.Util.applyTransform([0,0],d);ee.drawImage(ie.canvas,v,C)}ee.restore(),this.compose()}paintImageMaskXObjectGroup(y){if(!this.contentVisible)return;const p=this.ctx,w=this.current.fillColor,X=this.current.patternFill;for(const W of y){const{data:Z,width:ee,height:ae,transform:ie}=W,Y=this.cachedCanvases.getCanvas("maskCanvas",ee,ae),q=Y.context;q.save();const d=this.getObject(Z,W);s(q,d),q.globalCompositeOperation="source-in",q.fillStyle=X?w.getPattern(q,this,(0,A.getCurrentTransformInverse)(p),D.PathType.FILL):w,q.fillRect(0,0,ee,ae),q.restore(),p.save(),p.transform(...ie),p.scale(1,-1),h(p,Y.canvas,0,0,ee,ae,0,-1,1,1),p.restore()}this.compose()}paintImageXObject(y){if(!this.contentVisible)return;const p=this.getObject(y);if(!p){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(p)}paintImageXObjectRepeat(y,p,w,X){if(!this.contentVisible)return;const W=this.getObject(y);if(!W){(0,o.warn)("Dependent image isn't ready yet");return}const Z=W.width,ee=W.height,ae=[];for(let ie=0,Y=X.length;ie<Y;ie+=2)ae.push({transform:[p,0,0,w,X[ie],X[ie+1]],x:0,y:0,w:Z,h:ee});this.paintInlineImageXObjectGroup(W,ae)}applyTransferMapsToCanvas(y){return this.current.transferMaps!=="none"&&(y.filter=this.current.transferMaps,y.drawImage(y.canvas,0,0),y.filter="none"),y.canvas}applyTransferMapsToBitmap(y){if(this.current.transferMaps==="none")return y.bitmap;const{bitmap:p,width:w,height:X}=y,W=this.cachedCanvases.getCanvas("inlineImage",w,X),Z=W.context;return Z.filter=this.current.transferMaps,Z.drawImage(p,0,0),Z.filter="none",W.canvas}paintInlineImageXObject(y){if(!this.contentVisible)return;const p=y.width,w=y.height,X=this.ctx;this.save(),re.isNodeJS||(X.filter="none"),X.scale(1/p,-1/w);let W;if(y.bitmap)W=this.applyTransferMapsToBitmap(y);else if(typeof HTMLElement=="function"&&y instanceof HTMLElement||!y.data)W=y;else{const ae=this.cachedCanvases.getCanvas("inlineImage",p,w).context;E(ae,y),W=this.applyTransferMapsToCanvas(ae)}const Z=this._scaleImage(W,(0,A.getCurrentTransformInverse)(X));X.imageSmoothingEnabled=M((0,A.getCurrentTransform)(X),y.interpolate),h(X,Z.img,0,0,Z.paintWidth,Z.paintHeight,0,-w,p,w),this.compose(),this.restore()}paintInlineImageXObjectGroup(y,p){if(!this.contentVisible)return;const w=this.ctx;let X;if(y.bitmap)X=y.bitmap;else{const W=y.width,Z=y.height,ae=this.cachedCanvases.getCanvas("inlineImage",W,Z).context;E(ae,y),X=this.applyTransferMapsToCanvas(ae)}for(const W of p)w.save(),w.transform(...W.transform),w.scale(1,-1),h(w,X,W.x,W.y,W.w,W.h,0,-1,1,1),w.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(y){}markPointProps(y,p){}beginMarkedContent(y){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(y,p){y==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(p)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(y){const p=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(y);const w=this.ctx;this.pendingClip&&(p||(this.pendingClip===H?w.clip("evenodd"):w.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),w.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const y=(0,A.getCurrentTransform)(this.ctx);if(y[1]===0&&y[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(y[0]),Math.abs(y[3]));else{const p=Math.abs(y[0]*y[3]-y[2]*y[1]),w=Math.hypot(y[0],y[2]),X=Math.hypot(y[1],y[3]);this._cachedGetSinglePixelWidth=Math.max(w,X)/p}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:y}=this.current,p=(0,A.getCurrentTransform)(this.ctx);let w,X;if(p[1]===0&&p[2]===0){const W=Math.abs(p[0]),Z=Math.abs(p[3]);if(y===0)w=1/W,X=1/Z;else{const ee=W*y,ae=Z*y;w=ee<1?1/ee:1,X=ae<1?1/ae:1}}else{const W=Math.abs(p[0]*p[3]-p[2]*p[1]),Z=Math.hypot(p[0],p[1]),ee=Math.hypot(p[2],p[3]);if(y===0)w=ee/W,X=Z/W;else{const ae=y*W;w=ee>ae?ee/ae:1,X=Z>ae?Z/ae:1}}this._cachedScaleForStroking=[w,X]}return this._cachedScaleForStroking}rescaleAndStroke(y){const{ctx:p}=this,{lineWidth:w}=this.current,[X,W]=this.getScaleForStroking();if(p.lineWidth=w||1,X===1&&W===1){p.stroke();return}let Z,ee,ae;y&&(Z=(0,A.getCurrentTransform)(p),ee=p.getLineDash().slice(),ae=p.lineDashOffset),p.scale(X,W);const ie=Math.max(X,W);p.setLineDash(p.getLineDash().map(Y=>Y/ie)),p.lineDashOffset/=ie,p.stroke(),y&&(p.setTransform(...Z),p.setLineDash(ee),p.lineDashOffset=ae)}isContentVisible(){for(let y=this.markedContentStack.length-1;y>=0;y--)if(!this.markedContentStack[y].visible)return!1;return!0}};let U=V;z=new WeakSet,gt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},a.CanvasGraphics=U;for(const L in o.OPS)U.prototype[L]!==void 0&&(U.prototype[o.OPS[L]]=U.prototype[L])},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TilingPattern=a.PathType=void 0,a.getShadingPattern=S;var o=m(1),A=m(6);const D={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};a.PathType=D;function j(u,h){if(!h)return;const I=h[2]-h[0],x=h[3]-h[1],E=new Path2D;E.rect(h[0],h[1],I,x),u.clip(E)}class re{constructor(){this.constructor===re&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class R extends re{constructor(h){super(),this._type=h[1],this._bbox=h[2],this._colorStops=h[3],this._p0=h[4],this._p1=h[5],this._r0=h[6],this._r1=h[7],this.matrix=null}_createGradient(h){let I;this._type==="axial"?I=h.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(I=h.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const x of this._colorStops)I.addColorStop(x[0],x[1]);return I}getPattern(h,I,x,E){let s;if(E===D.STROKE||E===D.FILL){const c=I.current.getClippedPathBoundingBox(E,(0,A.getCurrentTransform)(h))||[0,0,0,0],r=Math.ceil(c[2]-c[0])||1,e=Math.ceil(c[3]-c[1])||1,t=I.cachedCanvases.getCanvas("pattern",r,e,!0),n=t.context;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.beginPath(),n.rect(0,0,n.canvas.width,n.canvas.height),n.translate(-c[0],-c[1]),x=o.Util.transform(x,[1,0,0,1,c[0],c[1]]),n.transform(...I.baseTransform),this.matrix&&n.transform(...this.matrix),j(n,this._bbox),n.fillStyle=this._createGradient(n),n.fill(),s=h.createPattern(t.canvas,"no-repeat");const i=new DOMMatrix(x);s.setTransform(i)}else j(h,this._bbox),s=this._createGradient(h);return s}}function T(u,h,I,x,E,s,c,r){const e=h.coords,t=h.colors,n=u.data,i=u.width*4;let f;e[I+1]>e[x+1]&&(f=I,I=x,x=f,f=s,s=c,c=f),e[x+1]>e[E+1]&&(f=x,x=E,E=f,f=c,c=r,r=f),e[I+1]>e[x+1]&&(f=I,I=x,x=f,f=s,s=c,c=f);const M=(e[I]+h.offsetX)*h.scaleX,P=(e[I+1]+h.offsetY)*h.scaleY,B=(e[x]+h.offsetX)*h.scaleX,J=(e[x+1]+h.offsetY)*h.scaleY,H=(e[E]+h.offsetX)*h.scaleX,U=(e[E+1]+h.offsetY)*h.scaleY;if(P>=U)return;const z=t[s],K=t[s+1],V=t[s+2],L=t[c],y=t[c+1],p=t[c+2],w=t[r],X=t[r+1],W=t[r+2],Z=Math.round(P),ee=Math.round(U);let ae,ie,Y,q,d,v,C,N;for(let $=Z;$<=ee;$++){if($<J){let de;$<P?de=0:de=(P-$)/(P-J),ae=M-(M-B)*de,ie=z-(z-L)*de,Y=K-(K-y)*de,q=V-(V-p)*de}else{let de;$>U?de=1:J===U?de=0:de=(J-$)/(J-U),ae=B-(B-H)*de,ie=L-(L-w)*de,Y=y-(y-X)*de,q=p-(p-W)*de}let Q;$<P?Q=0:$>U?Q=1:Q=(P-$)/(P-U),d=M-(M-H)*Q,v=z-(z-w)*Q,C=K-(K-X)*Q,N=V-(V-W)*Q;const ce=Math.round(Math.min(ae,d)),le=Math.round(Math.max(ae,d));let ue=i*$+ce*4;for(let de=ce;de<=le;de++)Q=(ae-de)/(ae-d),Q<0?Q=0:Q>1&&(Q=1),n[ue++]=ie-(ie-v)*Q|0,n[ue++]=Y-(Y-C)*Q|0,n[ue++]=q-(q-N)*Q|0,n[ue++]=255}}function _(u,h,I){const x=h.coords,E=h.colors;let s,c;switch(h.type){case"lattice":const r=h.verticesPerRow,e=Math.floor(x.length/r)-1,t=r-1;for(s=0;s<e;s++){let n=s*r;for(let i=0;i<t;i++,n++)T(u,I,x[n],x[n+1],x[n+r],E[n],E[n+1],E[n+r]),T(u,I,x[n+r+1],x[n+1],x[n+r],E[n+r+1],E[n+1],E[n+r])}break;case"triangles":for(s=0,c=x.length;s<c;s+=3)T(u,I,x[s],x[s+1],x[s+2],E[s],E[s+1],E[s+2]);break;default:throw new Error("illegal figure")}}class F extends re{constructor(h){super(),this._coords=h[2],this._colors=h[3],this._figures=h[4],this._bounds=h[5],this._bbox=h[7],this._background=h[8],this.matrix=null}_createMeshCanvas(h,I,x){const r=Math.floor(this._bounds[0]),e=Math.floor(this._bounds[1]),t=Math.ceil(this._bounds[2])-r,n=Math.ceil(this._bounds[3])-e,i=Math.min(Math.ceil(Math.abs(t*h[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(n*h[1]*1.1)),3e3),M=t/i,P=n/f,B={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-e,scaleX:1/M,scaleY:1/P},J=i+2*2,H=f+2*2,U=x.getCanvas("mesh",J,H,!1),z=U.context,K=z.createImageData(i,f);if(I){const L=K.data;for(let y=0,p=L.length;y<p;y+=4)L[y]=I[0],L[y+1]=I[1],L[y+2]=I[2],L[y+3]=255}for(const L of this._figures)_(K,L,B);return z.putImageData(K,2,2),{canvas:U.canvas,offsetX:r-2*M,offsetY:e-2*P,scaleX:M,scaleY:P}}getPattern(h,I,x,E){j(h,this._bbox);let s;if(E===D.SHADING)s=o.Util.singularValueDecompose2dScale((0,A.getCurrentTransform)(h));else if(s=o.Util.singularValueDecompose2dScale(I.baseTransform),this.matrix){const r=o.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*r[0],s[1]*r[1]]}const c=this._createMeshCanvas(s,E===D.SHADING?null:this._background,I.cachedCanvases);return E!==D.SHADING&&(h.setTransform(...I.baseTransform),this.matrix&&h.transform(...this.matrix)),h.translate(c.offsetX,c.offsetY),h.scale(c.scaleX,c.scaleY),h.createPattern(c.canvas,"no-repeat")}}class k extends re{getPattern(){return"hotpink"}}function S(u){switch(u[0]){case"RadialAxial":return new R(u);case"Mesh":return new F(u);case"Dummy":return new k}throw new Error(`Unknown IR type: ${u[0]}`)}const g={COLORED:1,UNCOLORED:2};class b{static get MAX_PATTERN_SIZE(){return(0,o.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(h,I,x,E,s){this.operatorList=h[2],this.matrix=h[3]||[1,0,0,1,0,0],this.bbox=h[4],this.xstep=h[5],this.ystep=h[6],this.paintType=h[7],this.tilingType=h[8],this.color=I,this.ctx=x,this.canvasGraphicsFactory=E,this.baseTransform=s}createPatternCanvas(h){const I=this.operatorList,x=this.bbox,E=this.xstep,s=this.ystep,c=this.paintType,r=this.tilingType,e=this.color,t=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+r);const n=x[0],i=x[1],f=x[2],M=x[3],P=o.Util.singularValueDecompose2dScale(this.matrix),B=o.Util.singularValueDecompose2dScale(this.baseTransform),J=[P[0]*B[0],P[1]*B[1]],H=this.getSizeAndScale(E,this.ctx.canvas.width,J[0]),U=this.getSizeAndScale(s,this.ctx.canvas.height,J[1]),z=h.cachedCanvases.getCanvas("pattern",H.size,U.size,!0),K=z.context,V=t.createCanvasGraphics(K);V.groupLevel=h.groupLevel,this.setFillAndStrokeStyleToContext(V,c,e);let L=n,y=i,p=f,w=M;return n<0&&(L=0,p+=Math.abs(n)),i<0&&(y=0,w+=Math.abs(i)),K.translate(-(H.scale*L),-(U.scale*y)),V.transform(H.scale,0,0,U.scale,0,0),K.save(),this.clipBbox(V,L,y,p,w),V.baseTransform=(0,A.getCurrentTransform)(V.ctx),V.executeOperatorList(I),V.endDrawing(),{canvas:z.canvas,scaleX:H.scale,scaleY:U.scale,offsetX:L,offsetY:y}}getSizeAndScale(h,I,x){h=Math.abs(h);const E=Math.max(b.MAX_PATTERN_SIZE,I);let s=Math.ceil(h*x);return s>=E?s=E:x=s/h,{scale:x,size:s}}clipBbox(h,I,x,E,s){const c=E-I,r=s-x;h.ctx.rect(I,x,c,r),h.current.updateRectMinMax((0,A.getCurrentTransform)(h.ctx),[I,x,E,s]),h.clip(),h.endPath()}setFillAndStrokeStyleToContext(h,I,x){const E=h.ctx,s=h.current;switch(I){case g.COLORED:const c=this.ctx;E.fillStyle=c.fillStyle,E.strokeStyle=c.strokeStyle,s.fillColor=c.fillStyle,s.strokeColor=c.strokeStyle;break;case g.UNCOLORED:const r=o.Util.makeHexColor(x[0],x[1],x[2]);E.fillStyle=r,E.strokeStyle=r,s.fillColor=r,s.strokeColor=r;break;default:throw new o.FormatError(`Unsupported paint type: ${I}`)}}getPattern(h,I,x,E){let s=x;E!==D.SHADING&&(s=o.Util.transform(s,I.baseTransform),this.matrix&&(s=o.Util.transform(s,this.matrix)));const c=this.createPatternCanvas(I);let r=new DOMMatrix(s);r=r.translate(c.offsetX,c.offsetY),r=r.scale(1/c.scaleX,1/c.scaleY);const e=h.createPattern(c.canvas,"repeat");return e.setTransform(r),e}}a.TilingPattern=b},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.convertBlackAndWhiteToRGBA=D,a.convertToRGBA=A,a.grayToRGBA=re;var o=m(1);function A(R){switch(R.kind){case o.ImageKind.GRAYSCALE_1BPP:return D(R);case o.ImageKind.RGB_24BPP:return j(R)}return null}function D({src:R,srcPos:T=0,dest:_,width:F,height:k,nonBlackColor:S=4294967295,inverseDecode:g=!1}){const b=o.FeatureTest.isLittleEndian?4278190080:255,[u,h]=g?[S,b]:[b,S],I=F>>3,x=F&7,E=R.length;_=new Uint32Array(_.buffer);let s=0;for(let c=0;c<k;c++){for(const e=T+I;T<e;T++){const t=T<E?R[T]:255;_[s++]=t&128?h:u,_[s++]=t&64?h:u,_[s++]=t&32?h:u,_[s++]=t&16?h:u,_[s++]=t&8?h:u,_[s++]=t&4?h:u,_[s++]=t&2?h:u,_[s++]=t&1?h:u}if(x===0)continue;const r=T<E?R[T++]:255;for(let e=0;e<x;e++)_[s++]=r&1<<7-e?h:u}return{srcPos:T,destPos:s}}function j({src:R,srcPos:T=0,dest:_,destPos:F=0,width:k,height:S}){let g=0;const b=R.length>>2,u=new Uint32Array(R.buffer,T,b);if(o.FeatureTest.isLittleEndian){for(;g<b-2;g+=3,F+=4){const h=u[g],I=u[g+1],x=u[g+2];_[F]=h|4278190080,_[F+1]=h>>>24|I<<8|4278190080,_[F+2]=I>>>16|x<<16|4278190080,_[F+3]=x>>>8|4278190080}for(let h=g*4,I=R.length;h<I;h+=3)_[F++]=R[h]|R[h+1]<<8|R[h+2]<<16|4278190080}else{for(;g<b-2;g+=3,F+=4){const h=u[g],I=u[g+1],x=u[g+2];_[F]=h|255,_[F+1]=h<<24|I>>>8|255,_[F+2]=I<<16|x>>>16|255,_[F+3]=x<<8|255}for(let h=g*4,I=R.length;h<I;h+=3)_[F++]=R[h]<<24|R[h+1]<<16|R[h+2]<<8|255}return{srcPos:T,destPos:F}}function re(R,T){if(o.FeatureTest.isLittleEndian)for(let _=0,F=R.length;_<F;_++)T[_]=R[_]*65793|4278190080;else for(let _=0,F=R.length;_<F;_++)T[_]=R[_]*16843008|255}},(l,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GlobalWorkerOptions=void 0;const m=Object.create(null);a.GlobalWorkerOptions=m,m.workerPort=null,m.workerSrc=""},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MessageHandler=void 0;var o=m(1);const A={UNKNOWN:0,DATA:1,ERROR:2},D={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function j(R){switch(R instanceof Error||typeof R=="object"&&R!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),R.name){case"AbortException":return new o.AbortException(R.message);case"MissingPDFException":return new o.MissingPDFException(R.message);case"PasswordException":return new o.PasswordException(R.message,R.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(R.message,R.status);case"UnknownErrorException":return new o.UnknownErrorException(R.message,R.details);default:return new o.UnknownErrorException(R.message,R.toString())}}class re{constructor(T,_,F){this.sourceName=T,this.targetName=_,this.comObj=F,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=k=>{const S=k.data;if(S.targetName!==this.sourceName)return;if(S.stream){this._processStreamMessage(S);return}if(S.callback){const b=S.callbackId,u=this.callbackCapabilities[b];if(!u)throw new Error(`Cannot resolve callback ${b}`);if(delete this.callbackCapabilities[b],S.callback===A.DATA)u.resolve(S.data);else if(S.callback===A.ERROR)u.reject(j(S.reason));else throw new Error("Unexpected callback case");return}const g=this.actionHandler[S.action];if(!g)throw new Error(`Unknown action from worker: ${S.action}`);if(S.callbackId){const b=this.sourceName,u=S.sourceName;new Promise(function(h){h(g(S.data))}).then(function(h){F.postMessage({sourceName:b,targetName:u,callback:A.DATA,callbackId:S.callbackId,data:h})},function(h){F.postMessage({sourceName:b,targetName:u,callback:A.ERROR,callbackId:S.callbackId,reason:j(h)})});return}if(S.streamId){this._createStreamSink(S);return}g(S.data)},F.addEventListener("message",this._onComObjOnMessage)}on(T,_){const F=this.actionHandler;if(F[T])throw new Error(`There is already an actionName called "${T}"`);F[T]=_}send(T,_,F){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,data:_},F)}sendWithPromise(T,_,F){const k=this.callbackId++,S=(0,o.createPromiseCapability)();this.callbackCapabilities[k]=S;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,callbackId:k,data:_},F)}catch(g){S.reject(g)}return S.promise}sendWithStream(T,_,F,k){const S=this.streamId++,g=this.sourceName,b=this.targetName,u=this.comObj;return new ReadableStream({start:h=>{const I=(0,o.createPromiseCapability)();return this.streamControllers[S]={controller:h,startCall:I,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:g,targetName:b,action:T,streamId:S,data:_,desiredSize:h.desiredSize},k),I.promise},pull:h=>{const I=(0,o.createPromiseCapability)();return this.streamControllers[S].pullCall=I,u.postMessage({sourceName:g,targetName:b,stream:D.PULL,streamId:S,desiredSize:h.desiredSize}),I.promise},cancel:h=>{(0,o.assert)(h instanceof Error,"cancel must have a valid reason");const I=(0,o.createPromiseCapability)();return this.streamControllers[S].cancelCall=I,this.streamControllers[S].isClosed=!0,u.postMessage({sourceName:g,targetName:b,stream:D.CANCEL,streamId:S,reason:j(h)}),I.promise}},F)}_createStreamSink(T){const _=T.streamId,F=this.sourceName,k=T.sourceName,S=this.comObj,g=this,b=this.actionHandler[T.action],u={enqueue(h,I=1,x){if(this.isCancelled)return;const E=this.desiredSize;this.desiredSize-=I,E>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),S.postMessage({sourceName:F,targetName:k,stream:D.ENQUEUE,streamId:_,chunk:h},x)},close(){this.isCancelled||(this.isCancelled=!0,S.postMessage({sourceName:F,targetName:k,stream:D.CLOSE,streamId:_}),delete g.streamSinks[_])},error(h){(0,o.assert)(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,S.postMessage({sourceName:F,targetName:k,stream:D.ERROR,streamId:_,reason:j(h)}))},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:T.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[_]=u,new Promise(function(h){h(b(T.data,u))}).then(function(){S.postMessage({sourceName:F,targetName:k,stream:D.START_COMPLETE,streamId:_,success:!0})},function(h){S.postMessage({sourceName:F,targetName:k,stream:D.START_COMPLETE,streamId:_,reason:j(h)})})}_processStreamMessage(T){const _=T.streamId,F=this.sourceName,k=T.sourceName,S=this.comObj,g=this.streamControllers[_],b=this.streamSinks[_];switch(T.stream){case D.START_COMPLETE:T.success?g.startCall.resolve():g.startCall.reject(j(T.reason));break;case D.PULL_COMPLETE:T.success?g.pullCall.resolve():g.pullCall.reject(j(T.reason));break;case D.PULL:if(!b){S.postMessage({sourceName:F,targetName:k,stream:D.PULL_COMPLETE,streamId:_,success:!0});break}b.desiredSize<=0&&T.desiredSize>0&&b.sinkCapability.resolve(),b.desiredSize=T.desiredSize,new Promise(function(u){u(b.onPull&&b.onPull())}).then(function(){S.postMessage({sourceName:F,targetName:k,stream:D.PULL_COMPLETE,streamId:_,success:!0})},function(u){S.postMessage({sourceName:F,targetName:k,stream:D.PULL_COMPLETE,streamId:_,reason:j(u)})});break;case D.ENQUEUE:if((0,o.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(T.chunk);break;case D.CLOSE:if((0,o.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this._deleteStreamController(g,_);break;case D.ERROR:(0,o.assert)(g,"error should have stream controller"),g.controller.error(j(T.reason)),this._deleteStreamController(g,_);break;case D.CANCEL_COMPLETE:T.success?g.cancelCall.resolve():g.cancelCall.reject(j(T.reason)),this._deleteStreamController(g,_);break;case D.CANCEL:if(!b)break;new Promise(function(u){u(b.onCancel&&b.onCancel(j(T.reason)))}).then(function(){S.postMessage({sourceName:F,targetName:k,stream:D.CANCEL_COMPLETE,streamId:_,success:!0})},function(u){S.postMessage({sourceName:F,targetName:k,stream:D.CANCEL_COMPLETE,streamId:_,reason:j(u)})}),b.sinkCapability.reject(j(T.reason)),b.isCancelled=!0,delete this.streamSinks[_];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(T,_){await Promise.allSettled([T.startCall&&T.startCall.promise,T.pullCall&&T.pullCall.promise,T.cancelCall&&T.cancelCall.promise]),delete this.streamControllers[_]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}a.MessageHandler=re},(l,a,m)=>{var D,j;Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var o=m(1);class A{constructor({parsedData:R,rawData:T}){oe(this,D,void 0);oe(this,j,void 0);ge(this,D,R),ge(this,j,T)}getRaw(){return O(this,j)}get(R){return O(this,D).get(R)??null}getAll(){return(0,o.objectFromMap)(O(this,D))}has(R){return O(this,D).has(R)}}D=new WeakMap,j=new WeakMap,a.Metadata=A},(l,a,m)=>{var R,T,_,F,k,S,mt;Object.defineProperty(a,"__esModule",{value:!0}),a.OptionalContentConfig=void 0;var o=m(1),A=m(8);const D=Symbol("INTERNAL");class j{constructor(u,h){oe(this,R,!0);this.name=u,this.intent=h}get visible(){return O(this,R)}_setVisible(u,h){u!==D&&(0,o.unreachable)("Internal method `_setVisible` called."),ge(this,R,h)}}R=new WeakMap;class re{constructor(u){oe(this,S);oe(this,T,null);oe(this,_,new Map);oe(this,F,null);oe(this,k,null);if(this.name=null,this.creator=null,u!==null){this.name=u.name,this.creator=u.creator,ge(this,k,u.order);for(const h of u.groups)O(this,_).set(h.id,new j(h.name,h.intent));if(u.baseState==="OFF")for(const h of O(this,_).values())h._setVisible(D,!1);for(const h of u.on)O(this,_).get(h)._setVisible(D,!0);for(const h of u.off)O(this,_).get(h)._setVisible(D,!1);ge(this,F,this.getHash())}}isVisible(u){if(O(this,_).size===0)return!0;if(!u)return(0,o.warn)("Optional content group not defined."),!0;if(u.type==="OCG")return O(this,_).has(u.id)?O(this,_).get(u.id).visible:((0,o.warn)(`Optional content group not found: ${u.id}`),!0);if(u.type==="OCMD"){if(u.expression)return he(this,S,mt).call(this,u.expression);if(!u.policy||u.policy==="AnyOn"){for(const h of u.ids){if(!O(this,_).has(h))return(0,o.warn)(`Optional content group not found: ${h}`),!0;if(O(this,_).get(h).visible)return!0}return!1}else if(u.policy==="AllOn"){for(const h of u.ids){if(!O(this,_).has(h))return(0,o.warn)(`Optional content group not found: ${h}`),!0;if(!O(this,_).get(h).visible)return!1}return!0}else if(u.policy==="AnyOff"){for(const h of u.ids){if(!O(this,_).has(h))return(0,o.warn)(`Optional content group not found: ${h}`),!0;if(!O(this,_).get(h).visible)return!0}return!1}else if(u.policy==="AllOff"){for(const h of u.ids){if(!O(this,_).has(h))return(0,o.warn)(`Optional content group not found: ${h}`),!0;if(O(this,_).get(h).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${u.policy}.`),!0}return(0,o.warn)(`Unknown group type ${u.type}.`),!0}setVisibility(u,h=!0){if(!O(this,_).has(u)){(0,o.warn)(`Optional content group not found: ${u}`);return}O(this,_).get(u)._setVisible(D,!!h),ge(this,T,null)}get hasInitialVisibility(){return this.getHash()===O(this,F)}getOrder(){return O(this,_).size?O(this,k)?O(this,k).slice():[...O(this,_).keys()]:null}getGroups(){return O(this,_).size>0?(0,o.objectFromMap)(O(this,_)):null}getGroup(u){return O(this,_).get(u)||null}getHash(){if(O(this,T)!==null)return O(this,T);const u=new A.MurmurHash3_64;for(const[h,I]of O(this,_))u.update(`${h}:${I.visible}`);return ge(this,T,u.hexdigest())}}T=new WeakMap,_=new WeakMap,F=new WeakMap,k=new WeakMap,S=new WeakSet,mt=function(u){const h=u.length;if(h<2)return!0;const I=u[0];for(let x=1;x<h;x++){const E=u[x];let s;if(Array.isArray(E))s=he(this,S,mt).call(this,E);else if(O(this,_).has(E))s=O(this,_).get(E).visible;else return(0,o.warn)(`Optional content group not found: ${E}`),!0;switch(I){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return I==="And"},a.OptionalContentConfig=re},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFDataTransportStream=void 0;var o=m(1),A=m(6);class D{constructor({length:T,initialData:_,progressiveDone:F=!1,contentDispositionFilename:k=null,disableRange:S=!1,disableStream:g=!1},b){if((0,o.assert)(b,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=F,this._contentDispositionFilename=k,(_==null?void 0:_.length)>0){const u=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=b,this._isStreamingSupported=!g,this._isRangeSupported=!S,this._contentLength=T,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((u,h)=>{this._onReceiveData({begin:u,chunk:h})}),this._pdfDataRangeTransport.addProgressListener((u,h)=>{this._onProgress({loaded:u,total:h})}),this._pdfDataRangeTransport.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:T,chunk:_}){const F=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;if(T===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(F):this._queuedChunks.push(F);else{const k=this._rangeReaders.some(function(S){return S._begin!==T?!1:(S._enqueue(F),!0)});(0,o.assert)(k,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var T;return((T=this._fullRequestReader)==null?void 0:T._loaded)??0}_onProgress(T){var _,F,k,S;T.total===void 0?(F=(_=this._rangeReaders[0])==null?void 0:_.onProgress)==null||F.call(_,{loaded:T.loaded}):(S=(k=this._fullRequestReader)==null?void 0:k.onProgress)==null||S.call(k,{loaded:T.loaded,total:T.total})}_onProgressiveDone(){var T;(T=this._fullRequestReader)==null||T.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(T){const _=this._rangeReaders.indexOf(T);_>=0&&this._rangeReaders.splice(_,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const T=this._queuedChunks;return this._queuedChunks=null,new j(this,T,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(T,_){if(_<=this._progressiveDataLength)return null;const F=new re(this,T,_);return this._pdfDataRangeTransport.requestDataRange(T,_),this._rangeReaders.push(F),F}cancelAllRequests(T){var _;(_=this._fullRequestReader)==null||_.cancel(T);for(const F of this._rangeReaders.slice(0))F.cancel(T);this._pdfDataRangeTransport.abort()}}a.PDFDataTransportStream=D;class j{constructor(T,_,F=!1,k=null){this._stream=T,this._done=F||!1,this._filename=(0,A.isPdfFile)(k)?k:null,this._queuedChunks=_||[],this._loaded=0;for(const S of this._queuedChunks)this._loaded+=S.byteLength;this._requests=[],this._headersReady=Promise.resolve(),T._fullRequestReader=this,this.onProgress=null}_enqueue(T){this._done||(this._requests.length>0?this._requests.shift().resolve({value:T,done:!1}):this._queuedChunks.push(T),this._loaded+=T.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=(0,o.createPromiseCapability)();return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class re{constructor(T,_,F){this._stream=T,this._begin=_,this._end=F,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(T){if(!this._done){if(this._requests.length===0)this._queuedChunk=T;else{this._requests.shift().resolve({value:T,done:!1});for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const T=(0,o.createPromiseCapability)();return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(l,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaText=void 0;class m{static textContent(A){const D=[],j={items:D,styles:Object.create(null)};function re(R){var F;if(!R)return;let T=null;const _=R.name;if(_==="#text")T=R.value;else if(m.shouldBuildText(_))(F=R==null?void 0:R.attributes)!=null&&F.textContent?T=R.attributes.textContent:R.value&&(T=R.value);else return;if(T!==null&&D.push({str:T}),!!R.children)for(const k of R.children)re(k)}return re(A),j}static shouldBuildText(A){return!(A==="textarea"||A==="input"||A==="option"||A==="select")}}a.XfaText=m},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NodeStandardFontDataFactory=a.NodeFilterFactory=a.NodeCanvasFactory=a.NodeCMapReaderFactory=void 0;var o=m(7);const A=function(T){return new Promise((_,F)=>{require$$5.readFile(T,(S,g)=>{if(S||!g){F(new Error(S));return}_(new Uint8Array(g))})})};class D extends o.BaseFilterFactory{}a.NodeFilterFactory=D;class j extends o.BaseCanvasFactory{_createCanvas(_,F){return require$$5.createCanvas(_,F)}}a.NodeCanvasFactory=j;class re extends o.BaseCMapReaderFactory{_fetchData(_,F){return A(_).then(k=>({cMapData:k,compressionType:F}))}}a.NodeCMapReaderFactory=re;class R extends o.BaseStandardFontDataFactory{_fetchData(_){return A(_)}}a.NodeStandardFontDataFactory=R},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNodeStream=void 0;var o=m(1),A=m(22);const D=require$$5,j=require$$5,re=require$$5,R=require$$5,T=/^file:\/\/\/[a-zA-Z]:\//;function _(x){const E=R.parse(x);return E.protocol==="file:"||E.host?E:/^[a-z]:[/\\]/i.test(x)?R.parse(`file:///${x}`):(E.host||(E.protocol="file:"),E)}class F{constructor(E){this.source=E,this.url=_(E.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new h(this):new b(this),this._fullRequestReader}getRangeReader(E,s){if(s<=this._progressiveDataLength)return null;const c=this.isFsUrl?new I(this,E,s):new u(this,E,s);return this._rangeRequestReaders.push(c),c}cancelAllRequests(E){var s;(s=this._fullRequestReader)==null||s.cancel(E);for(const c of this._rangeRequestReaders.slice(0))c.cancel(E)}}a.PDFNodeStream=F;class k{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null;const s=E.source;this._contentLength=s.length,this._loaded=0,this._filename=null,this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var c;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=(0,o.createPromiseCapability)(),this.read()):(this._loaded+=E.length,(c=this.onProgress)==null||c.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",s=>{this._error(s)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class S{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)();const s=E.source;this._isStreamingSupported=!s.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var c;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=(0,o.createPromiseCapability)(),this.read()):(this._loaded+=E.length,(c=this.onProgress)==null||c.call(this,{loaded:this._loaded}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",s=>{this._error(s)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(x,E){return{protocol:x.protocol,auth:x.auth,host:x.hostname,port:x.port,path:x.path,method:"GET",headers:E}}class b extends k{constructor(E){super(E);const s=c=>{if(c.statusCode===404){const n=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=n,this._headersCapability.reject(n);return}this._headersCapability.resolve(),this._setReadableStream(c);const r=n=>this._readableStream.headers[n.toLowerCase()],{allowRangeRequests:e,suggestedLength:t}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:E.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=e,this._contentLength=t||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(r)};this._request=null,this._url.protocol==="http:"?this._request=j.request(g(this._url,E.httpHeaders),s):this._request=re.request(g(this._url,E.httpHeaders),s),this._request.on("error",c=>{this._storedError=c,this._headersCapability.reject(c)}),this._request.end()}}class u extends S{constructor(E,s,c){super(E),this._httpHeaders={};for(const e in E.httpHeaders){const t=E.httpHeaders[e];t!==void 0&&(this._httpHeaders[e]=t)}this._httpHeaders.Range=`bytes=${s}-${c-1}`;const r=e=>{if(e.statusCode===404){const t=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t;return}this._setReadableStream(e)};this._request=null,this._url.protocol==="http:"?this._request=j.request(g(this._url,this._httpHeaders),r):this._request=re.request(g(this._url,this._httpHeaders),r),this._request.on("error",e=>{this._storedError=e}),this._request.end()}}class h extends k{constructor(E){super(E);let s=decodeURIComponent(this._url.path);T.test(this._url.href)&&(s=s.replace(/^\//,"")),D.lstat(s,(c,r)=>{if(c){c.code==="ENOENT"&&(c=new o.MissingPDFException(`Missing PDF "${s}".`)),this._storedError=c,this._headersCapability.reject(c);return}this._contentLength=r.size,this._setReadableStream(D.createReadStream(s)),this._headersCapability.resolve()})}}class I extends S{constructor(E,s,c){super(E);let r=decodeURIComponent(this._url.path);T.test(this._url.href)&&(r=r.replace(/^\//,"")),this._setReadableStream(D.createReadStream(r,{start:s,end:c-1}))}}},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createResponseStatusError=R,a.extractFilenameFromHeader=re,a.validateRangeRequestCapabilities=j,a.validateResponseStatus=T;var o=m(1),A=m(23),D=m(6);function j({getResponseHeader:_,isHttp:F,rangeChunkSize:k,disableRange:S}){const g={allowRangeRequests:!1,suggestedLength:void 0},b=parseInt(_("Content-Length"),10);return!Number.isInteger(b)||(g.suggestedLength=b,b<=2*k)||S||!F||_("Accept-Ranges")!=="bytes"||(_("Content-Encoding")||"identity")!=="identity"||(g.allowRangeRequests=!0),g}function re(_){const F=_("Content-Disposition");if(F){let k=(0,A.getFilenameFromContentDispositionHeader)(F);if(k.includes("%"))try{k=decodeURIComponent(k)}catch{}if((0,D.isPdfFile)(k))return k}return null}function R(_,F){return _===404||_===0&&F.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+F+'".'):new o.UnexpectedResponseException(`Unexpected server response (${_}) while retrieving PDF "${F}".`,_)}function T(_){return _===200||_===206}},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getFilenameFromContentDispositionHeader=A;var o=m(1);function A(D){let j=!0,re=R("filename\\*","i").exec(D);if(re){re=re[1];let b=k(re);return b=unescape(b),b=S(b),b=g(b),_(b)}if(re=F(D),re){const b=g(re);return _(b)}if(re=R("filename","i").exec(D),re){re=re[1];let b=k(re);return b=g(b),_(b)}function R(b,u){return new RegExp("(?:^|;)\\s*"+b+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function T(b,u){if(b){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const h=new TextDecoder(b,{fatal:!0}),I=(0,o.stringToBytes)(u);u=h.decode(I),j=!1}catch{}}return u}function _(b){return j&&/[\x80-\xff]/.test(b)&&(b=T("utf-8",b),j&&(b=T("iso-8859-1",b))),b}function F(b){const u=[];let h;const I=R("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=I.exec(b))!==null;){let[,E,s,c]=h;if(E=parseInt(E,10),E in u){if(E===0)break;continue}u[E]=[s,c]}const x=[];for(let E=0;E<u.length&&E in u;++E){let[s,c]=u[E];c=k(c),s&&(c=unescape(c),E===0&&(c=S(c))),x.push(c)}return x.join("")}function k(b){if(b.startsWith('"')){const u=b.slice(1).split('\\"');for(let h=0;h<u.length;++h){const I=u[h].indexOf('"');I!==-1&&(u[h]=u[h].slice(0,I),u.length=h+1),u[h]=u[h].replaceAll(/\\(.)/g,"$1")}b=u.join('"')}return b}function S(b){const u=b.indexOf("'");if(u===-1)return b;const h=b.slice(0,u),x=b.slice(u+1).replace(/^[^']*'/,"");return T(h,x)}function g(b){return!b.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(b)?b:b.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,h,I,x){if(I==="q"||I==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,s){return String.fromCharCode(parseInt(s,16))}),T(h,x);try{x=atob(x)}catch{}return T(h,x)})}return""}},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNetworkStream=void 0;var o=m(1),A=m(22);const D=200,j=206;function re(k){const S=k.response;return typeof S!="string"?S:(0,o.stringToBytes)(S).buffer}class R{constructor(S,g={}){this.url=S,this.isHttp=/^https?:/i.test(S),this.httpHeaders=this.isHttp&&g.httpHeaders||Object.create(null),this.withCredentials=g.withCredentials||!1,this.getXhr=g.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(S,g,b){const u={begin:S,end:g};for(const h in b)u[h]=b[h];return this.request(u)}requestFull(S){return this.request(S)}request(S){const g=this.getXhr(),b=this.currXhrId++,u=this.pendingRequests[b]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(const h in this.httpHeaders){const I=this.httpHeaders[h];I!==void 0&&g.setRequestHeader(h,I)}return this.isHttp&&"begin"in S&&"end"in S?(g.setRequestHeader("Range",`bytes=${S.begin}-${S.end-1}`),u.expectedStatus=j):u.expectedStatus=D,g.responseType="arraybuffer",S.onError&&(g.onerror=function(h){S.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,b),g.onprogress=this.onProgress.bind(this,b),u.onHeadersReceived=S.onHeadersReceived,u.onDone=S.onDone,u.onError=S.onError,u.onProgress=S.onProgress,g.send(null),b}onProgress(S,g){var u;const b=this.pendingRequests[S];b&&((u=b.onProgress)==null||u.call(b,g))}onStateChange(S,g){var E,s,c;const b=this.pendingRequests[S];if(!b)return;const u=b.xhr;if(u.readyState>=2&&b.onHeadersReceived&&(b.onHeadersReceived(),delete b.onHeadersReceived),u.readyState!==4||!(S in this.pendingRequests))return;if(delete this.pendingRequests[S],u.status===0&&this.isHttp){(E=b.onError)==null||E.call(b,u.status);return}const h=u.status||D;if(!(h===D&&b.expectedStatus===j)&&h!==b.expectedStatus){(s=b.onError)==null||s.call(b,u.status);return}const x=re(u);if(h===j){const r=u.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(r);b.onDone({begin:parseInt(e[1],10),chunk:x})}else x?b.onDone({begin:0,chunk:x}):(c=b.onError)==null||c.call(b,u.status)}getRequestXhr(S){return this.pendingRequests[S].xhr}isPendingRequest(S){return S in this.pendingRequests}abortRequest(S){const g=this.pendingRequests[S].xhr;delete this.pendingRequests[S],g.abort()}}class T{constructor(S){this._source=S,this._manager=new R(S.url,{httpHeaders:S.httpHeaders,withCredentials:S.withCredentials}),this._rangeChunkSize=S.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(S){const g=this._rangeRequestReaders.indexOf(S);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _(this._manager,this._source),this._fullRequestReader}getRangeReader(S,g){const b=new F(this._manager,S,g);return b.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(b),b}cancelAllRequests(S){var g;(g=this._fullRequestReader)==null||g.cancel(S);for(const b of this._rangeRequestReaders.slice(0))b.cancel(S)}}a.PDFNetworkStream=T;class _{constructor(S,g){this._manager=S;const b={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=S.requestFull(b),this._headersReceivedCapability=(0,o.createPromiseCapability)(),this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const S=this._fullRequestId,g=this._manager.getRequestXhr(S),b=I=>g.getResponseHeader(I),{allowRangeRequests:u,suggestedLength:h}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});u&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(b),this._isRangeSupported&&this._manager.abortRequest(S),this._headersReceivedCapability.resolve()}_onDone(S){if(S&&(this._requests.length>0?this._requests.shift().resolve({value:S.chunk,done:!1}):this._cachedChunks.push(S.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(S){this._storedError=(0,A.createResponseStatusError)(S,this._url),this._headersReceivedCapability.reject(this._storedError);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(S){var g;(g=this.onProgress)==null||g.call(this,{loaded:S.loaded,total:S.lengthComputable?S.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const S=(0,o.createPromiseCapability)();return this._requests.push(S),S.promise}cancel(S){this._done=!0,this._headersReceivedCapability.reject(S);for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class F{constructor(S,g,b){this._manager=S;const u={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=S.url,this._requestId=S.requestRange(g,b,u),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var S;(S=this.onClosed)==null||S.call(this,this)}_onDone(S){const g=S.chunk;this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunk=g,this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(S){this._storedError=(0,A.createResponseStatusError)(S,this._url);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(S){var g;this.isStreamingSupported||(g=this.onProgress)==null||g.call(this,{loaded:S.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const S=(0,o.createPromiseCapability)();return this._requests.push(S),S.promise}cancel(S){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFFetchStream=void 0;var o=m(1),A=m(22);function D(F,k,S){return{method:"GET",headers:F,signal:S.signal,mode:"cors",credentials:k?"include":"same-origin",redirect:"follow"}}function j(F){const k=new Headers;for(const S in F){const g=F[S];g!==void 0&&k.append(S,g)}return k}function re(F){return F instanceof Uint8Array?F.buffer:F instanceof ArrayBuffer?F:((0,o.warn)(`getArrayBuffer - unexpected data format: ${F}`),new Uint8Array(F).buffer)}class R{constructor(k){this.source=k,this.isHttp=/^https?:/i.test(k.url),this.httpHeaders=this.isHttp&&k.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var k;return((k=this._fullRequestReader)==null?void 0:k._loaded)??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(k,S){if(S<=this._progressiveDataLength)return null;const g=new _(this,k,S);return this._rangeRequestReaders.push(g),g}cancelAllRequests(k){var S;(S=this._fullRequestReader)==null||S.cancel(k);for(const g of this._rangeRequestReaders.slice(0))g.cancel(k)}}a.PDFFetchStream=R;class T{constructor(k){this._stream=k,this._reader=null,this._loaded=0,this._filename=null;const S=k.source;this._withCredentials=S.withCredentials||!1,this._contentLength=S.length,this._headersCapability=(0,o.createPromiseCapability)(),this._disableRange=S.disableRange||!1,this._rangeChunkSize=S.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!S.disableStream,this._isRangeSupported=!S.disableRange,this._headers=j(this._stream.httpHeaders);const g=S.url;fetch(g,D(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,A.validateResponseStatus)(b.status))throw(0,A.createResponseStatusError)(b.status,g);this._reader=b.body.getReader(),this._headersCapability.resolve();const u=x=>b.headers.get(x),{allowRangeRequests:h,suggestedLength:I}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=I||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._headersCapability.promise;const{value:k,done:S}=await this._reader.read();return S?{value:k,done:S}:(this._loaded+=k.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded,total:this._contentLength}),{value:re(k),done:!1})}cancel(k){var S;(S=this._reader)==null||S.cancel(k),this._abortController.abort()}}class _{constructor(k,S,g){this._stream=k,this._reader=null,this._loaded=0;const b=k.source;this._withCredentials=b.withCredentials||!1,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!b.disableStream,this._abortController=new AbortController,this._headers=j(this._stream.httpHeaders),this._headers.append("Range",`bytes=${S}-${g-1}`);const u=b.url;fetch(u,D(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,A.validateResponseStatus)(h.status))throw(0,A.createResponseStatusError)(h.status,u);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._readCapability.promise;const{value:k,done:S}=await this._reader.read();return S?{value:k,done:S}:(this._loaded+=k.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded}),{value:re(k),done:!1})}cancel(k){var S;(S=this._reader)==null||S.cancel(k),this._abortController.abort()}}},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TextLayerRenderTask=void 0,a.renderTextLayer=b,a.updateTextLayer=u;var o=m(1),A=m(6);const D=1e5,j=30,re=.8,R=new Map;function T(h,I){let x;if(I&&o.FeatureTest.isOffscreenCanvasSupported)x=new OffscreenCanvas(h,h).getContext("2d",{alpha:!1});else{const E=document.createElement("canvas");E.width=E.height=h,x=E.getContext("2d",{alpha:!1})}return x}function _(h,I){const x=R.get(h);if(x)return x;const E=T(j,I);E.font=`${j}px ${h}`;const s=E.measureText("");let c=s.fontBoundingBoxAscent,r=Math.abs(s.fontBoundingBoxDescent);if(c){const t=c/(c+r);return R.set(h,t),E.canvas.width=E.canvas.height=0,t}E.strokeStyle="red",E.clearRect(0,0,j,j),E.strokeText("g",0,0);let e=E.getImageData(0,0,j,j).data;r=0;for(let t=e.length-1-3;t>=0;t-=4)if(e[t]>0){r=Math.ceil(t/4/j);break}E.clearRect(0,0,j,j),E.strokeText("A",0,j),e=E.getImageData(0,0,j,j).data,c=0;for(let t=0,n=e.length;t<n;t+=4)if(e[t]>0){c=j-Math.floor(t/4/j);break}if(E.canvas.width=E.canvas.height=0,c){const t=c/(c+r);return R.set(h,t),t}return R.set(h,re),re}function F(h,I,x){const E=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};h._textDivs.push(E);const c=o.Util.transform(h._transform,I.transform);let r=Math.atan2(c[1],c[0]);const e=x[I.fontName];e.vertical&&(r+=Math.PI/2);const t=Math.hypot(c[2],c[3]),n=t*_(e.fontFamily,h._isOffscreenCanvasSupported);let i,f;r===0?(i=c[4],f=c[5]-n):(i=c[4]+n*Math.sin(r),f=c[5]-n*Math.cos(r));const M="calc(var(--scale-factor)*",P=E.style;h._container===h._rootContainer?(P.left=`${(100*i/h._pageWidth).toFixed(2)}%`,P.top=`${(100*f/h._pageHeight).toFixed(2)}%`):(P.left=`${M}${i.toFixed(2)}px)`,P.top=`${M}${f.toFixed(2)}px)`),P.fontSize=`${M}${t.toFixed(2)}px)`,P.fontFamily=e.fontFamily,s.fontSize=t,E.setAttribute("role","presentation"),E.textContent=I.str,E.dir=I.dir,h._fontInspectorEnabled&&(E.dataset.fontName=I.fontName),r!==0&&(s.angle=r*(180/Math.PI));let B=!1;if(I.str.length>1)B=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const J=Math.abs(I.transform[0]),H=Math.abs(I.transform[3]);J!==H&&Math.max(J,H)/Math.min(J,H)>1.5&&(B=!0)}B&&(s.canvasWidth=e.vertical?I.height:I.width),h._textDivProperties.set(E,s),h._isReadableStream&&h._layoutText(E)}function k(h){const{div:I,scale:x,properties:E,ctx:s,prevFontSize:c,prevFontFamily:r}=h,{style:e}=I;let t="";if(E.canvasWidth!==0&&E.hasText){const{fontFamily:n}=e,{canvasWidth:i,fontSize:f}=E;(c!==f||r!==n)&&(s.font=`${f*x}px ${n}`,h.prevFontSize=f,h.prevFontFamily=n);const{width:M}=s.measureText(I.textContent);M>0&&(t=`scaleX(${i*x/M})`)}E.angle!==0&&(t=`rotate(${E.angle}deg) ${t}`),t.length>0&&(e.transform=t)}function S(h){if(h._canceled)return;const I=h._textDivs,x=h._capability;if(I.length>D){x.resolve();return}if(!h._isReadableStream)for(const s of I)h._layoutText(s);x.resolve()}class g{constructor({textContentSource:I,container:x,viewport:E,textDivs:s,textDivProperties:c,textContentItemsStr:r,isOffscreenCanvasSupported:e}){var M;this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=x,this._textDivs=s||[],this._textContentItemsStr=r||[],this._isOffscreenCanvasSupported=e,this._fontInspectorEnabled=!!((M=globalThis.FontInspector)!=null&&M.enabled),this._reader=null,this._textDivProperties=c||new WeakMap,this._canceled=!1,this._capability=(0,o.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:T(0,e)};const{pageWidth:t,pageHeight:n,pageX:i,pageY:f}=E.rawDims;this._transform=[1,0,0,-1,-i,f+n],this._pageWidth=t,this._pageHeight=n,(0,A.setLayerDimensions)(x,E),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(I,x){for(const E of I){if(E.str===void 0){if(E.type==="beginMarkedContentProps"||E.type==="beginMarkedContent"){const s=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),E.id!==null&&this._container.setAttribute("id",`${E.id}`),s.append(this._container)}else E.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(E.str),F(this,E,x)}}_layoutText(I){const x=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,k(this._layoutTextParams),x.hasText&&this._container.append(I),x.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this._container.append(E)}}_render(){const I=(0,o.createPromiseCapability)();let x=Object.create(null);if(this._isReadableStream){const E=()=>{this._reader.read().then(({value:s,done:c})=>{if(c){I.resolve();return}Object.assign(x,s.styles),this._processItems(s.items,x),E()},I.reject)};this._reader=this._textContentSource.getReader(),E()}else if(this._textContentSource){const{items:E,styles:s}=this._textContentSource;this._processItems(E,s),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{x=null,S(this)},this._capability.reject)}}a.TextLayerRenderTask=g;function b(h){!h.textContentSource&&(h.textContent||h.textContentStream)&&((0,A.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),h.textContentSource=h.textContent||h.textContentStream);const{container:I,viewport:x}=h,E=getComputedStyle(I),s=E.getPropertyValue("visibility"),c=parseFloat(E.getPropertyValue("--scale-factor"));s==="visible"&&(!c||Math.abs(c-x.scale)>1e-15)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const r=new g(h);return r._render(),r}function u({container:h,viewport:I,textDivs:x,textDivProperties:E,isOffscreenCanvasSupported:s,mustRotate:c=!0,mustRescale:r=!0}){if(c&&(0,A.setLayerDimensions)(h,{rotation:I.rotation}),r){const e=T(0,s),n={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:e};for(const i of x)n.properties=E.get(i),n.div=i,k(n)}}},(l,a,m)=>{var T,_,F,k,S,g,b,u,h,_t,x,jt,s,vt,r,bt;Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditorLayer=void 0;var o=m(1),A=m(5),D=m(28),j=m(29),re=m(6);const t=class{constructor(i){oe(this,h);oe(this,x);oe(this,s);oe(this,r);oe(this,T,void 0);oe(this,_,!1);oe(this,F,this.pointerup.bind(this));oe(this,k,this.pointerdown.bind(this));oe(this,S,new Map);oe(this,g,!1);oe(this,b,!1);oe(this,u,void 0);t._initialized||(t._initialized=!0,D.FreeTextEditor.initialize(i.l10n),j.InkEditor.initialize(i.l10n)),i.uiManager.registerEditorTypes([D.FreeTextEditor,j.InkEditor]),ge(this,u,i.uiManager),this.pageIndex=i.pageIndex,this.div=i.div,ge(this,T,i.accessibilityManager),O(this,u).addLayer(this)}get isEmpty(){return O(this,S).size===0}updateToolbar(i){O(this,u).updateToolbar(i)}updateMode(i=O(this,u).getMode()){he(this,r,bt).call(this),i===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),O(this,u).unselectAll(),i!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",i===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",i===o.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(i){if(!i&&O(this,u).getMode()!==o.AnnotationEditorType.INK)return;if(!i){for(const M of O(this,S).values())if(M.isEmpty()){M.setInBackground();return}}he(this,s,vt).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(i){O(this,u).setEditingState(i)}addCommands(i){O(this,u).addCommands(i)}enable(){this.div.style.pointerEvents="auto";for(const i of O(this,S).values())i.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const i of O(this,S).values())i.disableEditing();he(this,r,bt).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(i){O(this,u).getActive()!==i&&O(this,u).setActiveEditor(i)}enableClick(){this.div.addEventListener("pointerdown",O(this,k)),this.div.addEventListener("pointerup",O(this,F))}disableClick(){this.div.removeEventListener("pointerdown",O(this,k)),this.div.removeEventListener("pointerup",O(this,F))}attach(i){O(this,S).set(i.id,i)}detach(i){var f;O(this,S).delete(i.id),(f=O(this,T))==null||f.removePointerInTextLayer(i.contentDiv)}remove(i){O(this,u).removeEditor(i),this.detach(i),i.div.style.display="none",setTimeout(()=>{i.div.style.display="",i.div.remove(),i.isAttachedToDOM=!1,document.activeElement===document.body&&O(this,u).focusMainContainer()},0),O(this,b)||this.addInkEditorIfNeeded(!1)}add(i){if(he(this,h,_t).call(this,i),O(this,u).addEditor(i),this.attach(i),!i.isAttachedToDOM){const f=i.render();this.div.append(f),i.isAttachedToDOM=!0}this.moveEditorInDOM(i),i.onceAdded(),O(this,u).addToAnnotationStorage(i)}moveEditorInDOM(i){var f;(f=O(this,T))==null||f.moveElementInDOM(this.div,i.div,i.contentDiv,!0)}addOrRebuild(i){i.needsToBeRebuilt()?i.rebuild():this.add(i)}addANewEditor(i){const f=()=>{this.addOrRebuild(i)},M=()=>{i.remove()};this.addCommands({cmd:f,undo:M,mustExec:!0})}addUndoableEditor(i){const f=()=>{this.addOrRebuild(i)},M=()=>{i.remove()};this.addCommands({cmd:f,undo:M,mustExec:!1})}getNextId(){return O(this,u).getId()}deserialize(i){switch(i.annotationType){case o.AnnotationEditorType.FREETEXT:return D.FreeTextEditor.deserialize(i,this,O(this,u));case o.AnnotationEditorType.INK:return j.InkEditor.deserialize(i,this,O(this,u))}return null}setSelected(i){O(this,u).setSelected(i)}toggleSelected(i){O(this,u).toggleSelected(i)}isSelected(i){return O(this,u).isSelected(i)}unselect(i){O(this,u).unselect(i)}pointerup(i){const{isMac:f}=o.FeatureTest.platform;if(!(i.button!==0||i.ctrlKey&&f)&&i.target===this.div&&O(this,g)){if(ge(this,g,!1),!O(this,_)){ge(this,_,!0);return}he(this,s,vt).call(this,i)}}pointerdown(i){const{isMac:f}=o.FeatureTest.platform;if(i.button!==0||i.ctrlKey&&f||i.target!==this.div)return;ge(this,g,!0);const M=O(this,u).getActive();ge(this,_,!M||M.isEmpty())}drop(i){const f=i.dataTransfer.getData("text/plain"),M=O(this,u).getEditor(f);if(!M)return;i.preventDefault(),i.dataTransfer.dropEffect="move",he(this,h,_t).call(this,M);const P=this.div.getBoundingClientRect(),B=i.clientX-P.x,J=i.clientY-P.y;M.translate(B-M.startX,J-M.startY),this.moveEditorInDOM(M),M.div.focus()}dragover(i){i.preventDefault()}destroy(){var i,f;((i=O(this,u).getActive())==null?void 0:i.parent)===this&&O(this,u).setActiveEditor(null);for(const M of O(this,S).values())(f=O(this,T))==null||f.removePointerInTextLayer(M.contentDiv),M.setParent(null),M.isAttachedToDOM=!1,M.div.remove();this.div=null,O(this,S).clear(),O(this,u).removeLayer(this)}render({viewport:i}){this.viewport=i,(0,re.setLayerDimensions)(this.div,i),(0,A.bindEvents)(this,this.div,["dragover","drop"]);for(const f of O(this,u).getEditors(this.pageIndex))this.add(f);this.updateMode()}update({viewport:i}){O(this,u).commitOrRemove(),this.viewport=i,(0,re.setLayerDimensions)(this.div,{rotation:i.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:i,pageHeight:f}=this.viewport.rawDims;return[i,f]}};let R=t;T=new WeakMap,_=new WeakMap,F=new WeakMap,k=new WeakMap,S=new WeakMap,g=new WeakMap,b=new WeakMap,u=new WeakMap,h=new WeakSet,_t=function(i){var f;i.parent!==this&&(this.attach(i),(f=i.parent)==null||f.detach(i),i.setParent(this),i.div&&i.isAttachedToDOM&&(i.div.remove(),this.div.append(i.div)))},x=new WeakSet,jt=function(i){switch(O(this,u).getMode()){case o.AnnotationEditorType.FREETEXT:return new D.FreeTextEditor(i);case o.AnnotationEditorType.INK:return new j.InkEditor(i)}return null},s=new WeakSet,vt=function(i){const f=this.getNextId(),M=he(this,x,jt).call(this,{parent:this,id:f,x:i.offsetX,y:i.offsetY,uiManager:O(this,u)});return M&&this.add(M),M},r=new WeakSet,bt=function(){ge(this,b,!0);for(const i of O(this,S).values())i.isEmpty()&&i.remove();ge(this,b,!1)},De(R,"_initialized",!1),a.AnnotationEditorLayer=R},(l,a,m)=>{var re,R,T,_,F,k,S,g,b,u,Bt,I,Wt,E,Ht,c,At;Object.defineProperty(a,"__esModule",{value:!0}),a.FreeTextEditor=void 0;var o=m(1),A=m(5),D=m(4);const e=class extends D.AnnotationEditor{constructor(i){super({...i,name:"freeTextEditor"});oe(this,u);oe(this,I);oe(this,E);oe(this,c);oe(this,re,this.editorDivBlur.bind(this));oe(this,R,this.editorDivFocus.bind(this));oe(this,T,this.editorDivInput.bind(this));oe(this,_,this.editorDivKeydown.bind(this));oe(this,F,void 0);oe(this,k,"");oe(this,S,`${this.id}-editor`);oe(this,g,!1);oe(this,b,void 0);ge(this,F,i.color||e._defaultColor||D.AnnotationEditor._defaultLineColor),ge(this,b,i.fontSize||e._defaultFontSize)}static initialize(i){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(M=>[M,i.get(M)]));const f=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(f.getPropertyValue("--freetext-padding"))}static updateDefaultParams(i,f){switch(i){case o.AnnotationEditorParamsType.FREETEXT_SIZE:e._defaultFontSize=f;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:e._defaultColor=f;break}}updateParams(i,f){switch(i){case o.AnnotationEditorParamsType.FREETEXT_SIZE:he(this,u,Bt).call(this,f);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:he(this,I,Wt).call(this,f);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,e._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,e._defaultColor||D.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,O(this,b)],[o.AnnotationEditorParamsType.FREETEXT_COLOR,O(this,F)]]}getInitialTranslation(){const i=this.parentScale;return[-e._internalPadding*i,-(e._internalPadding+O(this,b))*i]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",O(this,_)),this.editorDiv.addEventListener("focus",O(this,R)),this.editorDiv.addEventListener("blur",O(this,re)),this.editorDiv.addEventListener("input",O(this,T)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",O(this,S)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",O(this,_)),this.editorDiv.removeEventListener("focus",O(this,R)),this.editorDiv.removeEventListener("blur",O(this,re)),this.editorDiv.removeEventListener("input",O(this,T)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(i){super.focusin(i),i.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),O(this,g)||(ge(this,g,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),ge(this,k,he(this,E,Ht).call(this).trimEnd()),he(this,c,At).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(i){this.enableEditMode(),this.editorDiv.focus()}keydown(i){i.target===this.div&&i.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(i){e._keyboardManager.exec(this,i)}editorDivFocus(i){this.isEditing=!0}editorDivBlur(i){this.isEditing=!1}editorDivInput(i){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let i,f;this.width&&(i=this.x,f=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",O(this,S)),this.enableEditing(),e._l10nPromise.get("editor_free_text2_aria_label").then(P=>{var B;return(B=this.editorDiv)==null?void 0:B.setAttribute("aria-label",P)}),e._l10nPromise.get("free_text2_default_content").then(P=>{var B;return(B=this.editorDiv)==null?void 0:B.setAttribute("default-content",P)}),this.editorDiv.contentEditable=!0;const{style:M}=this.editorDiv;if(M.fontSize=`calc(${O(this,b)}px * var(--scale-factor))`,M.color=O(this,F),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,A.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[P,B]=this.parentDimensions;this.setAt(i*P,f*B,this.width*P,this.height*B);for(const J of O(this,k).split(`
`)){const H=document.createElement("div");H.append(J?document.createTextNode(J):document.createElement("br")),this.editorDiv.append(H)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(i,f,M){const P=super.deserialize(i,f,M);return ge(P,b,i.fontSize),ge(P,F,o.Util.makeHexColor(...i.color)),ge(P,k,i.value),P}serialize(){if(this.isEmpty())return null;const i=e._internalPadding*this.parentScale,f=this.getRect(i,i),M=D.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:O(this,F));return{annotationType:o.AnnotationEditorType.FREETEXT,color:M,fontSize:O(this,b),value:O(this,k),pageIndex:this.pageIndex,rect:f,rotation:this.rotation}}};let j=e;re=new WeakMap,R=new WeakMap,T=new WeakMap,_=new WeakMap,F=new WeakMap,k=new WeakMap,S=new WeakMap,g=new WeakMap,b=new WeakMap,u=new WeakSet,Bt=function(i){const f=P=>{this.editorDiv.style.fontSize=`calc(${P}px * var(--scale-factor))`,this.translate(0,-(P-O(this,b))*this.parentScale),ge(this,b,P),he(this,c,At).call(this)},M=O(this,b);this.addCommands({cmd:()=>{f(i)},undo:()=>{f(M)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},I=new WeakSet,Wt=function(i){const f=O(this,F);this.addCommands({cmd:()=>{ge(this,F,this.editorDiv.style.color=i)},undo:()=>{ge(this,F,this.editorDiv.style.color=f)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},E=new WeakSet,Ht=function(){const i=this.editorDiv.getElementsByTagName("div");if(i.length===0)return this.editorDiv.innerText;const f=[];for(const M of i)f.push(M.innerText.replace(/\r\n?|\n/,""));return f.join(`
`)},c=new WeakSet,At=function(){const[i,f]=this.parentDimensions;let M;if(this.isAttachedToDOM)M=this.div.getBoundingClientRect();else{const{currentLayer:P,div:B}=this,J=B.style.display;B.style.display="hidden",P.div.append(this.div),M=B.getBoundingClientRect(),B.remove(),B.style.display=J}this.width=M.width/i,this.height=M.height/f},De(j,"_freeTextDefaultContent",""),De(j,"_l10nPromise"),De(j,"_internalPadding",0),De(j,"_defaultColor",null),De(j,"_defaultFontSize",10),De(j,"_keyboardManager",new A.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.prototype.commitOrRemove]])),De(j,"_type","freetext"),a.FreeTextEditor=j},(l,a,m)=>{var T,_,F,k,S,g,b,u,h,I,x,E,s,c,r,qt,t,Vt,i,Gt,M,$t,B,Pt,H,zt,z,Kt,V,Xt,y,Ve,w,St,W,st,ee,ot,ie,Xe,q,Et,v,lt,N,Ot,Q,Yt,le,Jt,de,Qt,fe,Tt,me,ct,be,Ye,G,wt;Object.defineProperty(a,"__esModule",{value:!0}),a.InkEditor=void 0,Object.defineProperty(a,"fitCurve",{enumerable:!0,get:function(){return D.fitCurve}});var o=m(1),A=m(4),D=m(30),j=m(5);const re=16,ne=class extends A.AnnotationEditor{constructor(se){super({...se,name:"inkEditor"});oe(this,r);oe(this,t);oe(this,i);oe(this,M);oe(this,B);oe(this,H);oe(this,z);oe(this,V);oe(this,y);oe(this,w);oe(this,W);oe(this,ee);oe(this,ie);oe(this,q);oe(this,v);oe(this,Q);oe(this,le);oe(this,de);oe(this,fe);oe(this,me);oe(this,be);oe(this,G);oe(this,T,0);oe(this,_,0);oe(this,F,0);oe(this,k,this.canvasPointermove.bind(this));oe(this,S,this.canvasPointerleave.bind(this));oe(this,g,this.canvasPointerup.bind(this));oe(this,b,this.canvasPointerdown.bind(this));oe(this,u,!1);oe(this,h,!1);oe(this,I,null);oe(this,x,null);oe(this,E,0);oe(this,s,0);oe(this,c,null);this.color=se.color||null,this.thickness=se.thickness||null,this.opacity=se.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(se){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(pe=>[pe,se.get(pe)]))}static updateDefaultParams(se,pe){switch(se){case o.AnnotationEditorParamsType.INK_THICKNESS:ne._defaultThickness=pe;break;case o.AnnotationEditorParamsType.INK_COLOR:ne._defaultColor=pe;break;case o.AnnotationEditorParamsType.INK_OPACITY:ne._defaultOpacity=pe/100;break}}updateParams(se,pe){switch(se){case o.AnnotationEditorParamsType.INK_THICKNESS:he(this,r,qt).call(this,pe);break;case o.AnnotationEditorParamsType.INK_COLOR:he(this,t,Vt).call(this,pe);break;case o.AnnotationEditorParamsType.INK_OPACITY:he(this,i,Gt).call(this,pe);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,ne._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,ne._defaultColor||A.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(ne._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ne._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||ne._defaultColor||A.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ne._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(he(this,W,st).call(this),he(this,ee,ot).call(this)),this.isAttachedToDOM||(this.parent.add(this),he(this,ie,Xe).call(this)),he(this,be,Ye).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,O(this,x).disconnect(),ge(this,x,null),super.remove())}setParent(se){!this.parent&&se?this._uiManager.removeShouldRescale(this):this.parent&&se===null&&this._uiManager.addShouldRescale(this),super.setParent(se)}onScaleChanging(){const[se,pe]=this.parentDimensions,Ae=this.width*se,Pe=this.height*pe;this.setDimensions(Ae,Pe)}enableEditMode(){O(this,u)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",O(this,b)),this.canvas.addEventListener("pointerup",O(this,g)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",O(this,b)),this.canvas.removeEventListener("pointerup",O(this,g)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){O(this,u)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ge(this,u,!0),this.div.classList.add("disabled"),he(this,be,Ye).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(se){super.focusin(se),this.enableEditMode()}canvasPointerdown(se){se.button!==0||!this.isInEditMode()||O(this,u)||(this.setInForeground(),se.type!=="mouse"&&this.div.focus(),se.stopPropagation(),this.canvas.addEventListener("pointerleave",O(this,S)),this.canvas.addEventListener("pointermove",O(this,k)),he(this,H,zt).call(this,se.offsetX,se.offsetY))}canvasPointermove(se){se.stopPropagation(),he(this,z,Kt).call(this,se.offsetX,se.offsetY)}canvasPointerup(se){se.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(se.stopPropagation(),he(this,w,St).call(this,se),this.setInBackground())}canvasPointerleave(se){he(this,w,St).call(this,se),this.setInBackground()}render(){if(this.div)return this.div;let se,pe;this.width&&(se=this.x,pe=this.y),super.render(),ne._l10nPromise.get("editor_ink2_aria_label").then(Ce=>{var Te;return(Te=this.div)==null?void 0:Te.setAttribute("aria-label",Ce)});const[Ae,Pe,ke,Re]=he(this,M,$t).call(this);if(this.setAt(Ae,Pe,0,0),this.setDims(ke,Re),he(this,W,st).call(this),this.width){const[Ce,Te]=this.parentDimensions;this.setAt(se*Ce,pe*Te,this.width*Ce,this.height*Te),ge(this,h,!0),he(this,ie,Xe).call(this),this.setDims(this.width*Ce,this.height*Te),he(this,y,Ve).call(this),he(this,G,wt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return he(this,ee,ot).call(this),this.div}setDimensions(se,pe){const Ae=Math.round(se),Pe=Math.round(pe);if(O(this,E)===Ae&&O(this,s)===Pe)return;ge(this,E,Ae),ge(this,s,Pe),this.canvas.style.visibility="hidden",O(this,T)&&Math.abs(O(this,T)-se/pe)>.01&&(pe=Math.ceil(se/O(this,T)),this.setDims(se,pe));const[ke,Re]=this.parentDimensions;this.width=se/ke,this.height=pe/Re,O(this,u)&&he(this,q,Et).call(this,se,pe),he(this,ie,Xe).call(this),he(this,y,Ve).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(se,pe,Ae){var xe,Le;const Pe=super.deserialize(se,pe,Ae);Pe.thickness=se.thickness,Pe.color=o.Util.makeHexColor(...se.color),Pe.opacity=se.opacity;const[ke,Re]=Pe.pageDimensions,Ce=Pe.width*ke,Te=Pe.height*Re,Me=Pe.parentScale,Oe=se.thickness/2;ge(Pe,T,Ce/Te),ge(Pe,u,!0),ge(Pe,E,Math.round(Ce)),ge(Pe,s,Math.round(Te));for(const{bezier:Fe}of se.paths){const Ue=[];Pe.paths.push(Ue);let Ie=Me*(Fe[0]-Oe),je=Me*(Te-Fe[1]-Oe);for(let Be=2,Ze=Fe.length;Be<Ze;Be+=6){const et=Me*(Fe[Be]-Oe),tt=Me*(Te-Fe[Be+1]-Oe),nt=Me*(Fe[Be+2]-Oe),rt=Me*(Te-Fe[Be+3]-Oe),kt=Me*(Fe[Be+4]-Oe),Mt=Me*(Te-Fe[Be+5]-Oe);Ue.push([[Ie,je],[et,tt],[nt,rt],[kt,Mt]]),Ie=kt,je=Mt}const He=he(this,N,Ot).call(this,Ue);Pe.bezierPath2D.push(He)}const Ne=he(xe=Pe,fe,Tt).call(xe);return ge(Pe,F,Math.max(re,Ne[2]-Ne[0])),ge(Pe,_,Math.max(re,Ne[3]-Ne[1])),he(Le=Pe,q,Et).call(Le,Ce,Te),Pe}serialize(){if(this.isEmpty())return null;const se=this.getRect(0,0),pe=this.rotation%180===0?se[3]-se[1]:se[2]-se[0],Ae=A.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:Ae,thickness:this.thickness,opacity:this.opacity,paths:he(this,Q,Yt).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,pe),pageIndex:this.pageIndex,rect:se,rotation:this.rotation}}};let R=ne;T=new WeakMap,_=new WeakMap,F=new WeakMap,k=new WeakMap,S=new WeakMap,g=new WeakMap,b=new WeakMap,u=new WeakMap,h=new WeakMap,I=new WeakMap,x=new WeakMap,E=new WeakMap,s=new WeakMap,c=new WeakMap,r=new WeakSet,qt=function(se){const pe=this.thickness;this.addCommands({cmd:()=>{this.thickness=se,he(this,be,Ye).call(this)},undo:()=>{this.thickness=pe,he(this,be,Ye).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},t=new WeakSet,Vt=function(se){const pe=this.color;this.addCommands({cmd:()=>{this.color=se,he(this,y,Ve).call(this)},undo:()=>{this.color=pe,he(this,y,Ve).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},i=new WeakSet,Gt=function(se){se/=100;const pe=this.opacity;this.addCommands({cmd:()=>{this.opacity=se,he(this,y,Ve).call(this)},undo:()=>{this.opacity=pe,he(this,y,Ve).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},M=new WeakSet,$t=function(){const{parentRotation:se,parentDimensions:[pe,Ae]}=this;switch(se){case 90:return[0,Ae,Ae,pe];case 180:return[pe,Ae,pe,Ae];case 270:return[pe,0,Ae,pe];default:return[0,0,pe,Ae]}},B=new WeakSet,Pt=function(){const{ctx:se,color:pe,opacity:Ae,thickness:Pe,parentScale:ke,scaleFactor:Re}=this;se.lineWidth=Pe*ke/Re,se.lineCap="round",se.lineJoin="round",se.miterLimit=10,se.strokeStyle=`${pe}${(0,j.opacityToHex)(Ae)}`},H=new WeakSet,zt=function(se,pe){this.isEditing=!0,O(this,h)||(ge(this,h,!0),he(this,ie,Xe).call(this),this.thickness||(this.thickness=ne._defaultThickness),this.color||(this.color=ne._defaultColor||A.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ne._defaultOpacity)),this.currentPath.push([se,pe]),ge(this,I,null),he(this,B,Pt).call(this),this.ctx.beginPath(),this.ctx.moveTo(se,pe),ge(this,c,()=>{O(this,c)&&(O(this,I)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):he(this,y,Ve).call(this),this.ctx.lineTo(...O(this,I)),ge(this,I,null),this.ctx.stroke()),window.requestAnimationFrame(O(this,c)))}),window.requestAnimationFrame(O(this,c))},z=new WeakSet,Kt=function(se,pe){const[Ae,Pe]=this.currentPath.at(-1);se===Ae&&pe===Pe||(this.currentPath.push([se,pe]),ge(this,I,[se,pe]))},V=new WeakSet,Xt=function(se,pe){var Me;this.ctx.closePath(),ge(this,c,null),se=Math.min(Math.max(se,0),this.canvas.width),pe=Math.min(Math.max(pe,0),this.canvas.height);const[Ae,Pe]=this.currentPath.at(-1);(se!==Ae||pe!==Pe)&&this.currentPath.push([se,pe]);let ke;if(this.currentPath.length!==1)ke=(0,D.fitCurve)(this.currentPath,30,null);else{const Oe=[se,pe];ke=[[Oe,Oe.slice(),Oe.slice(),Oe]]}const Re=he(Me=ne,N,Ot).call(Me,ke);this.currentPath.length=0;const Ce=()=>{this.paths.push(ke),this.bezierPath2D.push(Re),this.rebuild()},Te=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(he(this,W,st).call(this),he(this,ee,ot).call(this)),he(this,be,Ye).call(this))};this.addCommands({cmd:Ce,undo:Te,mustExec:!0})},y=new WeakSet,Ve=function(){if(this.isEmpty()){he(this,v,lt).call(this);return}he(this,B,Pt).call(this);const{canvas:se,ctx:pe}=this;pe.setTransform(1,0,0,1,0,0),pe.clearRect(0,0,se.width,se.height),he(this,v,lt).call(this);for(const Ae of this.bezierPath2D)pe.stroke(Ae)},w=new WeakSet,St=function(se){he(this,V,Xt).call(this,se.offsetX,se.offsetY),this.canvas.removeEventListener("pointerleave",O(this,S)),this.canvas.removeEventListener("pointermove",O(this,k)),this.addToAnnotationStorage()},W=new WeakSet,st=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",ne._l10nPromise.get("editor_ink_canvas_aria_label").then(se=>{var pe;return(pe=this.canvas)==null?void 0:pe.setAttribute("aria-label",se)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ee=new WeakSet,ot=function(){ge(this,x,new ResizeObserver(se=>{const pe=se[0].contentRect;pe.width&&pe.height&&this.setDimensions(pe.width,pe.height)})),O(this,x).observe(this.div)},ie=new WeakSet,Xe=function(){if(!O(this,h))return;const[se,pe]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*se),this.canvas.height=Math.ceil(this.height*pe),he(this,v,lt).call(this)},q=new WeakSet,Et=function(se,pe){const Ae=he(this,me,ct).call(this),Pe=(se-Ae)/O(this,F),ke=(pe-Ae)/O(this,_);this.scaleFactor=Math.min(Pe,ke)},v=new WeakSet,lt=function(){const se=he(this,me,ct).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+se,this.translationY*this.scaleFactor+se)},N=new WeakSet,Ot=function(se){const pe=new Path2D;for(let Ae=0,Pe=se.length;Ae<Pe;Ae++){const[ke,Re,Ce,Te]=se[Ae];Ae===0&&pe.moveTo(...ke),pe.bezierCurveTo(Re[0],Re[1],Ce[0],Ce[1],Te[0],Te[1])}return pe},Q=new WeakSet,Yt=function(se,pe,Ae,Pe){const Re=[],Ce=this.thickness/2;let Te,Me;for(const Oe of this.paths){Te=[],Me=[];for(let Ne=0,xe=Oe.length;Ne<xe;Ne++){const[Le,Fe,Ue,Ie]=Oe[Ne],je=se*(Le[0]+pe)+Ce,He=Pe-se*(Le[1]+Ae)-Ce,Be=se*(Fe[0]+pe)+Ce,Ze=Pe-se*(Fe[1]+Ae)-Ce,et=se*(Ue[0]+pe)+Ce,tt=Pe-se*(Ue[1]+Ae)-Ce,nt=se*(Ie[0]+pe)+Ce,rt=Pe-se*(Ie[1]+Ae)-Ce;Ne===0&&(Te.push(je,He),Me.push(je,He)),Te.push(Be,Ze,et,tt,nt,rt),he(this,le,Jt).call(this,je,He,Be,Ze,et,tt,nt,rt,4,Me)}Re.push({bezier:Te,points:Me})}return Re},le=new WeakSet,Jt=function(se,pe,Ae,Pe,ke,Re,Ce,Te,Me,Oe){if(he(this,de,Qt).call(this,se,pe,Ae,Pe,ke,Re,Ce,Te)){Oe.push(Ce,Te);return}for(let Ne=1;Ne<Me-1;Ne++){const xe=Ne/Me,Le=1-xe;let Fe=xe*se+Le*Ae,Ue=xe*pe+Le*Pe,Ie=xe*Ae+Le*ke,je=xe*Pe+Le*Re;const He=xe*ke+Le*Ce,Be=xe*Re+Le*Te;Fe=xe*Fe+Le*Ie,Ue=xe*Ue+Le*je,Ie=xe*Ie+Le*He,je=xe*je+Le*Be,Fe=xe*Fe+Le*Ie,Ue=xe*Ue+Le*je,Oe.push(Fe,Ue)}Oe.push(Ce,Te)},de=new WeakSet,Qt=function(se,pe,Ae,Pe,ke,Re,Ce,Te){const Oe=(3*Ae-2*se-Ce)**2,Ne=(3*Pe-2*pe-Te)**2,xe=(3*ke-se-2*Ce)**2,Le=(3*Re-pe-2*Te)**2;return Math.max(Oe,xe)+Math.max(Ne,Le)<=10},fe=new WeakSet,Tt=function(){let se=1/0,pe=-1/0,Ae=1/0,Pe=-1/0;for(const ke of this.paths)for(const[Re,Ce,Te,Me]of ke){const Oe=o.Util.bezierBoundingBox(...Re,...Ce,...Te,...Me);se=Math.min(se,Oe[0]),Ae=Math.min(Ae,Oe[1]),pe=Math.max(pe,Oe[2]),Pe=Math.max(Pe,Oe[3])}return[se,Ae,pe,Pe]},me=new WeakSet,ct=function(){return O(this,u)?Math.ceil(this.thickness*this.parentScale):0},be=new WeakSet,Ye=function(se=!1){if(this.isEmpty())return;if(!O(this,u)){he(this,y,Ve).call(this);return}const pe=he(this,fe,Tt).call(this),Ae=he(this,me,ct).call(this);ge(this,F,Math.max(re,pe[2]-pe[0])),ge(this,_,Math.max(re,pe[3]-pe[1]));const Pe=Math.ceil(Ae+O(this,F)*this.scaleFactor),ke=Math.ceil(Ae+O(this,_)*this.scaleFactor),[Re,Ce]=this.parentDimensions;this.width=Pe/Re,this.height=ke/Ce,ge(this,T,Pe/ke),he(this,G,wt).call(this);const Te=this.translationX,Me=this.translationY;this.translationX=-pe[0],this.translationY=-pe[1],he(this,ie,Xe).call(this),he(this,y,Ve).call(this),ge(this,E,Pe),ge(this,s,ke),this.setDims(Pe,ke);const Oe=se?Ae/this.scaleFactor/2:0;this.translate(Te-this.translationX-Oe,Me-this.translationY-Oe)},G=new WeakSet,wt=function(){const{style:se}=this.div;O(this,T)>=1?(se.minHeight=`${re}px`,se.minWidth=`${Math.round(O(this,T)*re)}px`):(se.minWidth=`${re}px`,se.minHeight=`${Math.round(re/O(this,T))}px`)},oe(R,N),De(R,"_defaultColor",null),De(R,"_defaultOpacity",1),De(R,"_defaultThickness",1),De(R,"_l10nPromise"),De(R,"_type","ink"),a.InkEditor=R},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.fitCurve=void 0;const o=m(31);a.fitCurve=o},l=>{function a(g,b,u){if(!Array.isArray(g))throw new TypeError("First argument should be an array");if(g.forEach(E=>{if(!Array.isArray(E)||E.some(s=>typeof s!="number")||E.length!==g[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),g=g.filter((E,s)=>s===0||!E.every((c,r)=>c===g[s-1][r])),g.length<2)return[];const h=g.length,I=F(g[1],g[0]),x=F(g[h-2],g[h-1]);return m(g,I,x,b,u)}function m(g,b,u,h,I){var E,s,c,r,e,t,n,i,f,M,P,B,J;if(g.length===2)return B=k.vectorLen(k.subtract(g[0],g[1]))/3,E=[g[0],k.addArrays(g[0],k.mulItems(b,B)),k.addArrays(g[1],k.mulItems(u,B)),g[1]],[E];if(s=re(g),[E,r,t]=o(g,s,s,b,u,I),r===0||r<h)return[E];if(r<h*h)for(c=s,e=r,n=t,J=0;J<20;J++){if(c=D(E,g,c),[E,r,t]=o(g,s,c,b,u,I),r<h)return[E];if(t===n){let H=r/e;if(H>.9999&&H<1.0001)break}e=r,n=t}return P=[],i=k.subtract(g[t-1],g[t+1]),i.every(H=>H===0)&&(i=k.subtract(g[t-1],g[t]),[i[0],i[1]]=[-i[1],i[0]]),f=k.normalize(i),M=k.mulItems(f,-1),P=P.concat(m(g.slice(0,t+1),b,f,h,I)),P=P.concat(m(g.slice(t),M,u,h,I)),P}function o(g,b,u,h,I,x){var E,s,c;return E=A(g,u,h,I),[s,c]=R(g,E,b),x&&x({bez:E,points:g,params:b,maxErr:s,maxPoint:c}),[E,s,c]}function A(g,b,u,h){var I,x,E,s,c,r,e,t,n,i,f,M,P,B,J,H,U,z=g[0],K=g[g.length-1];for(I=[z,null,null,K],x=k.zeros_Xx2x2(b.length),P=0,B=b.length;P<B;P++)H=b[P],U=1-H,E=x[P],E[0]=k.mulItems(u,3*H*(U*U)),E[1]=k.mulItems(h,3*U*(H*H));for(s=[[0,0],[0,0]],c=[0,0],P=0,B=g.length;P<B;P++)H=b[P],E=x[P],s[0][0]+=k.dot(E[0],E[0]),s[0][1]+=k.dot(E[0],E[1]),s[1][0]+=k.dot(E[0],E[1]),s[1][1]+=k.dot(E[1],E[1]),J=k.subtract(g[P],S.q([z,z,K,K],H)),c[0]+=k.dot(E[0],J),c[1]+=k.dot(E[1],J);return r=s[0][0]*s[1][1]-s[1][0]*s[0][1],e=s[0][0]*c[1]-s[1][0]*c[0],t=c[0]*s[1][1]-c[1]*s[0][1],n=r===0?0:t/r,i=r===0?0:e/r,M=k.vectorLen(k.subtract(z,K)),f=1e-6*M,n<f||i<f?(I[1]=k.addArrays(z,k.mulItems(u,M/3)),I[2]=k.addArrays(K,k.mulItems(h,M/3))):(I[1]=k.addArrays(z,k.mulItems(u,n)),I[2]=k.addArrays(K,k.mulItems(h,i))),I}function D(g,b,u){return u.map((h,I)=>j(g,b[I],h))}function j(g,b,u){var h=k.subtract(S.q(g,u),b),I=S.qprime(g,u),x=k.mulMatrix(h,I),E=k.sum(k.squareItems(I))+2*k.mulMatrix(h,S.qprimeprime(g,u));return E===0?u:u-x/E}function re(g){var b=[],u,h,I;return g.forEach((x,E)=>{u=E?h+k.vectorLen(k.subtract(x,I)):0,b.push(u),h=u,I=x}),b=b.map(x=>x/h),b}function R(g,b,u){var h,I,x,E,s,c,r,e;I=0,x=Math.floor(g.length/2);const t=T(b,10);for(s=0,c=g.length;s<c;s++)r=g[s],e=_(b,u[s],t,10),E=k.subtract(S.q(b,e),r),h=E[0]*E[0]+E[1]*E[1],h>I&&(I=h,x=s);return[I,x]}var T=function(g,b){for(var u,h=[0],I=g[0],x=0,E=1;E<=b;E++)u=S.q(g,E/b),x+=k.vectorLen(k.subtract(u,I)),h.push(x),I=u;return h=h.map(s=>s/x),h};function _(g,b,u,h){if(b<0)return 0;if(b>1)return 1;for(var I,x,E,s,c,r=1;r<=h;r++)if(b<=u[r]){s=(r-1)/h,E=r/h,x=u[r-1],I=u[r],c=(b-x)/(I-x)*(E-s)+s;break}return c}function F(g,b){return k.normalize(k.subtract(g,b))}class k{static zeros_Xx2x2(b){for(var u=[];b--;)u.push([0,0]);return u}static mulItems(b,u){return b.map(h=>h*u)}static mulMatrix(b,u){return b.reduce((h,I,x)=>h+I*u[x],0)}static subtract(b,u){return b.map((h,I)=>h-u[I])}static addArrays(b,u){return b.map((h,I)=>h+u[I])}static addItems(b,u){return b.map(h=>h+u)}static sum(b){return b.reduce((u,h)=>u+h)}static dot(b,u){return k.mulMatrix(b,u)}static vectorLen(b){return Math.hypot(...b)}static divItems(b,u){return b.map(h=>h/u)}static squareItems(b){return b.map(u=>u*u)}static normalize(b){return this.divItems(b,this.vectorLen(b))}}class S{static q(b,u){var h=1-u,I=k.mulItems(b[0],h*h*h),x=k.mulItems(b[1],3*h*h*u),E=k.mulItems(b[2],3*h*u*u),s=k.mulItems(b[3],u*u*u);return k.addArrays(k.addArrays(I,x),k.addArrays(E,s))}static qprime(b,u){var h=1-u,I=k.mulItems(k.subtract(b[1],b[0]),3*h*h),x=k.mulItems(k.subtract(b[2],b[1]),6*h*u),E=k.mulItems(k.subtract(b[3],b[2]),3*u*u);return k.addArrays(k.addArrays(I,x),E)}static qprimeprime(b,u){return k.addArrays(k.mulItems(k.addArrays(k.subtract(b[2],k.mulItems(b[1],2)),b[0]),6*(1-u)),k.mulItems(k.addArrays(k.subtract(b[3],k.mulItems(b[2],2)),b[1]),6*u))}}l.exports=a,l.exports.fitCubic=m,l.exports.createTangent=F},(l,a,m)=>{var y,$e,w,Zt,Z,Ct,ae,Rt;Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationLayer=void 0;var o=m(1),A=m(6),D=m(3),j=m(33),re=m(34);const R=1e3,T=9,_=new WeakSet;function F(q){return{width:q[2]-q[0],height:q[3]-q[1]}}class k{static create(d){switch(d.data.annotationType){case o.AnnotationType.LINK:return new g(d);case o.AnnotationType.TEXT:return new b(d);case o.AnnotationType.WIDGET:switch(d.data.fieldType){case"Tx":return new h(d);case"Btn":return d.data.radioButton?new x(d):d.data.checkBox?new I(d):new E(d);case"Ch":return new s(d)}return new u(d);case o.AnnotationType.POPUP:return new c(d);case o.AnnotationType.FREETEXT:return new e(d);case o.AnnotationType.LINE:return new t(d);case o.AnnotationType.SQUARE:return new n(d);case o.AnnotationType.CIRCLE:return new i(d);case o.AnnotationType.POLYLINE:return new f(d);case o.AnnotationType.CARET:return new P(d);case o.AnnotationType.INK:return new B(d);case o.AnnotationType.POLYGON:return new M(d);case o.AnnotationType.HIGHLIGHT:return new J(d);case o.AnnotationType.UNDERLINE:return new H(d);case o.AnnotationType.SQUIGGLY:return new U(d);case o.AnnotationType.STRIKEOUT:return new z(d);case o.AnnotationType.STAMP:return new K(d);case o.AnnotationType.FILEATTACHMENT:return new V(d);default:return new S(d)}}}class S{constructor(d,{isRenderable:v=!1,ignoreBorder:C=!1,createQuadrilaterals:N=!1}={}){this.isRenderable=v,this.data=d.data,this.layer=d.layer,this.page=d.page,this.viewport=d.viewport,this.linkService=d.linkService,this.downloadManager=d.downloadManager,this.imageResourcesPath=d.imageResourcesPath,this.renderForms=d.renderForms,this.svgFactory=d.svgFactory,this.annotationStorage=d.annotationStorage,this.enableScripting=d.enableScripting,this.hasJSActions=d.hasJSActions,this._fieldObjects=d.fieldObjects,v&&(this.container=this._createContainer(C)),N&&(this.quadrilaterals=this._createQuadrilaterals(C))}_createContainer(d=!1){const{data:v,page:C,viewport:N}=this,$=document.createElement("section");$.setAttribute("data-annotation-id",v.id),v.noRotate&&$.classList.add("norotate");const{pageWidth:Q,pageHeight:ce,pageX:le,pageY:ue}=N.rawDims,{width:de,height:ye}=F(v.rect),fe=o.Util.normalizeRect([v.rect[0],C.view[3]-v.rect[1]+C.view[1],v.rect[2],C.view[3]-v.rect[3]+C.view[1]]);if(!d&&v.borderStyle.width>0){$.style.borderWidth=`${v.borderStyle.width}px`;const me=v.borderStyle.horizontalCornerRadius,Se=v.borderStyle.verticalCornerRadius;if(me>0||Se>0){const we=`calc(${me}px * var(--scale-factor)) / calc(${Se}px * var(--scale-factor))`;$.style.borderRadius=we}else if(this instanceof x){const we=`calc(${de}px * var(--scale-factor)) / calc(${ye}px * var(--scale-factor))`;$.style.borderRadius=we}switch(v.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:$.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:$.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:$.style.borderBottomStyle="solid";break}const be=v.borderColor||null;be?$.style.borderColor=o.Util.makeHexColor(be[0]|0,be[1]|0,be[2]|0):$.style.borderWidth=0}$.style.left=`${100*(fe[0]-le)/Q}%`,$.style.top=`${100*(fe[1]-ue)/ce}%`;const{rotation:_e}=v;return v.hasOwnCanvas||_e===0?($.style.width=`${100*de/Q}%`,$.style.height=`${100*ye/ce}%`):this.setRotation(_e,$),$}setRotation(d,v=this.container){const{pageWidth:C,pageHeight:N}=this.viewport.rawDims,{width:$,height:Q}=F(this.data.rect);let ce,le;d%180===0?(ce=100*$/C,le=100*Q/N):(ce=100*Q/C,le=100*$/N),v.style.width=`${ce}%`,v.style.height=`${le}%`,v.setAttribute("data-main-rotation",(360-d)%360)}get _commonActions(){const d=(v,C,N)=>{const $=N.detail[v];N.target.style[C]=j.ColorConverters[`${$[0]}_HTML`]($.slice(1))};return(0,o.shadow)(this,"_commonActions",{display:v=>{const C=v.detail.display%2===1;this.container.style.visibility=C?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:C,print:v.detail.display===0||v.detail.display===3})},print:v=>{this.annotationStorage.setValue(this.data.id,{print:v.detail.print})},hidden:v=>{this.container.style.visibility=v.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:v.detail.hidden})},focus:v=>{setTimeout(()=>v.target.focus({preventScroll:!1}),0)},userName:v=>{v.target.title=v.detail.userName},readonly:v=>{v.detail.readonly?v.target.setAttribute("readonly",""):v.target.removeAttribute("readonly")},required:v=>{this._setRequired(v.target,v.detail.required)},bgColor:v=>{d("bgColor","backgroundColor",v)},fillColor:v=>{d("fillColor","backgroundColor",v)},fgColor:v=>{d("fgColor","color",v)},textColor:v=>{d("textColor","color",v)},borderColor:v=>{d("borderColor","borderColor",v)},strokeColor:v=>{d("strokeColor","borderColor",v)},rotation:v=>{const C=v.detail.rotation;this.setRotation(C),this.annotationStorage.setValue(this.data.id,{rotation:C})}})}_dispatchEventFromSandbox(d,v){const C=this._commonActions;for(const N of Object.keys(v.detail)){const $=d[N]||C[N];$==null||$(v)}}_setDefaultPropertiesFromJS(d){if(!this.enableScripting)return;const v=this.annotationStorage.getRawValue(this.data.id);if(!v)return;const C=this._commonActions;for(const[N,$]of Object.entries(v)){const Q=C[N];if(Q){const ce={detail:{[N]:$},target:d};Q(ce),delete v[N]}}}_createQuadrilaterals(d=!1){if(!this.data.quadPoints)return null;const v=[],C=this.data.rect;for(const N of this.data.quadPoints)this.data.rect=[N[2].x,N[2].y,N[1].x,N[1].y],v.push(this._createContainer(d));return this.data.rect=C,v}_createPopup(d,v){let C=this.container;this.quadrilaterals&&(d=d||this.quadrilaterals,C=this.quadrilaterals[0]),d||(d=document.createElement("div"),d.classList.add("popupTriggerArea"),C.append(d));const $=new r({container:C,trigger:d,color:v.color,titleObj:v.titleObj,modificationDate:v.modificationDate,contentsObj:v.contentsObj,richText:v.richText,hideWrapper:!0}).render();$.style.left="100%",C.append($)}_renderQuadrilaterals(d){for(const v of this.quadrilaterals)v.classList.add(d);return this.quadrilaterals}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(d,v=null){const C=[];if(this._fieldObjects){const N=this._fieldObjects[d];if(N)for(const{page:$,id:Q,exportValues:ce}of N){if($===-1||Q===v)continue;const le=typeof ce=="string"?ce:null,ue=document.querySelector(`[data-element-id="${Q}"]`);if(ue&&!_.has(ue)){(0,o.warn)(`_getElementsByName - element not allowed: ${Q}`);continue}C.push({id:Q,exportValue:le,domElement:ue})}return C}for(const N of document.getElementsByName(d)){const{exportValue:$}=N,Q=N.getAttribute("data-element-id");Q!==v&&_.has(N)&&C.push({id:Q,exportValue:$,domElement:N})}return C}}class g extends S{constructor(v,C=null){super(v,{isRenderable:!0,ignoreBorder:!!(C!=null&&C.ignoreBorder),createQuadrilaterals:!0});oe(this,y);oe(this,w);this.isTooltipOnly=v.data.isTooltipOnly}render(){const{data:v,linkService:C}=this,N=document.createElement("a");N.setAttribute("data-element-id",v.id);let $=!1;return v.url?(C.addLinkAttributes(N,v.url,v.newWindow),$=!0):v.action?(this._bindNamedAction(N,v.action),$=!0):v.attachment?(this._bindAttachment(N,v.attachment),$=!0):v.setOCGState?(he(this,w,Zt).call(this,N,v.setOCGState),$=!0):v.dest?(this._bindLink(N,v.dest),$=!0):(v.actions&&(v.actions.Action||v.actions["Mouse Up"]||v.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(N,v),$=!0),v.resetForm?(this._bindResetFormAction(N,v.resetForm),$=!0):this.isTooltipOnly&&!$&&(this._bindLink(N,""),$=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((Q,ce)=>{const le=ce===0?N:N.cloneNode();return Q.append(le),Q}):(this.container.classList.add("linkAnnotation"),$&&this.container.append(N),this.container)}_bindLink(v,C){v.href=this.linkService.getDestinationHash(C),v.onclick=()=>(C&&this.linkService.goToDestination(C),!1),(C||C==="")&&he(this,y,$e).call(this)}_bindNamedAction(v,C){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeNamedAction(C),!1),he(this,y,$e).call(this)}_bindAttachment(v,C){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>{var N;return(N=this.downloadManager)==null||N.openOrDownloadData(this.container,C.content,C.filename),!1},he(this,y,$e).call(this)}_bindJSAction(v,C){v.href=this.linkService.getAnchorUrl("");const N=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const $ of Object.keys(C.actions)){const Q=N.get($);Q&&(v[Q]=()=>{var ce;return(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C.id,name:$}}),!1})}v.onclick||(v.onclick=()=>!1),he(this,y,$e).call(this)}_bindResetFormAction(v,C){const N=v.onclick;if(N||(v.href=this.linkService.getAnchorUrl("")),he(this,y,$e).call(this),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),N||(v.onclick=()=>!1);return}v.onclick=()=>{var ye;N==null||N();const{fields:$,refs:Q,include:ce}=C,le=[];if($.length!==0||Q.length!==0){const fe=new Set(Q);for(const _e of $){const me=this._fieldObjects[_e]||[];for(const{id:Se}of me)fe.add(Se)}for(const _e of Object.values(this._fieldObjects))for(const me of _e)fe.has(me.id)===ce&&le.push(me)}else for(const fe of Object.values(this._fieldObjects))le.push(...fe);const ue=this.annotationStorage,de=[];for(const fe of le){const{id:_e}=fe;switch(de.push(_e),fe.type){case"text":{const Se=fe.defaultValue||"";ue.setValue(_e,{value:Se});break}case"checkbox":case"radiobutton":{const Se=fe.defaultValue===fe.exportValues;ue.setValue(_e,{value:Se});break}case"combobox":case"listbox":{const Se=fe.defaultValue||"";ue.setValue(_e,{value:Se});break}default:continue}const me=document.querySelector(`[data-element-id="${_e}"]`);if(me){if(!_.has(me)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${_e}`);continue}}else continue;me.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ye=this.linkService.eventBus)==null||ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:de,name:"ResetForm"}})),!1}}}y=new WeakSet,$e=function(){this.container.setAttribute("data-internal-link","")},w=new WeakSet,Zt=function(v,C){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeSetOCGState(C),!1),he(this,y,$e).call(this)};class b extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v})}render(){this.container.classList.add("textAnnotation");const d=document.createElement("img");return d.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",d.alt="[{{type}} Annotation]",d.dataset.l10nId="text_annotation_type",d.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(d,this.data),this.container.append(d),this.container}}class u extends S{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(d){const{isWin:v,isMac:C}=o.FeatureTest.platform;return v&&d.ctrlKey||C&&d.metaKey}_setEventListener(d,v,C,N){v.includes("mouse")?d.addEventListener(v,$=>{var Q;(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:C,value:N($),shift:$.shiftKey,modifier:this._getKeyModifier($)}})}):d.addEventListener(v,$=>{var Q;(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:C,value:N($)}})})}_setEventListeners(d,v,C){var N;for(const[$,Q]of v)(Q==="Action"||(N=this.data.actions)!=null&&N[Q])&&this._setEventListener(d,$,Q,C)}_setBackgroundColor(d){const v=this.data.backgroundColor||null;d.style.backgroundColor=v===null?"transparent":o.Util.makeHexColor(v[0],v[1],v[2])}_setTextStyle(d){const v=["left","center","right"],{fontColor:C}=this.data.defaultAppearanceData,N=this.data.defaultAppearanceData.fontSize||T,$=d.style;let Q;const ce=2,le=ue=>Math.round(10*ue)/10;if(this.data.multiLine){const ue=Math.abs(this.data.rect[3]-this.data.rect[1]-ce),de=Math.round(ue/(o.LINE_FACTOR*N))||1,ye=ue/de;Q=Math.min(N,le(ye/o.LINE_FACTOR))}else{const ue=Math.abs(this.data.rect[3]-this.data.rect[1]-ce);Q=Math.min(N,le(ue/o.LINE_FACTOR))}$.fontSize=`calc(${Q}px * var(--scale-factor))`,$.color=o.Util.makeHexColor(C[0],C[1],C[2]),this.data.textAlignment!==null&&($.textAlign=v[this.data.textAlignment])}_setRequired(d,v){v?d.setAttribute("required",!0):d.removeAttribute("required"),d.setAttribute("aria-required",v)}}class h extends u{constructor(d){const v=d.renderForms||!d.data.hasAppearance&&!!d.data.fieldValue;super(d,{isRenderable:v})}setPropertyOnSiblings(d,v,C,N){const $=this.annotationStorage;for(const Q of this._getElementsByName(d.name,d.id))Q.domElement&&(Q.domElement[v]=C),$.setValue(Q.id,{[N]:C})}render(){var N;const d=this.annotationStorage,v=this.data.id;this.container.classList.add("textWidgetAnnotation");let C=null;if(this.renderForms){const $=d.getValue(v,{value:this.data.fieldValue});let Q=$.formattedValue||$.value||"";const ce=d.getValue(v,{charLimit:this.data.maxLen}).charLimit;ce&&Q.length>ce&&(Q=Q.slice(0,ce));const le={userValue:Q,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(C=document.createElement("textarea"),C.textContent=Q,this.data.doNotScroll&&(C.style.overflowY="hidden")):(C=document.createElement("input"),C.type="text",C.setAttribute("value",Q),this.data.doNotScroll&&(C.style.overflowX="hidden")),_.add(C),C.setAttribute("data-element-id",v),C.disabled=this.data.readOnly,C.name=this.data.fieldName,C.tabIndex=R,this._setRequired(C,this.data.required),ce&&(C.maxLength=ce),C.addEventListener("input",de=>{d.setValue(v,{value:de.target.value}),this.setPropertyOnSiblings(C,"value",de.target.value,"value")}),C.addEventListener("resetform",de=>{const ye=this.data.defaultFieldValue??"";C.value=le.userValue=ye,le.formattedValue=null});let ue=de=>{const{formattedValue:ye}=le;ye!=null&&(de.target.value=ye),de.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){C.addEventListener("focus",ye=>{const{target:fe}=ye;le.userValue&&(fe.value=le.userValue),le.lastCommittedValue=fe.value,le.commitKey=1}),C.addEventListener("updatefromsandbox",ye=>{const fe={value(_e){le.userValue=_e.detail.value??"",d.setValue(v,{value:le.userValue.toString()}),_e.target.value=le.userValue},formattedValue(_e){const{formattedValue:me}=_e.detail;le.formattedValue=me,me!=null&&_e.target!==document.activeElement&&(_e.target.value=me),d.setValue(v,{formattedValue:me})},selRange(_e){_e.target.setSelectionRange(..._e.detail.selRange)},charLimit:_e=>{var we;const{charLimit:me}=_e.detail,{target:Se}=_e;if(me===0){Se.removeAttribute("maxLength");return}Se.setAttribute("maxLength",me);let be=le.userValue;!be||be.length<=me||(be=be.slice(0,me),Se.value=le.userValue=be,d.setValue(v,{value:be}),(we=this.linkService.eventBus)==null||we.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:be,willCommit:!0,commitKey:1,selStart:Se.selectionStart,selEnd:Se.selectionEnd}}))}};this._dispatchEventFromSandbox(fe,ye)}),C.addEventListener("keydown",ye=>{var me;le.commitKey=1;let fe=-1;if(ye.key==="Escape"?fe=0:ye.key==="Enter"&&!this.data.multiLine?fe=2:ye.key==="Tab"&&(le.commitKey=3),fe===-1)return;const{value:_e}=ye.target;le.lastCommittedValue!==_e&&(le.lastCommittedValue=_e,le.userValue=_e,(me=this.linkService.eventBus)==null||me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:_e,willCommit:!0,commitKey:fe,selStart:ye.target.selectionStart,selEnd:ye.target.selectionEnd}}))});const de=ue;ue=null,C.addEventListener("blur",ye=>{var _e;if(!ye.relatedTarget)return;const{value:fe}=ye.target;le.userValue=fe,le.lastCommittedValue!==fe&&((_e=this.linkService.eventBus)==null||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:fe,willCommit:!0,commitKey:le.commitKey,selStart:ye.target.selectionStart,selEnd:ye.target.selectionEnd}})),de(ye)}),(N=this.data.actions)!=null&&N.Keystroke&&C.addEventListener("beforeinput",ye=>{var te;le.lastCommittedValue=null;const{data:fe,target:_e}=ye,{value:me,selectionStart:Se,selectionEnd:be}=_e;let we=Se,G=be;switch(ye.inputType){case"deleteWordBackward":{const ne=me.substring(0,Se).match(/\w*[^\w]*$/);ne&&(we-=ne[0].length);break}case"deleteWordForward":{const ne=me.substring(Se).match(/^[^\w]*\w*/);ne&&(G+=ne[0].length);break}case"deleteContentBackward":Se===be&&(we-=1);break;case"deleteContentForward":Se===be&&(G+=1);break}ye.preventDefault(),(te=this.linkService.eventBus)==null||te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:me,change:fe||"",willCommit:!1,selStart:we,selEnd:G}})}),this._setEventListeners(C,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ye=>ye.target.value)}if(ue&&C.addEventListener("blur",ue),this.data.comb){const ye=(this.data.rect[2]-this.data.rect[0])/ce;C.classList.add("comb"),C.style.letterSpacing=`calc(${ye}px * var(--scale-factor) - 1ch)`}}else C=document.createElement("div"),C.textContent=this.data.fieldValue,C.style.verticalAlign="middle",C.style.display="table-cell";return this._setTextStyle(C),this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class I extends u{constructor(d){super(d,{isRenderable:d.renderForms})}render(){const d=this.annotationStorage,v=this.data,C=v.id;let N=d.getValue(C,{value:v.exportValue===v.fieldValue}).value;typeof N=="string"&&(N=N!=="Off",d.setValue(C,{value:N})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const $=document.createElement("input");return _.add($),$.setAttribute("data-element-id",C),$.disabled=v.readOnly,this._setRequired($,this.data.required),$.type="checkbox",$.name=v.fieldName,N&&$.setAttribute("checked",!0),$.setAttribute("exportValue",v.exportValue),$.tabIndex=R,$.addEventListener("change",Q=>{const{name:ce,checked:le}=Q.target;for(const ue of this._getElementsByName(ce,C)){const de=le&&ue.exportValue===v.exportValue;ue.domElement&&(ue.domElement.checked=de),d.setValue(ue.id,{value:de})}d.setValue(C,{value:le})}),$.addEventListener("resetform",Q=>{const ce=v.defaultFieldValue||"Off";Q.target.checked=ce===v.exportValue}),this.enableScripting&&this.hasJSActions&&($.addEventListener("updatefromsandbox",Q=>{const ce={value(le){le.target.checked=le.detail.value!=="Off",d.setValue(C,{value:le.target.checked})}};this._dispatchEventFromSandbox(ce,Q)}),this._setEventListeners($,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Q=>Q.target.checked)),this._setBackgroundColor($),this._setDefaultPropertiesFromJS($),this.container.append($),this.container}}class x extends u{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const d=this.annotationStorage,v=this.data,C=v.id;let N=d.getValue(C,{value:v.fieldValue===v.buttonValue}).value;typeof N=="string"&&(N=N!==v.buttonValue,d.setValue(C,{value:N}));const $=document.createElement("input");if(_.add($),$.setAttribute("data-element-id",C),$.disabled=v.readOnly,this._setRequired($,this.data.required),$.type="radio",$.name=v.fieldName,N&&$.setAttribute("checked",!0),$.tabIndex=R,$.addEventListener("change",Q=>{const{name:ce,checked:le}=Q.target;for(const ue of this._getElementsByName(ce,C))d.setValue(ue.id,{value:!1});d.setValue(C,{value:le})}),$.addEventListener("resetform",Q=>{const ce=v.defaultFieldValue;Q.target.checked=ce!=null&&ce===v.buttonValue}),this.enableScripting&&this.hasJSActions){const Q=v.buttonValue;$.addEventListener("updatefromsandbox",ce=>{const le={value:ue=>{const de=Q===ue.detail.value;for(const ye of this._getElementsByName(ue.target.name)){const fe=de&&ye.id===C;ye.domElement&&(ye.domElement.checked=fe),d.setValue(ye.id,{value:fe})}}};this._dispatchEventFromSandbox(le,ce)}),this._setEventListeners($,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ce=>ce.target.checked)}return this._setBackgroundColor($),this._setDefaultPropertiesFromJS($),this.container.append($),this.container}}class E extends g{constructor(d){super(d,{ignoreBorder:d.data.hasAppearance})}render(){const d=super.render();d.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(d.title=this.data.alternativeText);const v=d.lastChild;return this.enableScripting&&this.hasJSActions&&v&&(this._setDefaultPropertiesFromJS(v),v.addEventListener("updatefromsandbox",C=>{this._dispatchEventFromSandbox({},C)})),d}}class s extends u{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const d=this.annotationStorage,v=this.data.id,C=d.getValue(v,{value:this.data.fieldValue}),N=document.createElement("select");_.add(N),N.setAttribute("data-element-id",v),N.disabled=this.data.readOnly,this._setRequired(N,this.data.required),N.name=this.data.fieldName,N.tabIndex=R;let $=this.data.combo&&this.data.options.length>0;this.data.combo||(N.size=this.data.options.length,this.data.multiSelect&&(N.multiple=!0)),N.addEventListener("resetform",de=>{const ye=this.data.defaultFieldValue;for(const fe of N.options)fe.selected=fe.value===ye});for(const de of this.data.options){const ye=document.createElement("option");ye.textContent=de.displayValue,ye.value=de.exportValue,C.value.includes(de.exportValue)&&(ye.setAttribute("selected",!0),$=!1),N.append(ye)}let Q=null;if($){const de=document.createElement("option");de.value=" ",de.setAttribute("hidden",!0),de.setAttribute("selected",!0),N.prepend(de),Q=()=>{de.remove(),N.removeEventListener("input",Q),Q=null},N.addEventListener("input",Q)}const ce=de=>{const ye=de?"value":"textContent",{options:fe,multiple:_e}=N;return _e?Array.prototype.filter.call(fe,me=>me.selected).map(me=>me[ye]):fe.selectedIndex===-1?null:fe[fe.selectedIndex][ye]};let le=ce(!1);const ue=de=>{const ye=de.target.options;return Array.prototype.map.call(ye,fe=>({displayValue:fe.textContent,exportValue:fe.value}))};return this.enableScripting&&this.hasJSActions?(N.addEventListener("updatefromsandbox",de=>{const ye={value(fe){Q==null||Q();const _e=fe.detail.value,me=new Set(Array.isArray(_e)?_e:[_e]);for(const Se of N.options)Se.selected=me.has(Se.value);d.setValue(v,{value:ce(!0)}),le=ce(!1)},multipleSelection(fe){N.multiple=!0},remove(fe){const _e=N.options,me=fe.detail.remove;_e[me].selected=!1,N.remove(me),_e.length>0&&Array.prototype.findIndex.call(_e,be=>be.selected)===-1&&(_e[0].selected=!0),d.setValue(v,{value:ce(!0),items:ue(fe)}),le=ce(!1)},clear(fe){for(;N.length!==0;)N.remove(0);d.setValue(v,{value:null,items:[]}),le=ce(!1)},insert(fe){const{index:_e,displayValue:me,exportValue:Se}=fe.detail.insert,be=N.children[_e],we=document.createElement("option");we.textContent=me,we.value=Se,be?be.before(we):N.append(we),d.setValue(v,{value:ce(!0),items:ue(fe)}),le=ce(!1)},items(fe){const{items:_e}=fe.detail;for(;N.length!==0;)N.remove(0);for(const me of _e){const{displayValue:Se,exportValue:be}=me,we=document.createElement("option");we.textContent=Se,we.value=be,N.append(we)}N.options.length>0&&(N.options[0].selected=!0),d.setValue(v,{value:ce(!0),items:ue(fe)}),le=ce(!1)},indices(fe){const _e=new Set(fe.detail.indices);for(const me of fe.target.options)me.selected=_e.has(me.index);d.setValue(v,{value:ce(!0)}),le=ce(!1)},editable(fe){fe.target.disabled=!fe.detail.editable}};this._dispatchEventFromSandbox(ye,de)}),N.addEventListener("input",de=>{var fe;const ye=ce(!0);d.setValue(v,{value:ye}),de.preventDefault(),(fe=this.linkService.eventBus)==null||fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:le,changeEx:ye,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(N,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],de=>de.target.value)):N.addEventListener("input",function(de){d.setValue(v,{value:ce(!0)})}),this.data.combo&&this._setTextStyle(N),this._setBackgroundColor(N),this._setDefaultPropertiesFromJS(N),this.container.append(N),this.container}}const W=class extends S{constructor(d){var N,$,Q;const{data:v}=d,C=!W.IGNORE_TYPES.has(v.parentType)&&!!((N=v.titleObj)!=null&&N.str||($=v.contentsObj)!=null&&$.str||(Q=v.richText)!=null&&Q.str);super(d,{isRenderable:C})}render(){this.container.classList.add("popupAnnotation");const d=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(d.length===0)return this.container;const v=new r({container:this.container,trigger:Array.from(d),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),C=this.page,N=o.Util.normalizeRect([this.data.parentRect[0],C.view[3]-this.data.parentRect[1]+C.view[1],this.data.parentRect[2],C.view[3]-this.data.parentRect[3]+C.view[1]]),$=N[0]+this.data.parentRect[2]-this.data.parentRect[0],Q=N[1],{pageWidth:ce,pageHeight:le,pageX:ue,pageY:de}=this.viewport.rawDims;return this.container.style.left=`${100*($-ue)/ce}%`,this.container.style.top=`${100*(Q-de)/le}%`,this.container.append(v.render()),this.container}};let c=W;De(c,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class r{constructor(d){this.container=d.container,this.trigger=d.trigger,this.color=d.color,this.titleObj=d.titleObj,this.modificationDate=d.modificationDate,this.contentsObj=d.contentsObj,this.richText=d.richText,this.hideWrapper=d.hideWrapper||!1,this.pinned=!1}render(){var ce,le;const v=document.createElement("div");v.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?v:this.container,this.hideElement.hidden=!0;const C=document.createElement("div");C.classList.add("popup");const N=this.color;if(N){const ue=.7*(255-N[0])+N[0],de=.7*(255-N[1])+N[1],ye=.7*(255-N[2])+N[2];C.style.backgroundColor=o.Util.makeHexColor(ue|0,de|0,ye|0)}const $=document.createElement("h1");$.dir=this.titleObj.dir,$.textContent=this.titleObj.str,C.append($);const Q=A.PDFDateString.toDateObject(this.modificationDate);if(Q){const ue=document.createElement("span");ue.classList.add("popupDate"),ue.textContent="{{date}}, {{time}}",ue.dataset.l10nId="annotation_date_string",ue.dataset.l10nArgs=JSON.stringify({date:Q.toLocaleDateString(),time:Q.toLocaleTimeString()}),C.append(ue)}if((ce=this.richText)!=null&&ce.str&&(!((le=this.contentsObj)!=null&&le.str)||this.contentsObj.str===this.richText.str))re.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:C}),C.lastChild.classList.add("richText","popupContent");else{const ue=this._formatContents(this.contentsObj);C.append(ue)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ue of this.trigger)ue.addEventListener("click",this._toggle.bind(this)),ue.addEventListener("mouseover",this._show.bind(this,!1)),ue.addEventListener("mouseout",this._hide.bind(this,!1));return C.addEventListener("click",this._hide.bind(this,!0)),v.append(C),v}_formatContents({str:d,dir:v}){const C=document.createElement("p");C.classList.add("popupContent"),C.dir=v;const N=d.split(/(?:\r\n?|\n)/);for(let $=0,Q=N.length;$<Q;++$){const ce=N[$];C.append(document.createTextNode(ce)),$<Q-1&&C.append(document.createElement("br"))}return C}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(d=!1){d&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(d=!0){d&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class e extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0}),this.textContent=d.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const d=document.createElement("div");d.classList.add("annotationTextContent"),d.setAttribute("role","comment");for(const v of this.textContent){const C=document.createElement("span");C.textContent=v,d.append(C)}this.container.append(d)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class t extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const d=this.data,{width:v,height:C}=F(d.rect),N=this.svgFactory.create(v,C,!0),$=this.svgFactory.createElement("svg:line");return $.setAttribute("x1",d.rect[2]-d.lineCoordinates[0]),$.setAttribute("y1",d.rect[3]-d.lineCoordinates[1]),$.setAttribute("x2",d.rect[2]-d.lineCoordinates[2]),$.setAttribute("y2",d.rect[3]-d.lineCoordinates[3]),$.setAttribute("stroke-width",d.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),N.append($),this.container.append(N),this._createPopup($,d),this.container}}class n extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const d=this.data,{width:v,height:C}=F(d.rect),N=this.svgFactory.create(v,C,!0),$=d.borderStyle.width,Q=this.svgFactory.createElement("svg:rect");return Q.setAttribute("x",$/2),Q.setAttribute("y",$/2),Q.setAttribute("width",v-$),Q.setAttribute("height",C-$),Q.setAttribute("stroke-width",$||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),N.append(Q),this.container.append(N),this._createPopup(Q,d),this.container}}class i extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const d=this.data,{width:v,height:C}=F(d.rect),N=this.svgFactory.create(v,C,!0),$=d.borderStyle.width,Q=this.svgFactory.createElement("svg:ellipse");return Q.setAttribute("cx",v/2),Q.setAttribute("cy",C/2),Q.setAttribute("rx",v/2-$/2),Q.setAttribute("ry",C/2-$/2),Q.setAttribute("stroke-width",$||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),N.append(Q),this.container.append(N),this._createPopup(Q,d),this.container}}class f extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const d=this.data,{width:v,height:C}=F(d.rect),N=this.svgFactory.create(v,C,!0);let $=[];for(const ce of d.vertices){const le=ce.x-d.rect[0],ue=d.rect[3]-ce.y;$.push(le+","+ue)}$=$.join(" ");const Q=this.svgFactory.createElement(this.svgElementName);return Q.setAttribute("points",$),Q.setAttribute("stroke-width",d.borderStyle.width||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),N.append(Q),this.container.append(N),this._createPopup(Q,d),this.container}}class M extends f{constructor(d){super(d),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class P extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class B extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const d=this.data,{width:v,height:C}=F(d.rect),N=this.svgFactory.create(v,C,!0);for(const $ of d.inkLists){let Q=[];for(const le of $){const ue=le.x-d.rect[0],de=d.rect[3]-le.y;Q.push(`${ue},${de}`)}Q=Q.join(" ");const ce=this.svgFactory.createElement(this.svgElementName);ce.setAttribute("points",Q),ce.setAttribute("stroke-width",d.borderStyle.width||1),ce.setAttribute("stroke","transparent"),ce.setAttribute("fill","transparent"),this._createPopup(ce,d),N.append(ce)}return this.container.append(N),this.container}}class J extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class H extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class U extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class z extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class K extends S{constructor(d){var C,N,$;const v=!!(d.data.hasPopup||(C=d.data.titleObj)!=null&&C.str||(N=d.data.contentsObj)!=null&&N.str||($=d.data.richText)!=null&&$.str);super(d,{isRenderable:v,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class V extends S{constructor(d){var N;super(d,{isRenderable:!0});const{filename:v,content:C}=this.data.file;this.filename=(0,A.getFilenameFromUrl)(v,!0),this.content=C,(N=this.linkService.eventBus)==null||N.dispatch("fileattachmentannotation",{source:this,filename:v,content:C})}render(){var v,C;this.container.classList.add("fileAttachmentAnnotation");let d;return this.data.hasAppearance?d=document.createElement("div"):(d=document.createElement("img"),d.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),d.classList.add("popupTriggerArea"),d.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((v=this.data.titleObj)!=null&&v.str||(C=this.data.contentsObj)!=null&&C.str||this.data.richText)&&this._createPopup(d,this.data),this.container.append(d),this.container}_download(){var d;(d=this.downloadManager)==null||d.openOrDownloadData(this.container,this.content,this.filename)}}const Y=class{static render(d){var le,ue;const{annotations:v,div:C,viewport:N,accessibilityManager:$}=d;(0,A.setLayerDimensions)(C,N);const Q={data:null,layer:C,page:d.page,viewport:N,linkService:d.linkService,downloadManager:d.downloadManager,imageResourcesPath:d.imageResourcesPath||"",renderForms:d.renderForms!==!1,svgFactory:new A.DOMSVGFactory,annotationStorage:d.annotationStorage||new D.AnnotationStorage,enableScripting:d.enableScripting===!0,hasJSActions:d.hasJSActions,fieldObjects:d.fieldObjects};let ce=0;for(const de of v){if(de.noHTML)continue;if(de.annotationType!==o.AnnotationType.POPUP){const{width:_e,height:me}=F(de.rect);if(_e<=0||me<=0)continue}Q.data=de;const ye=k.create(Q);if(!ye.isRenderable)continue;const fe=ye.render();if(de.hidden&&(fe.style.visibility="hidden"),Array.isArray(fe))for(const _e of fe)_e.style.zIndex=ce++,he(le=Y,Z,Ct).call(le,_e,de.id,C,$);else fe.style.zIndex=ce++,ye instanceof c?C.prepend(fe):he(ue=Y,Z,Ct).call(ue,fe,de.id,C,$)}he(this,ae,Rt).call(this,C,d.annotationCanvasMap)}static update(d){const{annotationCanvasMap:v,div:C,viewport:N}=d;(0,A.setLayerDimensions)(C,{rotation:N.rotation}),he(this,ae,Rt).call(this,C,v),C.hidden=!1}};let L=Y;Z=new WeakSet,Ct=function(d,v,C,N){const $=d.firstChild||d;$.id=`${A.AnnotationPrefix}${v}`,C.append(d),N==null||N.moveElementInDOM(C,d,$,!1)},ae=new WeakSet,Rt=function(d,v){if(v){for(const[C,N]of v){const $=d.querySelector(`[data-annotation-id="${C}"]`);if(!$)continue;const{firstChild:Q}=$;Q?Q.nodeName==="CANVAS"?Q.replaceWith(N):Q.before(N):$.append(N)}v.clear()}},oe(L,Z),oe(L,ae),a.AnnotationLayer=L},(l,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorConverters=void 0;function m(A){return Math.floor(Math.max(0,Math.min(1,A))*255).toString(16).padStart(2,"0")}class o{static CMYK_G([D,j,re,R]){return["G",1-Math.min(1,.3*D+.59*re+.11*j+R)]}static G_CMYK([D]){return["CMYK",0,0,0,1-D]}static G_RGB([D]){return["RGB",D,D,D]}static G_HTML([D]){const j=m(D);return`#${j}${j}${j}`}static RGB_G([D,j,re]){return["G",.3*D+.59*j+.11*re]}static RGB_HTML([D,j,re]){const R=m(D),T=m(j),_=m(re);return`#${R}${T}${_}`}static T_HTML(){return"#00000000"}static CMYK_RGB([D,j,re,R]){return["RGB",1-Math.min(1,D+R),1-Math.min(1,re+R),1-Math.min(1,j+R)]}static CMYK_HTML(D){const j=this.CMYK_RGB(D).slice(1);return this.RGB_HTML(j)}static RGB_CMYK([D,j,re]){const R=1-D,T=1-j,_=1-re,F=Math.min(R,T,_);return["CMYK",R,T,_,F]}}a.ColorConverters=o},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaLayer=void 0;var o=m(19);class A{static setupStorage(j,re,R,T,_){const F=T.getValue(re,{value:null});switch(R.name){case"textarea":if(F.value!==null&&(j.textContent=F.value),_==="print")break;j.addEventListener("input",k=>{T.setValue(re,{value:k.target.value})});break;case"input":if(R.attributes.type==="radio"||R.attributes.type==="checkbox"){if(F.value===R.attributes.xfaOn?j.setAttribute("checked",!0):F.value===R.attributes.xfaOff&&j.removeAttribute("checked"),_==="print")break;j.addEventListener("change",k=>{T.setValue(re,{value:k.target.checked?k.target.getAttribute("xfaOn"):k.target.getAttribute("xfaOff")})})}else{if(F.value!==null&&j.setAttribute("value",F.value),_==="print")break;j.addEventListener("input",k=>{T.setValue(re,{value:k.target.value})})}break;case"select":if(F.value!==null)for(const k of R.children)k.attributes.value===F.value&&(k.attributes.selected=!0);j.addEventListener("input",k=>{const S=k.target.options,g=S.selectedIndex===-1?"":S[S.selectedIndex].value;T.setValue(re,{value:g})});break}}static setAttributes({html:j,element:re,storage:R=null,intent:T,linkService:_}){const{attributes:F}=re,k=j instanceof HTMLAnchorElement;F.type==="radio"&&(F.name=`${F.name}-${T}`);for(const[S,g]of Object.entries(F))if(g!=null)switch(S){case"class":g.length&&j.setAttribute(S,g.join(" "));break;case"dataId":break;case"id":j.setAttribute("data-element-id",g);break;case"style":Object.assign(j.style,g);break;case"textContent":j.textContent=g;break;default:(!k||S!=="href"&&S!=="newWindow")&&j.setAttribute(S,g)}k&&_.addLinkAttributes(j,F.href,F.newWindow),R&&F.dataId&&this.setupStorage(j,F.dataId,re,R)}static render(j){var b;const re=j.annotationStorage,R=j.linkService,T=j.xfaHtml,_=j.intent||"display",F=document.createElement(T.name);T.attributes&&this.setAttributes({html:F,element:T,intent:_,linkService:R});const k=[[T,-1,F]],S=j.div;if(S.append(F),j.viewport){const u=`matrix(${j.viewport.transform.join(",")})`;S.style.transform=u}_!=="richText"&&S.setAttribute("class","xfaLayer xfaFont");const g=[];for(;k.length>0;){const[u,h,I]=k.at(-1);if(h+1===u.children.length){k.pop();continue}const x=u.children[++k.at(-1)[1]];if(x===null)continue;const{name:E}=x;if(E==="#text"){const c=document.createTextNode(x.value);g.push(c),I.append(c);continue}let s;if((b=x==null?void 0:x.attributes)!=null&&b.xmlns?s=document.createElementNS(x.attributes.xmlns,E):s=document.createElement(E),I.append(s),x.attributes&&this.setAttributes({html:s,element:x,storage:re,intent:_,linkService:R}),x.children&&x.children.length>0)k.push([x,-1,s]);else if(x.value){const c=document.createTextNode(x.value);o.XfaText.shouldBuildText(E)&&g.push(c),s.append(c)}}for(const u of S.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:g}}static update(j){const re=`matrix(${j.viewport.transform.join(",")})`;j.div.style.transform=re,j.div.hidden=!1}}a.XfaLayer=A},(l,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SVGGraphics=void 0;var o=m(6),A=m(1),D=m(10);let j=class{constructor(){(0,A.unreachable)("Not implemented: SVGGraphics")}};a.SVGGraphics=j;{let b=function(s){let c=[];const r=[];for(const e of s){if(e.fn==="save"){c.push({fnId:92,fn:"group",items:[]}),r.push(c),c=c.at(-1).items;continue}e.fn==="restore"?c=r.pop():c.push(e)}return c},u=function(s){if(Number.isInteger(s))return s.toString();const c=s.toFixed(10);let r=c.length-1;if(c[r]!=="0")return c;do r--;while(c[r]==="0");return c.substring(0,c[r]==="."?r:r+1)},h=function(s){if(s[4]===0&&s[5]===0){if(s[1]===0&&s[2]===0)return s[0]===1&&s[3]===1?"":`scale(${u(s[0])} ${u(s[3])})`;if(s[0]===s[3]&&s[1]===-s[2]){const c=Math.acos(s[0])*180/Math.PI;return`rotate(${u(c)})`}}else if(s[0]===1&&s[1]===0&&s[2]===0&&s[3]===1)return`translate(${u(s[4])} ${u(s[5])})`;return`matrix(${u(s[0])} ${u(s[1])} ${u(s[2])} ${u(s[3])} ${u(s[4])} ${u(s[5])})`};const re={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},R="http://www.w3.org/XML/1998/namespace",T="http://www.w3.org/1999/xlink",_=["butt","round","square"],F=["miter","round","bevel"],k=function(s,c="",r=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!r)return URL.createObjectURL(new Blob([s],{type:c}));const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t=`data:${c};base64,`;for(let n=0,i=s.length;n<i;n+=3){const f=s[n]&255,M=s[n+1]&255,P=s[n+2]&255,B=f>>2,J=(f&3)<<4|M>>4,H=n+1<i?(M&15)<<2|P>>6:64,U=n+2<i?P&63:64;t+=e[B]+e[J]+e[H]+e[U]}return t},S=function(){const s=new Uint8Array([137,80,78,71,13,10,26,10]),c=12,r=new Int32Array(256);for(let P=0;P<256;P++){let B=P;for(let J=0;J<8;J++)B&1?B=3988292384^B>>1&2147483647:B=B>>1&2147483647;r[P]=B}function e(P,B,J){let H=-1;for(let U=B;U<J;U++){const z=(H^P[U])&255,K=r[z];H=H>>>8^K}return H^-1}function t(P,B,J,H){let U=H;const z=B.length;J[U]=z>>24&255,J[U+1]=z>>16&255,J[U+2]=z>>8&255,J[U+3]=z&255,U+=4,J[U]=P.charCodeAt(0)&255,J[U+1]=P.charCodeAt(1)&255,J[U+2]=P.charCodeAt(2)&255,J[U+3]=P.charCodeAt(3)&255,U+=4,J.set(B,U),U+=B.length;const K=e(J,H+4,U);J[U]=K>>24&255,J[U+1]=K>>16&255,J[U+2]=K>>8&255,J[U+3]=K&255}function n(P,B,J){let H=1,U=0;for(let z=B;z<J;++z)H=(H+(P[z]&255))%65521,U=(U+H)%65521;return U<<16|H}function i(P){if(!D.isNodeJS)return f(P);try{let B;parseInt(process.versions.node)>=8?B=P:B=Buffer.from(P);const J=require$$5.deflateSync(B,{level:9});return J instanceof Uint8Array?J:new Uint8Array(J)}catch(B){(0,A.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+B)}return f(P)}function f(P){let B=P.length;const J=65535,H=Math.ceil(B/J),U=new Uint8Array(2+B+H*5+4);let z=0;U[z++]=120,U[z++]=156;let K=0;for(;B>J;)U[z++]=0,U[z++]=255,U[z++]=255,U[z++]=0,U[z++]=0,U.set(P.subarray(K,K+J),z),z+=J,K+=J,B-=J;U[z++]=1,U[z++]=B&255,U[z++]=B>>8&255,U[z++]=~B&65535&255,U[z++]=(~B&65535)>>8&255,U.set(P.subarray(K),z),z+=P.length-K;const V=n(P,0,P.length);return U[z++]=V>>24&255,U[z++]=V>>16&255,U[z++]=V>>8&255,U[z++]=V&255,U}function M(P,B,J,H){const U=P.width,z=P.height;let K,V,L;const y=P.data;switch(B){case A.ImageKind.GRAYSCALE_1BPP:V=0,K=1,L=U+7>>3;break;case A.ImageKind.RGB_24BPP:V=2,K=8,L=U*3;break;case A.ImageKind.RGBA_32BPP:V=6,K=8,L=U*4;break;default:throw new Error("invalid format")}const p=new Uint8Array((1+L)*z);let w=0,X=0;for(let Y=0;Y<z;++Y)p[w++]=0,p.set(y.subarray(X,X+L),w),X+=L,w+=L;if(B===A.ImageKind.GRAYSCALE_1BPP&&H){w=0;for(let Y=0;Y<z;Y++){w++;for(let q=0;q<L;q++)p[w++]^=255}}const W=new Uint8Array([U>>24&255,U>>16&255,U>>8&255,U&255,z>>24&255,z>>16&255,z>>8&255,z&255,K,V,0,0,0]),Z=i(p),ee=s.length+c*3+W.length+Z.length,ae=new Uint8Array(ee);let ie=0;return ae.set(s,ie),ie+=s.length,t("IHDR",W,ae,ie),ie+=c+W.length,t("IDATA",Z,ae,ie),ie+=c+Z.length,t("IEND",new Uint8Array(0),ae,ie),k(ae,"image/png",J)}return function(B,J,H){const U=B.kind===void 0?A.ImageKind.GRAYSCALE_1BPP:B.kind;return M(B,U,J,H)}}();class g{constructor(){this.fontSizeScale=1,this.fontWeight=re.fontWeight,this.fontSize=0,this.textMatrix=A.IDENTITY_MATRIX,this.fontMatrix=A.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=A.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=re.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(c,r){this.x=c,this.y=r}}let I=0,x=0,E=0;a.SVGGraphics=j=class{constructor(s,c,r=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new g,this.transformMatrix=A.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=s,this.objs=c,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!r,this._operatorIdMapping=[];for(const e in A.OPS)this._operatorIdMapping[A.OPS[e]]=e}getObject(s,c=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):c}save(){this.transformStack.push(this.transformMatrix);const s=this.current;this.extraStack.push(s),this.current=s.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(s){this.save(),this.executeOpTree(s),this.restore()}loadDependencies(s){const c=s.fnArray,r=s.argsArray;for(let e=0,t=c.length;e<t;e++)if(c[e]===A.OPS.dependency)for(const n of r[e]){const i=n.startsWith("g_")?this.commonObjs:this.objs,f=new Promise(M=>{i.get(n,M)});this.current.dependencies.push(f)}return Promise.all(this.current.dependencies)}transform(s,c,r,e,t,n){const i=[s,c,r,e,t,n];this.transformMatrix=A.Util.transform(this.transformMatrix,i),this.tgrp=null}getSVG(s,c){this.viewport=c;const r=this._initialize(c);return this.loadDependencies(s).then(()=>(this.transformMatrix=A.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(s)),r))}convertOpList(s){const c=this._operatorIdMapping,r=s.argsArray,e=s.fnArray,t=[];for(let n=0,i=e.length;n<i;n++){const f=e[n];t.push({fnId:f,fn:c[f],args:r[n]})}return b(t)}executeOpTree(s){for(const c of s){const r=c.fn,e=c.fnId,t=c.args;switch(e|0){case A.OPS.beginText:this.beginText();break;case A.OPS.dependency:break;case A.OPS.setLeading:this.setLeading(t);break;case A.OPS.setLeadingMoveText:this.setLeadingMoveText(t[0],t[1]);break;case A.OPS.setFont:this.setFont(t);break;case A.OPS.showText:this.showText(t[0]);break;case A.OPS.showSpacedText:this.showText(t[0]);break;case A.OPS.endText:this.endText();break;case A.OPS.moveText:this.moveText(t[0],t[1]);break;case A.OPS.setCharSpacing:this.setCharSpacing(t[0]);break;case A.OPS.setWordSpacing:this.setWordSpacing(t[0]);break;case A.OPS.setHScale:this.setHScale(t[0]);break;case A.OPS.setTextMatrix:this.setTextMatrix(t[0],t[1],t[2],t[3],t[4],t[5]);break;case A.OPS.setTextRise:this.setTextRise(t[0]);break;case A.OPS.setTextRenderingMode:this.setTextRenderingMode(t[0]);break;case A.OPS.setLineWidth:this.setLineWidth(t[0]);break;case A.OPS.setLineJoin:this.setLineJoin(t[0]);break;case A.OPS.setLineCap:this.setLineCap(t[0]);break;case A.OPS.setMiterLimit:this.setMiterLimit(t[0]);break;case A.OPS.setFillRGBColor:this.setFillRGBColor(t[0],t[1],t[2]);break;case A.OPS.setStrokeRGBColor:this.setStrokeRGBColor(t[0],t[1],t[2]);break;case A.OPS.setStrokeColorN:this.setStrokeColorN(t);break;case A.OPS.setFillColorN:this.setFillColorN(t);break;case A.OPS.shadingFill:this.shadingFill(t[0]);break;case A.OPS.setDash:this.setDash(t[0],t[1]);break;case A.OPS.setRenderingIntent:this.setRenderingIntent(t[0]);break;case A.OPS.setFlatness:this.setFlatness(t[0]);break;case A.OPS.setGState:this.setGState(t[0]);break;case A.OPS.fill:this.fill();break;case A.OPS.eoFill:this.eoFill();break;case A.OPS.stroke:this.stroke();break;case A.OPS.fillStroke:this.fillStroke();break;case A.OPS.eoFillStroke:this.eoFillStroke();break;case A.OPS.clip:this.clip("nonzero");break;case A.OPS.eoClip:this.clip("evenodd");break;case A.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case A.OPS.paintImageXObject:this.paintImageXObject(t[0]);break;case A.OPS.paintInlineImageXObject:this.paintInlineImageXObject(t[0]);break;case A.OPS.paintImageMaskXObject:this.paintImageMaskXObject(t[0]);break;case A.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(t[0],t[1]);break;case A.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case A.OPS.closePath:this.closePath();break;case A.OPS.closeStroke:this.closeStroke();break;case A.OPS.closeFillStroke:this.closeFillStroke();break;case A.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case A.OPS.nextLine:this.nextLine();break;case A.OPS.transform:this.transform(t[0],t[1],t[2],t[3],t[4],t[5]);break;case A.OPS.constructPath:this.constructPath(t[0],t[1]);break;case A.OPS.endPath:this.endPath();break;case 92:this.group(c.items);break;default:(0,A.warn)(`Unimplemented operator ${r}`);break}}}setWordSpacing(s){this.current.wordSpacing=s}setCharSpacing(s){this.current.charSpacing=s}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(s,c,r,e,t,n){const i=this.current;i.textMatrix=i.lineMatrix=[s,c,r,e,t,n],i.textMatrixScale=Math.hypot(s,c),i.x=i.lineX=0,i.y=i.lineY=0,i.xcoords=[],i.ycoords=[],i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${u(i.fontSize)}px`),i.tspan.setAttributeNS(null,"y",u(-i.y)),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtElement.append(i.tspan)}beginText(){const s=this.current;s.x=s.lineX=0,s.y=s.lineY=0,s.textMatrix=A.IDENTITY_MATRIX,s.lineMatrix=A.IDENTITY_MATRIX,s.textMatrixScale=1,s.tspan=this.svgFactory.createElement("svg:tspan"),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtgrp=this.svgFactory.createElement("svg:g"),s.xcoords=[],s.ycoords=[]}moveText(s,c){const r=this.current;r.x=r.lineX+=s,r.y=r.lineY+=c,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",`${u(r.fontSize)}px`),r.tspan.setAttributeNS(null,"y",u(-r.y))}showText(s){const c=this.current,r=c.font,e=c.fontSize;if(e===0)return;const t=c.fontSizeScale,n=c.charSpacing,i=c.wordSpacing,f=c.fontDirection,M=c.textHScale*f,P=r.vertical,B=P?1:-1,J=r.defaultVMetrics,H=e*c.fontMatrix[0];let U=0;for(const V of s){if(V===null){U+=f*i;continue}else if(typeof V=="number"){U+=B*V*e/1e3;continue}const L=(V.isSpace?i:0)+n,y=V.fontChar;let p,w,X=V.width;if(P){let Z;const ee=V.vmetric||J;Z=V.vmetric?ee[1]:X*.5,Z=-Z*H;const ae=ee[2]*H;X=ee?-ee[0]:X,p=Z/t,w=(U+ae)/t}else p=U/t,w=0;(V.isInFont||r.missingFile)&&(c.xcoords.push(c.x+p),P&&c.ycoords.push(-c.y+w),c.tspan.textContent+=y);let W;P?W=X*H-L*f:W=X*H+L*f,U+=W}c.tspan.setAttributeNS(null,"x",c.xcoords.map(u).join(" ")),P?c.tspan.setAttributeNS(null,"y",c.ycoords.map(u).join(" ")):c.tspan.setAttributeNS(null,"y",u(-c.y)),P?c.y-=U:c.x+=U*M,c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${u(c.fontSize)}px`),c.fontStyle!==re.fontStyle&&c.tspan.setAttributeNS(null,"font-style",c.fontStyle),c.fontWeight!==re.fontWeight&&c.tspan.setAttributeNS(null,"font-weight",c.fontWeight);const z=c.textRenderingMode&A.TextRenderingMode.FILL_STROKE_MASK;if(z===A.TextRenderingMode.FILL||z===A.TextRenderingMode.FILL_STROKE?(c.fillColor!==re.fillColor&&c.tspan.setAttributeNS(null,"fill",c.fillColor),c.fillAlpha<1&&c.tspan.setAttributeNS(null,"fill-opacity",c.fillAlpha)):c.textRenderingMode===A.TextRenderingMode.ADD_TO_PATH?c.tspan.setAttributeNS(null,"fill","transparent"):c.tspan.setAttributeNS(null,"fill","none"),z===A.TextRenderingMode.STROKE||z===A.TextRenderingMode.FILL_STROKE){const V=1/(c.textMatrixScale||1);this._setStrokeAttributes(c.tspan,V)}let K=c.textMatrix;c.textRise!==0&&(K=K.slice(),K[5]+=c.textRise),c.txtElement.setAttributeNS(null,"transform",`${h(K)} scale(${u(M)}, -1)`),c.txtElement.setAttributeNS(R,"xml:space","preserve"),c.txtElement.append(c.tspan),c.txtgrp.append(c.txtElement),this._ensureTransformGroup().append(c.txtElement)}setLeadingMoveText(s,c){this.setLeading(-c),this.moveText(s,c)}addFontStyle(s){if(!s.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const c=k(s.data,s.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${s.loadedName}"; src: url(${c}); }
`}setFont(s){const c=this.current,r=this.commonObjs.get(s[0]);let e=s[1];c.font=r,this.embedFonts&&!r.missingFile&&!this.embeddedFonts[r.loadedName]&&(this.addFontStyle(r),this.embeddedFonts[r.loadedName]=r),c.fontMatrix=r.fontMatrix||A.FONT_IDENTITY_MATRIX;let t="normal";r.black?t="900":r.bold&&(t="bold");const n=r.italic?"italic":"normal";e<0?(e=-e,c.fontDirection=-1):c.fontDirection=1,c.fontSize=e,c.fontFamily=r.loadedName,c.fontWeight=t,c.fontStyle=n,c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"y",u(-c.y)),c.xcoords=[],c.ycoords=[]}endText(){var c;const s=this.current;s.textRenderingMode&A.TextRenderingMode.ADD_TO_PATH_FLAG&&((c=s.txtElement)!=null&&c.hasChildNodes())&&(s.element=s.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(s){s>0&&(this.current.lineWidth=s)}setLineCap(s){this.current.lineCap=_[s]}setLineJoin(s){this.current.lineJoin=F[s]}setMiterLimit(s){this.current.miterLimit=s}setStrokeAlpha(s){this.current.strokeAlpha=s}setStrokeRGBColor(s,c,r){this.current.strokeColor=A.Util.makeHexColor(s,c,r)}setFillAlpha(s){this.current.fillAlpha=s}setFillRGBColor(s,c,r){this.current.fillColor=A.Util.makeHexColor(s,c,r),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(s){this.current.strokeColor=this._makeColorN_Pattern(s)}setFillColorN(s){this.current.fillColor=this._makeColorN_Pattern(s)}shadingFill(s){const c=this.viewport.width,r=this.viewport.height,e=A.Util.inverseTransform(this.transformMatrix),t=A.Util.applyTransform([0,0],e),n=A.Util.applyTransform([0,r],e),i=A.Util.applyTransform([c,0],e),f=A.Util.applyTransform([c,r],e),M=Math.min(t[0],n[0],i[0],f[0]),P=Math.min(t[1],n[1],i[1],f[1]),B=Math.max(t[0],n[0],i[0],f[0]),J=Math.max(t[1],n[1],i[1],f[1]),H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x",M),H.setAttributeNS(null,"y",P),H.setAttributeNS(null,"width",B-M),H.setAttributeNS(null,"height",J-P),H.setAttributeNS(null,"fill",this._makeShadingPattern(s)),this.current.fillAlpha<1&&H.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(H)}_makeColorN_Pattern(s){return s[0]==="TilingPattern"?this._makeTilingPattern(s):this._makeShadingPattern(s)}_makeTilingPattern(s){const c=s[1],r=s[2],e=s[3]||A.IDENTITY_MATRIX,[t,n,i,f]=s[4],M=s[5],P=s[6],B=s[7],J=`shading${E++}`,[H,U,z,K]=A.Util.normalizeRect([...A.Util.applyTransform([t,n],e),...A.Util.applyTransform([i,f],e)]),[V,L]=A.Util.singularValueDecompose2dScale(e),y=M*V,p=P*L,w=this.svgFactory.createElement("svg:pattern");w.setAttributeNS(null,"id",J),w.setAttributeNS(null,"patternUnits","userSpaceOnUse"),w.setAttributeNS(null,"width",y),w.setAttributeNS(null,"height",p),w.setAttributeNS(null,"x",`${H}`),w.setAttributeNS(null,"y",`${U}`);const X=this.svg,W=this.transformMatrix,Z=this.current.fillColor,ee=this.current.strokeColor,ae=this.svgFactory.create(z-H,K-U);if(this.svg=ae,this.transformMatrix=e,B===2){const ie=A.Util.makeHexColor(...c);this.current.fillColor=ie,this.current.strokeColor=ie}return this.executeOpTree(this.convertOpList(r)),this.svg=X,this.transformMatrix=W,this.current.fillColor=Z,this.current.strokeColor=ee,w.append(ae.childNodes[0]),this.defs.append(w),`url(#${J})`}_makeShadingPattern(s){switch(typeof s=="string"&&(s=this.objs.get(s)),s[0]){case"RadialAxial":const c=`shading${E++}`,r=s[3];let e;switch(s[1]){case"axial":const t=s[4],n=s[5];e=this.svgFactory.createElement("svg:linearGradient"),e.setAttributeNS(null,"id",c),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"x1",t[0]),e.setAttributeNS(null,"y1",t[1]),e.setAttributeNS(null,"x2",n[0]),e.setAttributeNS(null,"y2",n[1]);break;case"radial":const i=s[4],f=s[5],M=s[6],P=s[7];e=this.svgFactory.createElement("svg:radialGradient"),e.setAttributeNS(null,"id",c),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"cx",f[0]),e.setAttributeNS(null,"cy",f[1]),e.setAttributeNS(null,"r",P),e.setAttributeNS(null,"fx",i[0]),e.setAttributeNS(null,"fy",i[1]),e.setAttributeNS(null,"fr",M);break;default:throw new Error(`Unknown RadialAxial type: ${s[1]}`)}for(const t of r){const n=this.svgFactory.createElement("svg:stop");n.setAttributeNS(null,"offset",t[0]),n.setAttributeNS(null,"stop-color",t[1]),e.append(n)}return this.defs.append(e),`url(#${c})`;case"Mesh":return(0,A.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${s[0]}`)}}setDash(s,c){this.current.dashArray=s,this.current.dashPhase=c}constructPath(s,c){const r=this.current;let e=r.x,t=r.y,n=[],i=0;for(const f of s)switch(f|0){case A.OPS.rectangle:e=c[i++],t=c[i++];const M=c[i++],P=c[i++],B=e+M,J=t+P;n.push("M",u(e),u(t),"L",u(B),u(t),"L",u(B),u(J),"L",u(e),u(J),"Z");break;case A.OPS.moveTo:e=c[i++],t=c[i++],n.push("M",u(e),u(t));break;case A.OPS.lineTo:e=c[i++],t=c[i++],n.push("L",u(e),u(t));break;case A.OPS.curveTo:e=c[i+4],t=c[i+5],n.push("C",u(c[i]),u(c[i+1]),u(c[i+2]),u(c[i+3]),u(e),u(t)),i+=6;break;case A.OPS.curveTo2:n.push("C",u(e),u(t),u(c[i]),u(c[i+1]),u(c[i+2]),u(c[i+3])),e=c[i+2],t=c[i+3],i+=4;break;case A.OPS.curveTo3:e=c[i+2],t=c[i+3],n.push("C",u(c[i]),u(c[i+1]),u(e),u(t),u(e),u(t)),i+=4;break;case A.OPS.closePath:n.push("Z");break}n=n.join(" "),r.path&&s.length>0&&s[0]!==A.OPS.rectangle&&s[0]!==A.OPS.moveTo?n=r.path.getAttributeNS(null,"d")+n:(r.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(r.path)),r.path.setAttributeNS(null,"d",n),r.path.setAttributeNS(null,"fill","none"),r.element=r.path,r.setCurrentPoint(e,t)}endPath(){const s=this.current;if(s.path=null,!this.pendingClip)return;if(!s.element){this.pendingClip=null;return}const c=`clippath${I++}`,r=this.svgFactory.createElement("svg:clipPath");r.setAttributeNS(null,"id",c),r.setAttributeNS(null,"transform",h(this.transformMatrix));const e=s.element.cloneNode(!0);if(this.pendingClip==="evenodd"?e.setAttributeNS(null,"clip-rule","evenodd"):e.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,r.append(e),this.defs.append(r),s.activeClipUrl){s.clipGroup=null;for(const t of this.extraStack)t.clipGroup=null;r.setAttributeNS(null,"clip-path",s.activeClipUrl)}s.activeClipUrl=`url(#${c})`,this.tgrp=null}clip(s){this.pendingClip=s}closePath(){const s=this.current;if(s.path){const c=`${s.path.getAttributeNS(null,"d")}Z`;s.path.setAttributeNS(null,"d",c)}}setLeading(s){this.current.leading=-s}setTextRise(s){this.current.textRise=s}setTextRenderingMode(s){this.current.textRenderingMode=s}setHScale(s){this.current.textHScale=s/100}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[c,r]of s)switch(c){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r);break;case"CA":this.setStrokeAlpha(r);break;case"ca":this.setFillAlpha(r);break;default:(0,A.warn)(`Unimplemented graphic state operator ${c}`);break}}fill(){const s=this.current;s.element&&(s.element.setAttributeNS(null,"fill",s.fillColor),s.element.setAttributeNS(null,"fill-opacity",s.fillAlpha),this.endPath())}stroke(){const s=this.current;s.element&&(this._setStrokeAttributes(s.element),s.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(s,c=1){const r=this.current;let e=r.dashArray;c!==1&&e.length>0&&(e=e.map(function(t){return c*t})),s.setAttributeNS(null,"stroke",r.strokeColor),s.setAttributeNS(null,"stroke-opacity",r.strokeAlpha),s.setAttributeNS(null,"stroke-miterlimit",u(r.miterLimit)),s.setAttributeNS(null,"stroke-linecap",r.lineCap),s.setAttributeNS(null,"stroke-linejoin",r.lineJoin),s.setAttributeNS(null,"stroke-width",u(c*r.lineWidth)+"px"),s.setAttributeNS(null,"stroke-dasharray",e.map(u).join(" ")),s.setAttributeNS(null,"stroke-dashoffset",u(c*r.dashPhase)+"px")}eoFill(){var s;(s=this.current.element)==null||s.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var s;(s=this.current.element)==null||s.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width","1px"),s.setAttributeNS(null,"height","1px"),s.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(s)}paintImageXObject(s){const c=this.getObject(s);if(!c){(0,A.warn)(`Dependent image with object ID ${s} is not ready yet`);return}this.paintInlineImageXObject(c)}paintInlineImageXObject(s,c){const r=s.width,e=s.height,t=S(s,this.forceDataSchema,!!c),n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width",u(r)),n.setAttributeNS(null,"height",u(e)),this.current.element=n,this.clip("nonzero");const i=this.svgFactory.createElement("svg:image");i.setAttributeNS(T,"xlink:href",t),i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y",u(-e)),i.setAttributeNS(null,"width",u(r)+"px"),i.setAttributeNS(null,"height",u(e)+"px"),i.setAttributeNS(null,"transform",`scale(${u(1/r)} ${u(-1/e)})`),c?c.append(i):this._ensureTransformGroup().append(i)}paintImageMaskXObject(s){const c=this.getObject(s.data,s);if(c.bitmap){(0,A.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const r=this.current,e=c.width,t=c.height,n=r.fillColor;r.maskId=`mask${x++}`;const i=this.svgFactory.createElement("svg:mask");i.setAttributeNS(null,"id",r.maskId);const f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y","0"),f.setAttributeNS(null,"width",u(e)),f.setAttributeNS(null,"height",u(t)),f.setAttributeNS(null,"fill",n),f.setAttributeNS(null,"mask",`url(#${r.maskId})`),this.defs.append(i),this._ensureTransformGroup().append(f),this.paintInlineImageXObject(c,i)}paintFormXObjectBegin(s,c){if(Array.isArray(s)&&s.length===6&&this.transform(s[0],s[1],s[2],s[3],s[4],s[5]),c){const r=c[2]-c[0],e=c[3]-c[1],t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x",c[0]),t.setAttributeNS(null,"y",c[1]),t.setAttributeNS(null,"width",u(r)),t.setAttributeNS(null,"height",u(e)),this.current.element=t,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(s){const c=this.svgFactory.create(s.width,s.height),r=this.svgFactory.createElement("svg:defs");c.append(r),this.defs=r;const e=this.svgFactory.createElement("svg:g");return e.setAttributeNS(null,"transform",h(s.transform)),c.append(e),this.svg=e,c}_ensureClipGroup(){if(!this.current.clipGroup){const s=this.svgFactory.createElement("svg:g");s.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(s),this.current.clipGroup=s}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",h(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(l){var a=__webpack_module_cache__[l];if(a!==void 0)return a.exports;var m=__webpack_module_cache__[l]={exports:{}};return __webpack_modules__[l](m,m.exports,__w_pdfjs_require__),m.exports}var __webpack_exports__={};return(()=>{var l=__webpack_exports__;Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"AbortException",{enumerable:!0,get:function(){return a.AbortException}}),Object.defineProperty(l,"AnnotationEditorLayer",{enumerable:!0,get:function(){return D.AnnotationEditorLayer}}),Object.defineProperty(l,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return a.AnnotationEditorParamsType}}),Object.defineProperty(l,"AnnotationEditorType",{enumerable:!0,get:function(){return a.AnnotationEditorType}}),Object.defineProperty(l,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return j.AnnotationEditorUIManager}}),Object.defineProperty(l,"AnnotationLayer",{enumerable:!0,get:function(){return re.AnnotationLayer}}),Object.defineProperty(l,"AnnotationMode",{enumerable:!0,get:function(){return a.AnnotationMode}}),Object.defineProperty(l,"CMapCompressionType",{enumerable:!0,get:function(){return a.CMapCompressionType}}),Object.defineProperty(l,"FeatureTest",{enumerable:!0,get:function(){return a.FeatureTest}}),Object.defineProperty(l,"GlobalWorkerOptions",{enumerable:!0,get:function(){return R.GlobalWorkerOptions}}),Object.defineProperty(l,"InvalidPDFException",{enumerable:!0,get:function(){return a.InvalidPDFException}}),Object.defineProperty(l,"MissingPDFException",{enumerable:!0,get:function(){return a.MissingPDFException}}),Object.defineProperty(l,"OPS",{enumerable:!0,get:function(){return a.OPS}}),Object.defineProperty(l,"PDFDataRangeTransport",{enumerable:!0,get:function(){return m.PDFDataRangeTransport}}),Object.defineProperty(l,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(l,"PDFWorker",{enumerable:!0,get:function(){return m.PDFWorker}}),Object.defineProperty(l,"PasswordResponses",{enumerable:!0,get:function(){return a.PasswordResponses}}),Object.defineProperty(l,"PermissionFlag",{enumerable:!0,get:function(){return a.PermissionFlag}}),Object.defineProperty(l,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(l,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(l,"SVGGraphics",{enumerable:!0,get:function(){return T.SVGGraphics}}),Object.defineProperty(l,"UnexpectedResponseException",{enumerable:!0,get:function(){return a.UnexpectedResponseException}}),Object.defineProperty(l,"Util",{enumerable:!0,get:function(){return a.Util}}),Object.defineProperty(l,"VerbosityLevel",{enumerable:!0,get:function(){return a.VerbosityLevel}}),Object.defineProperty(l,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(l,"build",{enumerable:!0,get:function(){return m.build}}),Object.defineProperty(l,"createPromiseCapability",{enumerable:!0,get:function(){return a.createPromiseCapability}}),Object.defineProperty(l,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return a.createValidAbsoluteUrl}}),Object.defineProperty(l,"getDocument",{enumerable:!0,get:function(){return m.getDocument}}),Object.defineProperty(l,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(l,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(l,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(l,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(l,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(l,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(l,"renderTextLayer",{enumerable:!0,get:function(){return A.renderTextLayer}}),Object.defineProperty(l,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(l,"shadow",{enumerable:!0,get:function(){return a.shadow}}),Object.defineProperty(l,"updateTextLayer",{enumerable:!0,get:function(){return A.updateTextLayer}}),Object.defineProperty(l,"version",{enumerable:!0,get:function(){return m.version}});var a=__w_pdfjs_require__(1),m=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),A=__w_pdfjs_require__(26),D=__w_pdfjs_require__(27),j=__w_pdfjs_require__(5),re=__w_pdfjs_require__(32),R=__w_pdfjs_require__(14),T=__w_pdfjs_require__(35),_=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf);function WorkerWrapper(){return new Worker("/assets/pdf.worker-1e501a7a.js")}const init=()=>{try{if(typeof window>"u"||!("Worker"in window))throw new Error("Web Workers not supported in this environment.");window.pdfjsWorker=WorkerWrapper,pdfExports.GlobalWorkerOptions.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfExports.version}/pdf.worker.js`}catch(l){console.log(l)}},PdfViewer=({url:l})=>{const[a,m]=reactExports.useState(null),[o,A]=reactExports.useState(1),D=reactExports.useRef(null),j=()=>{o<=1||A(o-1)},re=()=>{o>=Number(a==null?void 0:a.numPages)||A(o+1)};return reactExports.useLayoutEffect(()=>{init()},[]),reactExports.useEffect(()=>{pdfExports.getDocument(l).promise.then(R=>{m(R)})},[l]),reactExports.useEffect(()=>{a&&a.getPage(o).then(R=>{const T=D.current,_=T==null?void 0:T.getContext("2d"),F=R.getViewport({scale:1});T&&(T.height=F.height,T.width=F.width),_&&R.render({canvasContext:_,viewport:F})})},[a,o]),reactExports.useEffect(()=>{const R=T=>{T.key==="ArrowLeft"&&j(),T.key==="ArrowRight"&&re()};return window.addEventListener("keydown",R),()=>{window.removeEventListener("keydown",R)}},[j,re]),jsxs("div",{className:"text-center w-full",children:[jsxs("div",{className:"flex flex-row justify-evenly items-center w-full",children:[jsx(Button,{shape:"circle",icon:jsx(LeftOutlined,{}),size:"large",disabled:o<=1,onClick:j,type:"text",className:"bg-black opacity-50 text-white disabled:invisible"}),jsx("canvas",{ref:D}),jsx(Button,{disabled:o>=Number(a==null?void 0:a.numPages),onClick:re,shape:"circle",icon:jsx(RightOutlined,{}),size:"large",type:"text",className:"bg-black opacity-50 text-white disabled:invisible"})]}),jsx("div",{className:"fixed bottom-12 left-1/2 right-1/2 w-10",children:jsxs("span",{children:[o," / ",a?a.numPages:"-"]})})]})},TextFileReader=({url:l})=>{const[a,m]=reactExports.useState("");return reactExports.useEffect(()=>{fetch(l).then(o=>o.text()).then(o=>m(o)).catch(o=>console.error(o))},[l]),jsx("div",{className:"bg-white overflow-auto w-[100rem] top-20 absolute bottom-16 p-4",children:jsx("pre",{className:"whitespace-wrap",children:a})})};var bundle=function(l){var a={};function m(o){if(a[o])return a[o].exports;var A=a[o]={i:o,l:!1,exports:{}};return l[o].call(A.exports,A,A.exports,m),A.l=!0,A.exports}return m.m=l,m.c=a,m.d=function(o,A,D){m.o(o,A)||Object.defineProperty(o,A,{enumerable:!0,get:D})},m.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},m.t=function(o,A){if(1&A&&(o=m(o)),8&A||4&A&&typeof o=="object"&&o&&o.__esModule)return o;var D=Object.create(null);if(m.r(D),Object.defineProperty(D,"default",{enumerable:!0,value:o}),2&A&&typeof o!="string")for(var j in o)m.d(D,j,function(re){return o[re]}.bind(null,j));return D},m.n=function(o){var A=o&&o.__esModule?function(){return o.default}:function(){return o};return m.d(A,"a",A),A},m.o=function(o,A){return Object.prototype.hasOwnProperty.call(o,A)},m.p="",m(m.s=2)}([function(l,a){l.exports=requirePropTypes()},function(l,a){l.exports=reactExports},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),enterModule;function _typeof(l){return(_typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(l)}function _extends(){return(_extends=Object.assign||function(l){for(var a=1;a<arguments.length;a++){var m=arguments[a];for(var o in m)Object.prototype.hasOwnProperty.call(m,o)&&(l[o]=m[o])}return l}).apply(this,arguments)}function _classCallCheck(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(l,a){for(var m=0;m<a.length;m++){var o=a[m];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,o.key,o)}}function _createClass(l,a,m){return a&&_defineProperties(l.prototype,a),m&&_defineProperties(l,m),l}function _inherits(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),a&&_setPrototypeOf(l,a)}function _setPrototypeOf(l,a){return(_setPrototypeOf=Object.setPrototypeOf||function(m,o){return m.__proto__=o,m})(l,a)}function _createSuper(l){return function(){var a,m=_getPrototypeOf(l);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(m,arguments,o)}else a=m.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(l,a){return!a||_typeof(a)!=="object"&&typeof a!="function"?_assertThisInitialized(l):a}function _assertThisInitialized(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _getPrototypeOf(l){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(l)}function _defineProperty(l,a,m){return a in l?Object.defineProperty(l,a,{value:m,enumerable:!0,configurable:!0,writable:!0}):l[a]=m,l}enterModule=typeof reactHotLoaderGlobal<"u"?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module),typeof reactHotLoaderGlobal<"u"&&reactHotLoaderGlobal.default.signature;var ReactAudioPlayer=function(_Component){_inherits(ReactAudioPlayer,_Component);var _super=_createSuper(ReactAudioPlayer);function ReactAudioPlayer(){var l;_classCallCheck(this,ReactAudioPlayer);for(var a=arguments.length,m=new Array(a),o=0;o<a;o++)m[o]=arguments[o];return _defineProperty(_assertThisInitialized(l=_super.call.apply(_super,[this].concat(m))),"audioEl",react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef()),_defineProperty(_assertThisInitialized(l),"listenTracker",void 0),_defineProperty(_assertThisInitialized(l),"onError",function(A){var D,j;return(D=(j=l.props).onError)===null||D===void 0?void 0:D.call(j,A)}),_defineProperty(_assertThisInitialized(l),"onCanPlay",function(A){var D,j;return(D=(j=l.props).onCanPlay)===null||D===void 0?void 0:D.call(j,A)}),_defineProperty(_assertThisInitialized(l),"onCanPlayThrough",function(A){var D,j;return(D=(j=l.props).onCanPlayThrough)===null||D===void 0?void 0:D.call(j,A)}),_defineProperty(_assertThisInitialized(l),"onPlay",function(A){var D,j;l.setListenTrack(),(D=(j=l.props).onPlay)===null||D===void 0||D.call(j,A)}),_defineProperty(_assertThisInitialized(l),"onAbort",function(A){var D,j;l.clearListenTrack(),(D=(j=l.props).onAbort)===null||D===void 0||D.call(j,A)}),_defineProperty(_assertThisInitialized(l),"onEnded",function(A){var D,j;l.clearListenTrack(),(D=(j=l.props).onEnded)===null||D===void 0||D.call(j,A)}),_defineProperty(_assertThisInitialized(l),"onPause",function(A){var D,j;l.clearListenTrack(),(D=(j=l.props).onPause)===null||D===void 0||D.call(j,A)}),_defineProperty(_assertThisInitialized(l),"onSeeked",function(A){var D,j;(D=(j=l.props).onSeeked)===null||D===void 0||D.call(j,A)}),_defineProperty(_assertThisInitialized(l),"onLoadedMetadata",function(A){var D,j;(D=(j=l.props).onLoadedMetadata)===null||D===void 0||D.call(j,A)}),_defineProperty(_assertThisInitialized(l),"onVolumeChanged",function(A){var D,j;(D=(j=l.props).onVolumeChanged)===null||D===void 0||D.call(j,A)}),l}return _createClass(ReactAudioPlayer,[{key:"componentDidMount",value:function(){var l=this.audioEl.current;l&&(this.updateVolume(this.props.volume),l.addEventListener("error",this.onError),l.addEventListener("canplay",this.onCanPlay),l.addEventListener("canplaythrough",this.onCanPlayThrough),l.addEventListener("play",this.onPlay),l.addEventListener("abort",this.onAbort),l.addEventListener("ended",this.onEnded),l.addEventListener("pause",this.onPause),l.addEventListener("seeked",this.onSeeked),l.addEventListener("loadedmetadata",this.onLoadedMetadata),l.addEventListener("volumechange",this.onVolumeChanged))}},{key:"componentWillUnmount",value:function(){var l=this.audioEl.current;l&&(l.removeEventListener("error",this.onError),l.removeEventListener("canplay",this.onCanPlay),l.removeEventListener("canplaythrough",this.onCanPlayThrough),l.removeEventListener("play",this.onPlay),l.removeEventListener("abort",this.onAbort),l.removeEventListener("ended",this.onEnded),l.removeEventListener("pause",this.onPause),l.removeEventListener("seeked",this.onSeeked),l.removeEventListener("loadedmetadata",this.onLoadedMetadata),l.removeEventListener("volumechange",this.onVolumeChanged))}},{key:"componentDidUpdate",value:function(l){this.updateVolume(this.props.volume)}},{key:"setListenTrack",value:function(){var l=this;if(!this.listenTracker){var a=this.props.listenInterval;this.listenTracker=window.setInterval(function(){var m,o;l.audioEl.current&&((m=(o=l.props).onListen)===null||m===void 0||m.call(o,l.audioEl.current.currentTime))},a)}}},{key:"updateVolume",value:function(l){var a=this.audioEl.current;a!==null&&typeof l=="number"&&l!==(a==null?void 0:a.volume)&&(a.volume=l)}},{key:"clearListenTrack",value:function(){this.listenTracker&&(clearInterval(this.listenTracker),delete this.listenTracker)}},{key:"render",value:function(){var l=this.props.children||react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,"Your browser does not support the ",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("code",null,"audio")," element."),a=this.props.controls!==!1,m=this.props.title?this.props.title:this.props.src,o={};return this.props.controlsList&&(o.controlsList=this.props.controlsList),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("audio",_extends({autoPlay:this.props.autoPlay,className:"react-audio-player ".concat(this.props.className),controls:a,crossOrigin:this.props.crossOrigin,id:this.props.id,loop:this.props.loop,muted:this.props.muted,preload:this.props.preload,ref:this.audioEl,src:this.props.src,style:this.props.style,title:m},o),l)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),ReactAudioPlayer}(react__WEBPACK_IMPORTED_MODULE_0__.Component);_defineProperty(ReactAudioPlayer,"propTypes",void 0),_defineProperty(ReactAudioPlayer,"defaultProps",void 0),ReactAudioPlayer.defaultProps={autoPlay:!1,children:null,className:"",controls:!1,controlsList:"",id:"",listenInterval:1e4,loop:!1,muted:!1,onAbort:function(){},onCanPlay:function(){},onCanPlayThrough:function(){},onEnded:function(){},onError:function(){},onListen:function(){},onPause:function(){},onPlay:function(){},onSeeked:function(){},onVolumeChanged:function(){},onLoadedMetadata:function(){},preload:"metadata",style:{},title:"",volume:1},ReactAudioPlayer.propTypes={autoPlay:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,children:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.element,className:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,controls:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,controlsList:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,crossOrigin:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,id:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,listenInterval:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number,loop:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,muted:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,onAbort:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onCanPlay:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onCanPlayThrough:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onEnded:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onError:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onListen:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onLoadedMetadata:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onPause:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onPlay:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onSeeked:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onVolumeChanged:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,preload:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOf(["","none","metadata","auto"]),src:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,style:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.objectOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string),title:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,volume:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number};var _default=ReactAudioPlayer,reactHotLoader,leaveModule;__webpack_exports__.default=_default,reactHotLoader=typeof reactHotLoaderGlobal<"u"?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(ReactAudioPlayer,"ReactAudioPlayer","/home/justin/Projects/react-audio-player/src/index.tsx"),reactHotLoader.register(_default,"default","/home/justin/Projects/react-audio-player/src/index.tsx")),leaveModule=typeof reactHotLoaderGlobal<"u"?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}.call(this,__webpack_require__(3)(module))},function(l,a){l.exports=function(m){if(!m.webpackPolyfill){var o=Object.create(m);o.children||(o.children=[]),Object.defineProperty(o,"loaded",{enumerable:!0,get:function(){return o.l}}),Object.defineProperty(o,"id",{enumerable:!0,get:function(){return o.i}}),Object.defineProperty(o,"exports",{enumerable:!0}),o.webpackPolyfill=1}return o}}]),lib={},players={},utils={},loadScript=function l(a,m,o){var A=document.head||document.getElementsByTagName("head")[0],D=document.createElement("script");typeof m=="function"&&(o=m,m={}),m=m||{},o=o||function(){},D.type=m.type||"text/javascript",D.charset=m.charset||"utf8",D.async="async"in m?!!m.async:!0,D.src=a,m.attrs&&setAttributes(D,m.attrs),m.text&&(D.text=""+m.text);var j="onload"in D?stdOnEnd:ieOnEnd;j(D,o),D.onload||stdOnEnd(D,o),A.appendChild(D)};function setAttributes(l,a){for(var m in a)l.setAttribute(m,a[m])}function stdOnEnd(l,a){l.onload=function(){this.onerror=this.onload=null,a(null,l)},l.onerror=function(){this.onerror=this.onload=null,a(new Error("Failed to load "+this.src),l)}}function ieOnEnd(l,a){l.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,a(null,l))}}var isMergeableObject=function l(a){return isNonNullObject(a)&&!isSpecial(a)};function isNonNullObject(l){return!!l&&typeof l=="object"}function isSpecial(l){var a=Object.prototype.toString.call(l);return a==="[object RegExp]"||a==="[object Date]"||isReactElement(l)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(l){return l.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(l){return Array.isArray(l)?[]:{}}function cloneUnlessOtherwiseSpecified(l,a){return a.clone!==!1&&a.isMergeableObject(l)?deepmerge(emptyTarget(l),l,a):l}function defaultArrayMerge(l,a,m){return l.concat(a).map(function(o){return cloneUnlessOtherwiseSpecified(o,m)})}function getMergeFunction(l,a){if(!a.customMerge)return deepmerge;var m=a.customMerge(l);return typeof m=="function"?m:deepmerge}function getEnumerableOwnPropertySymbols(l){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(l).filter(function(a){return Object.propertyIsEnumerable.call(l,a)}):[]}function getKeys(l){return Object.keys(l).concat(getEnumerableOwnPropertySymbols(l))}function propertyIsOnObject(l,a){try{return a in l}catch{return!1}}function propertyIsUnsafe(l,a){return propertyIsOnObject(l,a)&&!(Object.hasOwnProperty.call(l,a)&&Object.propertyIsEnumerable.call(l,a))}function mergeObject(l,a,m){var o={};return m.isMergeableObject(l)&&getKeys(l).forEach(function(A){o[A]=cloneUnlessOtherwiseSpecified(l[A],m)}),getKeys(a).forEach(function(A){propertyIsUnsafe(l,A)||(propertyIsOnObject(l,A)&&m.isMergeableObject(a[A])?o[A]=getMergeFunction(A,m)(l[A],a[A],m):o[A]=cloneUnlessOtherwiseSpecified(a[A],m))}),o}function deepmerge(l,a,m){m=m||{},m.arrayMerge=m.arrayMerge||defaultArrayMerge,m.isMergeableObject=m.isMergeableObject||isMergeableObject,m.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var o=Array.isArray(a),A=Array.isArray(l),D=o===A;return D?o?m.arrayMerge(l,a,m):mergeObject(l,a,m):cloneUnlessOtherwiseSpecified(a,m)}deepmerge.all=function l(a,m){if(!Array.isArray(a))throw new Error("first argument should be an array");return a.reduce(function(o,A){return deepmerge(o,A,m)},{})};var deepmerge_1=deepmerge,cjs=deepmerge_1;Object.defineProperty(utils,"__esModule",{value:!0});utils.parseStartTime=parseStartTime;utils.parseEndTime=parseEndTime;utils.randomString=randomString;utils.queryString=queryString;utils.getSDK=getSDK;utils.getConfig=getConfig;utils.omit=omit;utils.callPlayer=callPlayer;utils.isMediaStream=isMediaStream;utils.isBlobUrl=isBlobUrl;utils.supportsWebKitPresentationMode=supportsWebKitPresentationMode;var _loadScript=_interopRequireDefault$2(loadScript),_deepmerge$1=_interopRequireDefault$2(cjs);function _interopRequireDefault$2(l){return l&&l.__esModule?l:{default:l}}function _slicedToArray(l,a){return _arrayWithHoles(l)||_iterableToArrayLimit(l,a)||_unsupportedIterableToArray$2(l,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(l,a){if(l){if(typeof l=="string")return _arrayLikeToArray$2(l,a);var m=Object.prototype.toString.call(l).slice(8,-1);if(m==="Object"&&l.constructor&&(m=l.constructor.name),m==="Map"||m==="Set")return Array.from(l);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return _arrayLikeToArray$2(l,a)}}function _arrayLikeToArray$2(l,a){(a==null||a>l.length)&&(a=l.length);for(var m=0,o=new Array(a);m<a;m++)o[m]=l[m];return o}function _iterableToArrayLimit(l,a){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(l)))){var m=[],o=!0,A=!1,D=void 0;try{for(var j=l[Symbol.iterator](),re;!(o=(re=j.next()).done)&&(m.push(re.value),!(a&&m.length===a));o=!0);}catch(R){A=!0,D=R}finally{try{!o&&j.return!=null&&j.return()}finally{if(A)throw D}}return m}}function _arrayWithHoles(l){if(Array.isArray(l))return l}var MATCH_START_QUERY=/[?&#](?:start|t)=([0-9hms]+)/,MATCH_END_QUERY=/[?&#]end=([0-9hms]+)/,MATCH_START_STAMP=/(\d+)(h|m|s)/g,MATCH_NUMERIC=/^\d+$/;function parseTimeParam(l,a){if(!(l instanceof Array)){var m=l.match(a);if(m){var o=m[1];if(o.match(MATCH_START_STAMP))return parseTimeString(o);if(MATCH_NUMERIC.test(o))return parseInt(o)}}}function parseTimeString(l){for(var a=0,m=MATCH_START_STAMP.exec(l);m!==null;){var o=m,A=_slicedToArray(o,3),D=A[1],j=A[2];j==="h"&&(a+=parseInt(D,10)*60*60),j==="m"&&(a+=parseInt(D,10)*60),j==="s"&&(a+=parseInt(D,10)),m=MATCH_START_STAMP.exec(l)}return a}function parseStartTime(l){return parseTimeParam(l,MATCH_START_QUERY)}function parseEndTime(l){return parseTimeParam(l,MATCH_END_QUERY)}function randomString(){return Math.random().toString(36).substr(2,5)}function queryString(l){return Object.keys(l).map(function(a){return"".concat(a,"=").concat(l[a])}).join("&")}function getGlobal(l){return window[l]?window[l]:window.exports&&window.exports[l]?window.exports[l]:window.module&&window.module.exports&&window.module.exports[l]?window.module.exports[l]:null}var requests={};function getSDK(l,a){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){return!0},A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:_loadScript.default,D=getGlobal(a);return D&&o(D)?Promise.resolve(D):new Promise(function(j,re){if(requests[l]){requests[l].push({resolve:j,reject:re});return}requests[l]=[{resolve:j,reject:re}];var R=function(F){requests[l].forEach(function(k){return k.resolve(F)})};if(m){var T=window[m];window[m]=function(){T&&T(),R(getGlobal(a))}}A(l,function(_){_?(requests[l].forEach(function(F){return F.reject(_)}),requests[l]=null):m||R(getGlobal(a))})})}function getConfig(l,a){return(0,_deepmerge$1.default)(a.config,l.config)}function omit(l){for(var a,m=arguments.length,o=new Array(m>1?m-1:0),A=1;A<m;A++)o[A-1]=arguments[A];for(var D=(a=[]).concat.apply(a,o),j={},re=Object.keys(l),R=0,T=re;R<T.length;R++){var _=T[R];D.indexOf(_)===-1&&(j[_]=l[_])}return j}function callPlayer(l){var a;if(!this.player||!this.player[l]){var m="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(l,"%c – ");return this.player?this.player[l]||(m+="The method was not available"):m+="The player was not available",console.warn(m,"font-weight: bold",""),null}for(var o=arguments.length,A=new Array(o>1?o-1:0),D=1;D<o;D++)A[D-1]=arguments[D];return(a=this.player)[l].apply(a,A)}function isMediaStream(l){return typeof window<"u"&&typeof window.MediaStream<"u"&&l instanceof window.MediaStream}function isBlobUrl(l){return/^blob:/.test(l)}function supportsWebKitPresentationMode(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("video"),a=/iPhone|iPod/.test(navigator.userAgent)===!1;return l.webkitSupportsPresentationMode&&typeof l.webkitSetPresentationMode=="function"&&a}var patterns={};Object.defineProperty(patterns,"__esModule",{value:!0});patterns.canPlay=patterns.FLV_EXTENSIONS=patterns.DASH_EXTENSIONS=patterns.HLS_EXTENSIONS=patterns.VIDEO_EXTENSIONS=patterns.AUDIO_EXTENSIONS=patterns.MATCH_URL_KALTURA=patterns.MATCH_URL_VIDYARD=patterns.MATCH_URL_MIXCLOUD=patterns.MATCH_URL_DAILYMOTION=patterns.MATCH_URL_TWITCH_CHANNEL=patterns.MATCH_URL_TWITCH_VIDEO=patterns.MATCH_URL_WISTIA=patterns.MATCH_URL_STREAMABLE=patterns.MATCH_URL_FACEBOOK_WATCH=patterns.MATCH_URL_FACEBOOK=patterns.MATCH_URL_VIMEO=patterns.MATCH_URL_SOUNDCLOUD=patterns.MATCH_URL_YOUTUBE=void 0;var _utils$1=utils;function _createForOfIteratorHelper(l,a){var m;if(typeof Symbol>"u"||l[Symbol.iterator]==null){if(Array.isArray(l)||(m=_unsupportedIterableToArray$1(l))||a&&l&&typeof l.length=="number"){m&&(l=m);var o=0,A=function(){};return{s:A,n:function(){return o>=l.length?{done:!0}:{done:!1,value:l[o++]}},e:function(T){throw T},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=!0,j=!1,re;return{s:function(){m=l[Symbol.iterator]()},n:function(){var T=m.next();return D=T.done,T},e:function(T){j=!0,re=T},f:function(){try{!D&&m.return!=null&&m.return()}finally{if(j)throw re}}}}function _unsupportedIterableToArray$1(l,a){if(l){if(typeof l=="string")return _arrayLikeToArray$1(l,a);var m=Object.prototype.toString.call(l).slice(8,-1);if(m==="Object"&&l.constructor&&(m=l.constructor.name),m==="Map"||m==="Set")return Array.from(l);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return _arrayLikeToArray$1(l,a)}}function _arrayLikeToArray$1(l,a){(a==null||a>l.length)&&(a=l.length);for(var m=0,o=new Array(a);m<a;m++)o[m]=l[m];return o}var MATCH_URL_YOUTUBE=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;patterns.MATCH_URL_YOUTUBE=MATCH_URL_YOUTUBE;var MATCH_URL_SOUNDCLOUD=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;patterns.MATCH_URL_SOUNDCLOUD=MATCH_URL_SOUNDCLOUD;var MATCH_URL_VIMEO=/vimeo\.com\/(?!progressive_redirect).+/;patterns.MATCH_URL_VIMEO=MATCH_URL_VIMEO;var MATCH_URL_FACEBOOK=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;patterns.MATCH_URL_FACEBOOK=MATCH_URL_FACEBOOK;var MATCH_URL_FACEBOOK_WATCH=/^https?:\/\/fb\.watch\/.+$/;patterns.MATCH_URL_FACEBOOK_WATCH=MATCH_URL_FACEBOOK_WATCH;var MATCH_URL_STREAMABLE=/streamable\.com\/([a-z0-9]+)$/;patterns.MATCH_URL_STREAMABLE=MATCH_URL_STREAMABLE;var MATCH_URL_WISTIA=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?(.*)$/;patterns.MATCH_URL_WISTIA=MATCH_URL_WISTIA;var MATCH_URL_TWITCH_VIDEO=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;patterns.MATCH_URL_TWITCH_VIDEO=MATCH_URL_TWITCH_VIDEO;var MATCH_URL_TWITCH_CHANNEL=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;patterns.MATCH_URL_TWITCH_CHANNEL=MATCH_URL_TWITCH_CHANNEL;var MATCH_URL_DAILYMOTION=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/;patterns.MATCH_URL_DAILYMOTION=MATCH_URL_DAILYMOTION;var MATCH_URL_MIXCLOUD=/mixcloud\.com\/([^/]+\/[^/]+)/;patterns.MATCH_URL_MIXCLOUD=MATCH_URL_MIXCLOUD;var MATCH_URL_VIDYARD=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;patterns.MATCH_URL_VIDYARD=MATCH_URL_VIDYARD;var MATCH_URL_KALTURA=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;patterns.MATCH_URL_KALTURA=MATCH_URL_KALTURA;var AUDIO_EXTENSIONS=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;patterns.AUDIO_EXTENSIONS=AUDIO_EXTENSIONS;var VIDEO_EXTENSIONS=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;patterns.VIDEO_EXTENSIONS=VIDEO_EXTENSIONS;var HLS_EXTENSIONS=/\.(m3u8)($|\?)/i;patterns.HLS_EXTENSIONS=HLS_EXTENSIONS;var DASH_EXTENSIONS=/\.(mpd)($|\?)/i;patterns.DASH_EXTENSIONS=DASH_EXTENSIONS;var FLV_EXTENSIONS=/\.(flv)($|\?)/i;patterns.FLV_EXTENSIONS=FLV_EXTENSIONS;var canPlayFile=function l(a){if(a instanceof Array){var m=_createForOfIteratorHelper(a),o;try{for(m.s();!(o=m.n()).done;){var A=o.value;if(typeof A=="string"&&l(A)||l(A.src))return!0}}catch(D){m.e(D)}finally{m.f()}return!1}return(0,_utils$1.isMediaStream)(a)||(0,_utils$1.isBlobUrl)(a)?!0:AUDIO_EXTENSIONS.test(a)||VIDEO_EXTENSIONS.test(a)||HLS_EXTENSIONS.test(a)||DASH_EXTENSIONS.test(a)||FLV_EXTENSIONS.test(a)},canPlay={youtube:function l(a){return a instanceof Array?a.every(function(m){return MATCH_URL_YOUTUBE.test(m)}):MATCH_URL_YOUTUBE.test(a)},soundcloud:function l(a){return MATCH_URL_SOUNDCLOUD.test(a)&&!AUDIO_EXTENSIONS.test(a)},vimeo:function l(a){return MATCH_URL_VIMEO.test(a)&&!VIDEO_EXTENSIONS.test(a)&&!HLS_EXTENSIONS.test(a)},facebook:function l(a){return MATCH_URL_FACEBOOK.test(a)||MATCH_URL_FACEBOOK_WATCH.test(a)},streamable:function l(a){return MATCH_URL_STREAMABLE.test(a)},wistia:function l(a){return MATCH_URL_WISTIA.test(a)},twitch:function l(a){return MATCH_URL_TWITCH_VIDEO.test(a)||MATCH_URL_TWITCH_CHANNEL.test(a)},dailymotion:function l(a){return MATCH_URL_DAILYMOTION.test(a)},mixcloud:function l(a){return MATCH_URL_MIXCLOUD.test(a)},vidyard:function l(a){return MATCH_URL_VIDYARD.test(a)},kaltura:function l(a){return MATCH_URL_KALTURA.test(a)},file:canPlayFile};patterns.canPlay=canPlay;var YouTube={},hasRequiredYouTube;function requireYouTube(){return hasRequiredYouTube||(hasRequiredYouTube=1,function(l){function a(U){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(K){return typeof K}:a=function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},a(U)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var U=new WeakMap;return D=function(){return U},U}function j(U){if(U&&U.__esModule)return U;if(U===null||a(U)!=="object"&&typeof U!="function")return{default:U};var z=D();if(z&&z.has(U))return z.get(U);var K={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in U)if(Object.prototype.hasOwnProperty.call(U,L)){var y=V?Object.getOwnPropertyDescriptor(U,L):null;y&&(y.get||y.set)?Object.defineProperty(K,L,y):K[L]=U[L]}return K.default=U,z&&z.set(U,K),K}function re(U,z){var K=Object.keys(U);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(U);z&&(V=V.filter(function(L){return Object.getOwnPropertyDescriptor(U,L).enumerable})),K.push.apply(K,V)}return K}function R(U){for(var z=1;z<arguments.length;z++){var K=arguments[z]!=null?arguments[z]:{};z%2?re(Object(K),!0).forEach(function(V){t(U,V,K[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(K)):re(Object(K)).forEach(function(V){Object.defineProperty(U,V,Object.getOwnPropertyDescriptor(K,V))})}return U}function T(U,z){return g(U)||S(U,z)||F(U,z)||_()}function _(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(U,z){if(U){if(typeof U=="string")return k(U,z);var K=Object.prototype.toString.call(U).slice(8,-1);if(K==="Object"&&U.constructor&&(K=U.constructor.name),K==="Map"||K==="Set")return Array.from(U);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return k(U,z)}}function k(U,z){(z==null||z>U.length)&&(z=U.length);for(var K=0,V=new Array(z);K<z;K++)V[K]=U[K];return V}function S(U,z){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(U)))){var K=[],V=!0,L=!1,y=void 0;try{for(var p=U[Symbol.iterator](),w;!(V=(w=p.next()).done)&&(K.push(w.value),!(z&&K.length===z));V=!0);}catch(X){L=!0,y=X}finally{try{!V&&p.return!=null&&p.return()}finally{if(L)throw y}}return K}}function g(U){if(Array.isArray(U))return U}function b(U,z){if(!(U instanceof z))throw new TypeError("Cannot call a class as a function")}function u(U,z){for(var K=0;K<z.length;K++){var V=z[K];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(U,V.key,V)}}function h(U,z,K){return z&&u(U.prototype,z),K&&u(U,K),U}function I(U,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(z&&z.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),z&&x(U,z)}function x(U,z){return x=Object.setPrototypeOf||function(V,L){return V.__proto__=L,V},x(U,z)}function E(U){var z=r();return function(){var V=e(U),L;if(z){var y=e(this).constructor;L=Reflect.construct(V,arguments,y)}else L=V.apply(this,arguments);return s(this,L)}}function s(U,z){return z&&(a(z)==="object"||typeof z=="function")?z:c(U)}function c(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function e(U){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)},e(U)}function t(U,z,K){return z in U?Object.defineProperty(U,z,{value:K,enumerable:!0,configurable:!0,writable:!0}):U[z]=K,U}var n="https://www.youtube.com/iframe_api",i="YT",f="onYouTubeIframeAPIReady",M=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,P=/user\/([a-zA-Z0-9_-]+)\/?/,B=/youtube-nocookie\.com/,J="https://www.youtube-nocookie.com",H=function(U){I(K,U);var z=E(K);function K(){var V;b(this,K);for(var L=arguments.length,y=new Array(L),p=0;p<L;p++)y[p]=arguments[p];return V=z.call.apply(z,[this].concat(y)),t(c(V),"callPlayer",o.callPlayer),t(c(V),"parsePlaylist",function(w){if(w instanceof Array)return{listType:"playlist",playlist:w.map(V.getID).join(",")};if(M.test(w)){var X=w.match(M),W=T(X,2),Z=W[1];return{listType:"playlist",list:Z.replace(/^UC/,"UU")}}if(P.test(w)){var ee=w.match(P),ae=T(ee,2),ie=ae[1];return{listType:"user_uploads",list:ie}}return{}}),t(c(V),"onStateChange",function(w){var X=w.data,W=V.props,Z=W.onPlay,ee=W.onPause,ae=W.onBuffer,ie=W.onBufferEnd,Y=W.onEnded,q=W.onReady,d=W.loop,v=W.config,C=v.playerVars,N=v.onUnstarted,$=window[i].PlayerState,Q=$.UNSTARTED,ce=$.PLAYING,le=$.PAUSED,ue=$.BUFFERING,de=$.ENDED,ye=$.CUED;if(X===Q&&N(),X===ce&&(Z(),ie()),X===le&&ee(),X===ue&&ae(),X===de){var fe=!!V.callPlayer("getPlaylist");d&&!fe&&(C.start?V.seekTo(C.start):V.play()),Y()}X===ye&&q()}),t(c(V),"mute",function(){V.callPlayer("mute")}),t(c(V),"unmute",function(){V.callPlayer("unMute")}),t(c(V),"ref",function(w){V.container=w}),V}return h(K,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(L){return!L||L instanceof Array||M.test(L)?null:L.match(A.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(L,y){var p=this,w=this.props,X=w.playing,W=w.muted,Z=w.playsinline,ee=w.controls,ae=w.loop,ie=w.config,Y=w.onError,q=ie.playerVars,d=ie.embedOptions,v=this.getID(L);if(y){if(M.test(L)||P.test(L)||L instanceof Array){this.player.loadPlaylist(this.parsePlaylist(L));return}this.player.cueVideoById({videoId:v,startSeconds:(0,o.parseStartTime)(L)||q.start,endSeconds:(0,o.parseEndTime)(L)||q.end});return}(0,o.getSDK)(n,i,f,function(C){return C.loaded}).then(function(C){p.container&&(p.player=new C.Player(p.container,R({width:"100%",height:"100%",videoId:v,playerVars:R(R({autoplay:X?1:0,mute:W?1:0,controls:ee?1:0,start:(0,o.parseStartTime)(L),end:(0,o.parseEndTime)(L),origin:window.location.origin,playsinline:Z?1:0},p.parsePlaylist(L)),q),events:{onReady:function(){ae&&p.player.setLoop(!0),p.props.onReady()},onPlaybackRateChange:function($){return p.props.onPlaybackRateChange($.data)},onStateChange:p.onStateChange,onError:function($){return Y($.data)}},host:B.test(L)?J:void 0},d)))},Y),d.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayer’s callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(L){this.callPlayer("seekTo",L),this.props.playing||this.pause()}},{key:"setVolume",value:function(L){this.callPlayer("setVolume",L*100)}},{key:"setPlaybackRate",value:function(L){this.callPlayer("setPlaybackRate",L)}},{key:"setLoop",value:function(L){this.callPlayer("setLoop",L)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var L=this.props.display,y={width:"100%",height:"100%",display:L};return m.default.createElement("div",{style:y},m.default.createElement("div",{ref:this.ref}))}}]),K}(m.Component);l.default=H,t(H,"displayName","YouTube"),t(H,"canPlay",A.canPlay.youtube)}(YouTube)),YouTube}var SoundCloud={},hasRequiredSoundCloud;function requireSoundCloud(){return hasRequiredSoundCloud||(hasRequiredSoundCloud=1,function(l){function a(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(t){return typeof t}:a=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(r)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return D=function(){return r},r}function j(r){if(r&&r.__esModule)return r;if(r===null||a(r)!=="object"&&typeof r!="function")return{default:r};var e=D();if(e&&e.has(r))return e.get(r);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var f=n?Object.getOwnPropertyDescriptor(r,i):null;f&&(f.get||f.set)?Object.defineProperty(t,i,f):t[i]=r[i]}return t.default=r,e&&e.set(r,t),t}function re(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function R(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?re(Object(t),!0).forEach(function(n){x(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function T(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function F(r,e,t){return e&&_(r.prototype,e),t&&_(r,t),r}function k(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&S(r,e)}function S(r,e){return S=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},S(r,e)}function g(r){var e=h();return function(){var n=I(r),i;if(e){var f=I(this).constructor;i=Reflect.construct(n,arguments,f)}else i=n.apply(this,arguments);return b(this,i)}}function b(r,e){return e&&(a(e)==="object"||typeof e=="function")?e:u(r)}function u(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(r){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},I(r)}function x(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var E="https://w.soundcloud.com/player/api.js",s="SC",c=function(r){k(t,r);var e=g(t);function t(){var n;T(this,t);for(var i=arguments.length,f=new Array(i),M=0;M<i;M++)f[M]=arguments[M];return n=e.call.apply(e,[this].concat(f)),x(u(n),"callPlayer",o.callPlayer),x(u(n),"duration",null),x(u(n),"currentTime",null),x(u(n),"fractionLoaded",null),x(u(n),"mute",function(){n.setVolume(0)}),x(u(n),"unmute",function(){n.props.volume!==null&&n.setVolume(n.props.volume)}),x(u(n),"ref",function(P){n.iframe=P}),n}return F(t,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(i,f){var M=this;(0,o.getSDK)(E,s).then(function(P){if(M.iframe){var B=P.Widget.Events,J=B.PLAY,H=B.PLAY_PROGRESS,U=B.PAUSE,z=B.FINISH,K=B.ERROR;f||(M.player=P.Widget(M.iframe),M.player.bind(J,M.props.onPlay),M.player.bind(U,function(){var V=M.duration-M.currentTime;V<.05||M.props.onPause()}),M.player.bind(H,function(V){M.currentTime=V.currentPosition/1e3,M.fractionLoaded=V.loadedProgress}),M.player.bind(z,function(){return M.props.onEnded()}),M.player.bind(K,function(V){return M.props.onError(V)})),M.player.load(i,R(R({},M.props.config.options),{},{callback:function(){M.player.getDuration(function(L){M.duration=L/1e3,M.props.onReady()})}}))}})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(i){this.callPlayer("seekTo",i*1e3)}},{key:"setVolume",value:function(i){this.callPlayer("setVolume",i*100)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.fractionLoaded*this.duration}},{key:"render",value:function(){var i=this.props.display,f={width:"100%",height:"100%",display:i};return m.default.createElement("iframe",{ref:this.ref,src:"https://w.soundcloud.com/player/?url=".concat(encodeURIComponent(this.props.url)),style:f,frameBorder:0,allow:"autoplay"})}}]),t}(m.Component);l.default=c,x(c,"displayName","SoundCloud"),x(c,"canPlay",A.canPlay.soundcloud),x(c,"loopOnEnded",!0)}(SoundCloud)),SoundCloud}var Vimeo={},hasRequiredVimeo;function requireVimeo(){return hasRequiredVimeo||(hasRequiredVimeo=1,function(l){function a(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(t){return typeof t}:a=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(r)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return D=function(){return r},r}function j(r){if(r&&r.__esModule)return r;if(r===null||a(r)!=="object"&&typeof r!="function")return{default:r};var e=D();if(e&&e.has(r))return e.get(r);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var f=n?Object.getOwnPropertyDescriptor(r,i):null;f&&(f.get||f.set)?Object.defineProperty(t,i,f):t[i]=r[i]}return t.default=r,e&&e.set(r,t),t}function re(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function R(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?re(Object(t),!0).forEach(function(n){x(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function T(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function F(r,e,t){return e&&_(r.prototype,e),t&&_(r,t),r}function k(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&S(r,e)}function S(r,e){return S=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},S(r,e)}function g(r){var e=h();return function(){var n=I(r),i;if(e){var f=I(this).constructor;i=Reflect.construct(n,arguments,f)}else i=n.apply(this,arguments);return b(this,i)}}function b(r,e){return e&&(a(e)==="object"||typeof e=="function")?e:u(r)}function u(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(r){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},I(r)}function x(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var E="https://player.vimeo.com/api/player.js",s="Vimeo",c=function(r){k(t,r);var e=g(t);function t(){var n;T(this,t);for(var i=arguments.length,f=new Array(i),M=0;M<i;M++)f[M]=arguments[M];return n=e.call.apply(e,[this].concat(f)),x(u(n),"callPlayer",o.callPlayer),x(u(n),"duration",null),x(u(n),"currentTime",null),x(u(n),"secondsLoaded",null),x(u(n),"mute",function(){n.setMuted(!0)}),x(u(n),"unmute",function(){n.setMuted(!1)}),x(u(n),"ref",function(P){n.container=P}),n}return F(t,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(i){var f=this;this.duration=null,(0,o.getSDK)(E,s).then(function(M){if(f.container){var P=f.props.config,B=P.playerOptions,J=P.title;f.player=new M.Player(f.container,R({url:i,autoplay:f.props.playing,muted:f.props.muted,loop:f.props.loop,playsinline:f.props.playsinline,controls:f.props.controls},B)),f.player.ready().then(function(){var H=f.container.querySelector("iframe");H.style.width="100%",H.style.height="100%",J&&(H.title=J)}).catch(f.props.onError),f.player.on("loaded",function(){f.props.onReady(),f.refreshDuration()}),f.player.on("play",function(){f.props.onPlay(),f.refreshDuration()}),f.player.on("pause",f.props.onPause),f.player.on("seeked",function(H){return f.props.onSeek(H.seconds)}),f.player.on("ended",f.props.onEnded),f.player.on("error",f.props.onError),f.player.on("timeupdate",function(H){var U=H.seconds;f.currentTime=U}),f.player.on("progress",function(H){var U=H.seconds;f.secondsLoaded=U}),f.player.on("bufferstart",f.props.onBuffer),f.player.on("bufferend",f.props.onBufferEnd),f.player.on("playbackratechange",function(H){return f.props.onPlaybackRateChange(H.playbackRate)})}},this.props.onError)}},{key:"refreshDuration",value:function(){var i=this;this.player.getDuration().then(function(f){i.duration=f})}},{key:"play",value:function(){var i=this.callPlayer("play");i&&i.catch(this.props.onError)}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("unload")}},{key:"seekTo",value:function(i){this.callPlayer("setCurrentTime",i)}},{key:"setVolume",value:function(i){this.callPlayer("setVolume",i)}},{key:"setMuted",value:function(i){this.callPlayer("setMuted",i)}},{key:"setLoop",value:function(i){this.callPlayer("setLoop",i)}},{key:"setPlaybackRate",value:function(i){this.callPlayer("setPlaybackRate",i)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var i=this.props.display,f={width:"100%",height:"100%",overflow:"hidden",display:i};return m.default.createElement("div",{key:this.props.url,ref:this.ref,style:f})}}]),t}(m.Component);l.default=c,x(c,"displayName","Vimeo"),x(c,"canPlay",A.canPlay.vimeo),x(c,"forceLoad",!0)}(Vimeo)),Vimeo}var Facebook={},hasRequiredFacebook;function requireFacebook(){return hasRequiredFacebook||(hasRequiredFacebook=1,function(l){function a(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(n){return typeof n}:a=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},a(e)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return D=function(){return e},e}function j(e){if(e&&e.__esModule)return e;if(e===null||a(e)!=="object"&&typeof e!="function")return{default:e};var t=D();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if(Object.prototype.hasOwnProperty.call(e,f)){var M=i?Object.getOwnPropertyDescriptor(e,f):null;M&&(M.get||M.set)?Object.defineProperty(n,f,M):n[f]=e[f]}return n.default=e,t&&t.set(e,n),n}function re(){return re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},re.apply(this,arguments)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}function F(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(i,f){return i.__proto__=f,i},k(e,t)}function S(e){var t=u();return function(){var i=h(e),f;if(t){var M=h(this).constructor;f=Reflect.construct(i,arguments,M)}else f=i.apply(this,arguments);return g(this,f)}}function g(e,t){return t&&(a(t)==="object"||typeof t=="function")?t:b(e)}function b(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},h(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x="https://connect.facebook.net/en_US/sdk.js",E="FB",s="fbAsyncInit",c="facebook-player-",r=function(e){F(n,e);var t=S(n);function n(){var i;R(this,n);for(var f=arguments.length,M=new Array(f),P=0;P<f;P++)M[P]=arguments[P];return i=t.call.apply(t,[this].concat(M)),I(b(i),"callPlayer",o.callPlayer),I(b(i),"playerID",i.props.config.playerId||"".concat(c).concat((0,o.randomString)())),I(b(i),"mute",function(){i.callPlayer("mute")}),I(b(i),"unmute",function(){i.callPlayer("unmute")}),i}return _(n,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(f,M){var P=this;if(M){(0,o.getSDK)(x,E,s).then(function(B){return B.XFBML.parse()});return}(0,o.getSDK)(x,E,s).then(function(B){B.init({appId:P.props.config.appId,xfbml:!0,version:P.props.config.version}),B.Event.subscribe("xfbml.render",function(J){P.props.onLoaded()}),B.Event.subscribe("xfbml.ready",function(J){J.type==="video"&&J.id===P.playerID&&(P.player=J.instance,P.player.subscribe("startedPlaying",P.props.onPlay),P.player.subscribe("paused",P.props.onPause),P.player.subscribe("finishedPlaying",P.props.onEnded),P.player.subscribe("startedBuffering",P.props.onBuffer),P.player.subscribe("finishedBuffering",P.props.onBufferEnd),P.player.subscribe("error",P.props.onError),P.props.muted?P.callPlayer("mute"):P.callPlayer("unmute"),P.props.onReady(),document.getElementById(P.playerID).querySelector("iframe").style.visibility="visible")})})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(f){this.callPlayer("seek",f)}},{key:"setVolume",value:function(f){this.callPlayer("setVolume",f)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentPosition")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var f=this.props.config.attributes,M={width:"100%",height:"100%"};return m.default.createElement("div",re({style:M,id:this.playerID,className:"fb-video","data-href":this.props.url,"data-autoplay":this.props.playing?"true":"false","data-allowfullscreen":"true","data-controls":this.props.controls?"true":"false"},f))}}]),n}(m.Component);l.default=r,I(r,"displayName","Facebook"),I(r,"canPlay",A.canPlay.facebook),I(r,"loopOnEnded",!0)}(Facebook)),Facebook}var Streamable={},hasRequiredStreamable;function requireStreamable(){return hasRequiredStreamable||(hasRequiredStreamable=1,function(l){function a(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(r){return typeof r}:a=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},a(s)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return D=function(){return s},s}function j(s){if(s&&s.__esModule)return s;if(s===null||a(s)!=="object"&&typeof s!="function")return{default:s};var c=D();if(c&&c.has(s))return c.get(s);var r={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in s)if(Object.prototype.hasOwnProperty.call(s,t)){var n=e?Object.getOwnPropertyDescriptor(s,t):null;n&&(n.get||n.set)?Object.defineProperty(r,t,n):r[t]=s[t]}return r.default=s,c&&c.set(s,r),r}function re(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")}function R(s,c){for(var r=0;r<c.length;r++){var e=c[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(s,e.key,e)}}function T(s,c,r){return c&&R(s.prototype,c),r&&R(s,r),s}function _(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(c&&c.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),c&&F(s,c)}function F(s,c){return F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},F(s,c)}function k(s){var c=b();return function(){var e=u(s),t;if(c){var n=u(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return S(this,t)}}function S(s,c){return c&&(a(c)==="object"||typeof c=="function")?c:g(s)}function g(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function u(s){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},u(s)}function h(s,c,r){return c in s?Object.defineProperty(s,c,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[c]=r,s}var I="https://cdn.embed.ly/player-0.1.0.min.js",x="playerjs",E=function(s){_(r,s);var c=k(r);function r(){var e;re(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=c.call.apply(c,[this].concat(n)),h(g(e),"callPlayer",o.callPlayer),h(g(e),"duration",null),h(g(e),"currentTime",null),h(g(e),"secondsLoaded",null),h(g(e),"mute",function(){e.callPlayer("mute")}),h(g(e),"unmute",function(){e.callPlayer("unmute")}),h(g(e),"ref",function(f){e.iframe=f}),e}return T(r,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t){var n=this;(0,o.getSDK)(I,x).then(function(i){n.iframe&&(n.player=new i.Player(n.iframe),n.player.setLoop(n.props.loop),n.player.on("ready",n.props.onReady),n.player.on("play",n.props.onPlay),n.player.on("pause",n.props.onPause),n.player.on("seeked",n.props.onSeek),n.player.on("ended",n.props.onEnded),n.player.on("error",n.props.onError),n.player.on("timeupdate",function(f){var M=f.duration,P=f.seconds;n.duration=M,n.currentTime=P}),n.player.on("buffered",function(f){var M=f.percent;n.duration&&(n.secondsLoaded=n.duration*M)}),n.props.muted&&n.player.mute())},this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(t){this.callPlayer("setCurrentTime",t)}},{key:"setVolume",value:function(t){this.callPlayer("setVolume",t*100)}},{key:"setLoop",value:function(t){this.callPlayer("setLoop",t)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var t=this.props.url.match(A.MATCH_URL_STREAMABLE)[1],n={width:"100%",height:"100%"};return m.default.createElement("iframe",{ref:this.ref,src:"https://streamable.com/o/".concat(t),frameBorder:"0",scrolling:"no",style:n,allow:"encrypted-media; autoplay; fullscreen;"})}}]),r}(m.Component);l.default=E,h(E,"displayName","Streamable"),h(E,"canPlay",A.canPlay.streamable)}(Streamable)),Streamable}var Wistia={},hasRequiredWistia;function requireWistia(){return hasRequiredWistia||(hasRequiredWistia=1,function(l){function a(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(n){return typeof n}:a=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},a(e)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return D=function(){return e},e}function j(e){if(e&&e.__esModule)return e;if(e===null||a(e)!=="object"&&typeof e!="function")return{default:e};var t=D();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if(Object.prototype.hasOwnProperty.call(e,f)){var M=i?Object.getOwnPropertyDescriptor(e,f):null;M&&(M.get||M.set)?Object.defineProperty(n,f,M):n[f]=e[f]}return n.default=e,t&&t.set(e,n),n}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?re(Object(n),!0).forEach(function(i){x(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function F(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function k(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return S=Object.setPrototypeOf||function(i,f){return i.__proto__=f,i},S(e,t)}function g(e){var t=h();return function(){var i=I(e),f;if(t){var M=I(this).constructor;f=Reflect.construct(i,arguments,M)}else f=i.apply(this,arguments);return b(this,f)}}function b(e,t){return t&&(a(t)==="object"||typeof t=="function")?t:u(e)}function u(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},I(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E="https://fast.wistia.com/assets/external/E-v1.js",s="Wistia",c="wistia-player-",r=function(e){k(n,e);var t=g(n);function n(){var i;T(this,n);for(var f=arguments.length,M=new Array(f),P=0;P<f;P++)M[P]=arguments[P];return i=t.call.apply(t,[this].concat(M)),x(u(i),"callPlayer",o.callPlayer),x(u(i),"playerID",i.props.config.playerId||"".concat(c).concat((0,o.randomString)())),x(u(i),"onPlay",function(){var B;return(B=i.props).onPlay.apply(B,arguments)}),x(u(i),"onPause",function(){var B;return(B=i.props).onPause.apply(B,arguments)}),x(u(i),"onSeek",function(){var B;return(B=i.props).onSeek.apply(B,arguments)}),x(u(i),"onEnded",function(){var B;return(B=i.props).onEnded.apply(B,arguments)}),x(u(i),"onPlaybackRateChange",function(){var B;return(B=i.props).onPlaybackRateChange.apply(B,arguments)}),x(u(i),"mute",function(){i.callPlayer("mute")}),x(u(i),"unmute",function(){i.callPlayer("unmute")}),i}return F(n,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(f){var M=this,P=this.props,B=P.playing,J=P.muted,H=P.controls,U=P.onReady,z=P.config,K=P.onError;(0,o.getSDK)(E,s).then(function(V){z.customControls&&z.customControls.forEach(function(L){return V.defineControl(L)}),window._wq=window._wq||[],window._wq.push({id:M.playerID,options:R({autoPlay:B,silentAutoPlay:"allow",muted:J,controlsVisibleOnLoad:H,fullscreenButton:H,playbar:H,playbackRateControl:H,qualityControl:H,volumeControl:H,settingsControl:H,smallPlayButton:H},z.options),onReady:function(y){M.player=y,M.unbind(),M.player.bind("play",M.onPlay),M.player.bind("pause",M.onPause),M.player.bind("seek",M.onSeek),M.player.bind("end",M.onEnded),M.player.bind("playbackratechange",M.onPlaybackRateChange),U()}})},K)}},{key:"unbind",value:function(){this.player.unbind("play",this.onPlay),this.player.unbind("pause",this.onPause),this.player.unbind("seek",this.onSeek),this.player.unbind("end",this.onEnded),this.player.unbind("playbackratechange",this.onPlaybackRateChange)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.unbind(),this.callPlayer("remove")}},{key:"seekTo",value:function(f){this.callPlayer("time",f)}},{key:"setVolume",value:function(f){this.callPlayer("volume",f)}},{key:"setPlaybackRate",value:function(f){this.callPlayer("playbackRate",f)}},{key:"getDuration",value:function(){return this.callPlayer("duration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("time")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var f=this.props.url,M=f&&f.match(A.MATCH_URL_WISTIA)[1],P="wistia_embed wistia_async_".concat(M),B={width:"100%",height:"100%"};return m.default.createElement("div",{id:this.playerID,key:M,className:P,style:B})}}]),n}(m.Component);l.default=r,x(r,"displayName","Wistia"),x(r,"canPlay",A.canPlay.wistia),x(r,"loopOnEnded",!0)}(Wistia)),Wistia}var Twitch={},hasRequiredTwitch;function requireTwitch(){return hasRequiredTwitch||(hasRequiredTwitch=1,function(l){function a(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(n){return typeof n}:a=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},a(e)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return D=function(){return e},e}function j(e){if(e&&e.__esModule)return e;if(e===null||a(e)!=="object"&&typeof e!="function")return{default:e};var t=D();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if(Object.prototype.hasOwnProperty.call(e,f)){var M=i?Object.getOwnPropertyDescriptor(e,f):null;M&&(M.get||M.set)?Object.defineProperty(n,f,M):n[f]=e[f]}return n.default=e,t&&t.set(e,n),n}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?re(Object(n),!0).forEach(function(i){x(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function F(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function k(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return S=Object.setPrototypeOf||function(i,f){return i.__proto__=f,i},S(e,t)}function g(e){var t=h();return function(){var i=I(e),f;if(t){var M=I(this).constructor;f=Reflect.construct(i,arguments,M)}else f=i.apply(this,arguments);return b(this,f)}}function b(e,t){return t&&(a(t)==="object"||typeof t=="function")?t:u(e)}function u(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},I(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E="https://player.twitch.tv/js/embed/v1.js",s="Twitch",c="twitch-player-",r=function(e){k(n,e);var t=g(n);function n(){var i;T(this,n);for(var f=arguments.length,M=new Array(f),P=0;P<f;P++)M[P]=arguments[P];return i=t.call.apply(t,[this].concat(M)),x(u(i),"callPlayer",o.callPlayer),x(u(i),"playerID",i.props.config.playerId||"".concat(c).concat((0,o.randomString)())),x(u(i),"mute",function(){i.callPlayer("setMuted",!0)}),x(u(i),"unmute",function(){i.callPlayer("setMuted",!1)}),i}return F(n,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(f,M){var P=this,B=this.props,J=B.playsinline,H=B.onError,U=B.config,z=B.controls,K=A.MATCH_URL_TWITCH_CHANNEL.test(f),V=K?f.match(A.MATCH_URL_TWITCH_CHANNEL)[1]:f.match(A.MATCH_URL_TWITCH_VIDEO)[1];if(M){K?this.player.setChannel(V):this.player.setVideo("v"+V);return}(0,o.getSDK)(E,s).then(function(L){P.player=new L.Player(P.playerID,R({video:K?"":V,channel:K?V:"",height:"100%",width:"100%",playsinline:J,autoplay:P.props.playing,muted:P.props.muted,controls:K?!0:z,time:(0,o.parseStartTime)(f)},U.options));var y=L.Player,p=y.READY,w=y.PLAYING,X=y.PAUSE,W=y.ENDED,Z=y.ONLINE,ee=y.OFFLINE,ae=y.SEEK;P.player.addEventListener(p,P.props.onReady),P.player.addEventListener(w,P.props.onPlay),P.player.addEventListener(X,P.props.onPause),P.player.addEventListener(W,P.props.onEnded),P.player.addEventListener(ae,P.props.onSeek),P.player.addEventListener(Z,P.props.onLoaded),P.player.addEventListener(ee,P.props.onLoaded)},H)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("pause")}},{key:"seekTo",value:function(f){this.callPlayer("seek",f)}},{key:"setVolume",value:function(f){this.callPlayer("setVolume",f)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var f={width:"100%",height:"100%"};return m.default.createElement("div",{style:f,id:this.playerID})}}]),n}(m.Component);l.default=r,x(r,"displayName","Twitch"),x(r,"canPlay",A.canPlay.twitch),x(r,"loopOnEnded",!0)}(Twitch)),Twitch}var DailyMotion={},hasRequiredDailyMotion;function requireDailyMotion(){return hasRequiredDailyMotion||(hasRequiredDailyMotion=1,function(l){function a(P){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(J){return typeof J}:a=function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},a(P)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var P=new WeakMap;return D=function(){return P},P}function j(P){if(P&&P.__esModule)return P;if(P===null||a(P)!=="object"&&typeof P!="function")return{default:P};var B=D();if(B&&B.has(P))return B.get(P);var J={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var U in P)if(Object.prototype.hasOwnProperty.call(P,U)){var z=H?Object.getOwnPropertyDescriptor(P,U):null;z&&(z.get||z.set)?Object.defineProperty(J,U,z):J[U]=P[U]}return J.default=P,B&&B.set(P,J),J}function re(P,B){var J=Object.keys(P);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(P);B&&(H=H.filter(function(U){return Object.getOwnPropertyDescriptor(P,U).enumerable})),J.push.apply(J,H)}return J}function R(P){for(var B=1;B<arguments.length;B++){var J=arguments[B]!=null?arguments[B]:{};B%2?re(Object(J),!0).forEach(function(H){t(P,H,J[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(J)):re(Object(J)).forEach(function(H){Object.defineProperty(P,H,Object.getOwnPropertyDescriptor(J,H))})}return P}function T(P,B){return g(P)||S(P,B)||F(P,B)||_()}function _(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(P,B){if(P){if(typeof P=="string")return k(P,B);var J=Object.prototype.toString.call(P).slice(8,-1);if(J==="Object"&&P.constructor&&(J=P.constructor.name),J==="Map"||J==="Set")return Array.from(P);if(J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J))return k(P,B)}}function k(P,B){(B==null||B>P.length)&&(B=P.length);for(var J=0,H=new Array(B);J<B;J++)H[J]=P[J];return H}function S(P,B){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(P)))){var J=[],H=!0,U=!1,z=void 0;try{for(var K=P[Symbol.iterator](),V;!(H=(V=K.next()).done)&&(J.push(V.value),!(B&&J.length===B));H=!0);}catch(L){U=!0,z=L}finally{try{!H&&K.return!=null&&K.return()}finally{if(U)throw z}}return J}}function g(P){if(Array.isArray(P))return P}function b(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")}function u(P,B){for(var J=0;J<B.length;J++){var H=B[J];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(P,H.key,H)}}function h(P,B,J){return B&&u(P.prototype,B),J&&u(P,J),P}function I(P,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(B&&B.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),B&&x(P,B)}function x(P,B){return x=Object.setPrototypeOf||function(H,U){return H.__proto__=U,H},x(P,B)}function E(P){var B=r();return function(){var H=e(P),U;if(B){var z=e(this).constructor;U=Reflect.construct(H,arguments,z)}else U=H.apply(this,arguments);return s(this,U)}}function s(P,B){return B&&(a(B)==="object"||typeof B=="function")?B:c(P)}function c(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function e(P){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(J){return J.__proto__||Object.getPrototypeOf(J)},e(P)}function t(P,B,J){return B in P?Object.defineProperty(P,B,{value:J,enumerable:!0,configurable:!0,writable:!0}):P[B]=J,P}var n="https://api.dmcdn.net/all.js",i="DM",f="dmAsyncInit",M=function(P){I(J,P);var B=E(J);function J(){var H;b(this,J);for(var U=arguments.length,z=new Array(U),K=0;K<U;K++)z[K]=arguments[K];return H=B.call.apply(B,[this].concat(z)),t(c(H),"callPlayer",o.callPlayer),t(c(H),"onDurationChange",function(){var V=H.getDuration();H.props.onDuration(V)}),t(c(H),"mute",function(){H.callPlayer("setMuted",!0)}),t(c(H),"unmute",function(){H.callPlayer("setMuted",!1)}),t(c(H),"ref",function(V){H.container=V}),H}return h(J,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(U){var z=this,K=this.props,V=K.controls,L=K.config,y=K.onError,p=K.playing,w=U.match(A.MATCH_URL_DAILYMOTION),X=T(w,2),W=X[1];if(this.player){this.player.load(W,{start:(0,o.parseStartTime)(U),autoplay:p});return}(0,o.getSDK)(n,i,f,function(Z){return Z.player}).then(function(Z){if(z.container){var ee=Z.player;z.player=new ee(z.container,{width:"100%",height:"100%",video:W,params:R({controls:V,autoplay:z.props.playing,mute:z.props.muted,start:(0,o.parseStartTime)(U),origin:window.location.origin},L.params),events:{apiready:z.props.onReady,seeked:function(){return z.props.onSeek(z.player.currentTime)},video_end:z.props.onEnded,durationchange:z.onDurationChange,pause:z.props.onPause,playing:z.props.onPlay,waiting:z.props.onBuffer,error:function(ie){return y(ie)}}})}},y)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(U){this.callPlayer("seek",U)}},{key:"setVolume",value:function(U){this.callPlayer("setVolume",U)}},{key:"getDuration",value:function(){return this.player.duration||null}},{key:"getCurrentTime",value:function(){return this.player.currentTime}},{key:"getSecondsLoaded",value:function(){return this.player.bufferedTime}},{key:"render",value:function(){var U=this.props.display,z={width:"100%",height:"100%",display:U};return m.default.createElement("div",{style:z},m.default.createElement("div",{ref:this.ref}))}}]),J}(m.Component);l.default=M,t(M,"displayName","DailyMotion"),t(M,"canPlay",A.canPlay.dailymotion),t(M,"loopOnEnded",!0)}(DailyMotion)),DailyMotion}var Mixcloud={},hasRequiredMixcloud;function requireMixcloud(){return hasRequiredMixcloud||(hasRequiredMixcloud=1,function(l){function a(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(t){return typeof t}:a=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(r)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return D=function(){return r},r}function j(r){if(r&&r.__esModule)return r;if(r===null||a(r)!=="object"&&typeof r!="function")return{default:r};var e=D();if(e&&e.has(r))return e.get(r);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var f=n?Object.getOwnPropertyDescriptor(r,i):null;f&&(f.get||f.set)?Object.defineProperty(t,i,f):t[i]=r[i]}return t.default=r,e&&e.set(r,t),t}function re(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function R(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?re(Object(t),!0).forEach(function(n){x(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function T(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function F(r,e,t){return e&&_(r.prototype,e),t&&_(r,t),r}function k(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&S(r,e)}function S(r,e){return S=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},S(r,e)}function g(r){var e=h();return function(){var n=I(r),i;if(e){var f=I(this).constructor;i=Reflect.construct(n,arguments,f)}else i=n.apply(this,arguments);return b(this,i)}}function b(r,e){return e&&(a(e)==="object"||typeof e=="function")?e:u(r)}function u(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(r){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},I(r)}function x(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var E="https://widget.mixcloud.com/media/js/widgetApi.js",s="Mixcloud",c=function(r){k(t,r);var e=g(t);function t(){var n;T(this,t);for(var i=arguments.length,f=new Array(i),M=0;M<i;M++)f[M]=arguments[M];return n=e.call.apply(e,[this].concat(f)),x(u(n),"callPlayer",o.callPlayer),x(u(n),"duration",null),x(u(n),"currentTime",null),x(u(n),"secondsLoaded",null),x(u(n),"mute",function(){}),x(u(n),"unmute",function(){}),x(u(n),"ref",function(P){n.iframe=P}),n}return F(t,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(i){var f=this;(0,o.getSDK)(E,s).then(function(M){f.player=M.PlayerWidget(f.iframe),f.player.ready.then(function(){f.player.events.play.on(f.props.onPlay),f.player.events.pause.on(f.props.onPause),f.player.events.ended.on(f.props.onEnded),f.player.events.error.on(f.props.error),f.player.events.progress.on(function(P,B){f.currentTime=P,f.duration=B}),f.props.onReady()})},this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(i){this.callPlayer("seek",i)}},{key:"setVolume",value:function(i){}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var i=this.props,f=i.url,M=i.config,P=f.match(A.MATCH_URL_MIXCLOUD)[1],B={width:"100%",height:"100%"},J=(0,o.queryString)(R(R({},M.options),{},{feed:"/".concat(P,"/")}));return m.default.createElement("iframe",{key:P,ref:this.ref,style:B,src:"https://www.mixcloud.com/widget/iframe/?".concat(J),frameBorder:"0",allow:"autoplay"})}}]),t}(m.Component);l.default=c,x(c,"displayName","Mixcloud"),x(c,"canPlay",A.canPlay.mixcloud),x(c,"loopOnEnded",!0)}(Mixcloud)),Mixcloud}var Vidyard={},hasRequiredVidyard;function requireVidyard(){return hasRequiredVidyard||(hasRequiredVidyard=1,function(l){function a(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(n){return typeof n}:a=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},a(e)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return D=function(){return e},e}function j(e){if(e&&e.__esModule)return e;if(e===null||a(e)!=="object"&&typeof e!="function")return{default:e};var t=D();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if(Object.prototype.hasOwnProperty.call(e,f)){var M=i?Object.getOwnPropertyDescriptor(e,f):null;M&&(M.get||M.set)?Object.defineProperty(n,f,M):n[f]=e[f]}return n.default=e,t&&t.set(e,n),n}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?re(Object(n),!0).forEach(function(i){x(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function F(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function k(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return S=Object.setPrototypeOf||function(i,f){return i.__proto__=f,i},S(e,t)}function g(e){var t=h();return function(){var i=I(e),f;if(t){var M=I(this).constructor;f=Reflect.construct(i,arguments,M)}else f=i.apply(this,arguments);return b(this,f)}}function b(e,t){return t&&(a(t)==="object"||typeof t=="function")?t:u(e)}function u(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},I(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E="https://play.vidyard.com/embed/v4.js",s="VidyardV4",c="onVidyardAPI",r=function(e){k(n,e);var t=g(n);function n(){var i;T(this,n);for(var f=arguments.length,M=new Array(f),P=0;P<f;P++)M[P]=arguments[P];return i=t.call.apply(t,[this].concat(M)),x(u(i),"callPlayer",o.callPlayer),x(u(i),"mute",function(){i.setVolume(0)}),x(u(i),"unmute",function(){i.props.volume!==null&&i.setVolume(i.props.volume)}),x(u(i),"ref",function(B){i.container=B}),i}return F(n,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(f){var M=this,P=this.props,B=P.playing,J=P.config,H=P.onError,U=P.onDuration,z=f&&f.match(A.MATCH_URL_VIDYARD)[1];this.player&&this.stop(),(0,o.getSDK)(E,s,c).then(function(K){M.container&&(K.api.addReadyListener(function(V,L){M.player||(M.player=L,M.player.on("ready",M.props.onReady),M.player.on("play",M.props.onPlay),M.player.on("pause",M.props.onPause),M.player.on("seek",M.props.onSeek),M.player.on("playerComplete",M.props.onEnded))},z),K.api.renderPlayer(R({uuid:z,container:M.container,autoplay:B?1:0},J.options)),K.api.getPlayerMetadata(z).then(function(V){M.duration=V.length_in_seconds,U(V.length_in_seconds)}))},H)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){window.VidyardV4.api.destroyPlayer(this.player)}},{key:"seekTo",value:function(f){this.callPlayer("seek",f)}},{key:"setVolume",value:function(f){this.callPlayer("setVolume",f)}},{key:"setPlaybackRate",value:function(f){this.callPlayer("setPlaybackSpeed",f)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.callPlayer("currentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var f=this.props.display,M={width:"100%",height:"100%",display:f};return m.default.createElement("div",{style:M},m.default.createElement("div",{ref:this.ref}))}}]),n}(m.Component);l.default=r,x(r,"displayName","Vidyard"),x(r,"canPlay",A.canPlay.vidyard)}(Vidyard)),Vidyard}var Kaltura={},hasRequiredKaltura;function requireKaltura(){return hasRequiredKaltura||(hasRequiredKaltura=1,function(l){function a(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(r){return typeof r}:a=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},a(s)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return D=function(){return s},s}function j(s){if(s&&s.__esModule)return s;if(s===null||a(s)!=="object"&&typeof s!="function")return{default:s};var c=D();if(c&&c.has(s))return c.get(s);var r={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in s)if(Object.prototype.hasOwnProperty.call(s,t)){var n=e?Object.getOwnPropertyDescriptor(s,t):null;n&&(n.get||n.set)?Object.defineProperty(r,t,n):r[t]=s[t]}return r.default=s,c&&c.set(s,r),r}function re(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")}function R(s,c){for(var r=0;r<c.length;r++){var e=c[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(s,e.key,e)}}function T(s,c,r){return c&&R(s.prototype,c),r&&R(s,r),s}function _(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(c&&c.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),c&&F(s,c)}function F(s,c){return F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},F(s,c)}function k(s){var c=b();return function(){var e=u(s),t;if(c){var n=u(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return S(this,t)}}function S(s,c){return c&&(a(c)==="object"||typeof c=="function")?c:g(s)}function g(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function u(s){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},u(s)}function h(s,c,r){return c in s?Object.defineProperty(s,c,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[c]=r,s}var I="https://cdn.embed.ly/player-0.1.0.min.js",x="playerjs",E=function(s){_(r,s);var c=k(r);function r(){var e;re(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=c.call.apply(c,[this].concat(n)),h(g(e),"callPlayer",o.callPlayer),h(g(e),"duration",null),h(g(e),"currentTime",null),h(g(e),"secondsLoaded",null),h(g(e),"mute",function(){e.callPlayer("mute")}),h(g(e),"unmute",function(){e.callPlayer("unmute")}),h(g(e),"ref",function(f){e.iframe=f}),e}return T(r,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t){var n=this;(0,o.getSDK)(I,x).then(function(i){n.iframe&&(n.player=new i.Player(n.iframe),n.player.on("ready",function(){setTimeout(function(){n.player.isReady=!0,n.player.setLoop(n.props.loop),n.props.muted&&n.player.mute(),n.addListeners(n.player,n.props),n.props.onReady()},500)}))},this.props.onError)}},{key:"addListeners",value:function(t,n){var i=this;t.on("play",n.onPlay),t.on("pause",n.onPause),t.on("ended",n.onEnded),t.on("error",n.onError),t.on("timeupdate",function(f){var M=f.duration,P=f.seconds;i.duration=M,i.currentTime=P})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(t){this.callPlayer("setCurrentTime",t)}},{key:"setVolume",value:function(t){this.callPlayer("setVolume",t)}},{key:"setLoop",value:function(t){this.callPlayer("setLoop",t)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var t={width:"100%",height:"100%"};return m.default.createElement("iframe",{ref:this.ref,src:this.props.url,frameBorder:"0",scrolling:"no",style:t,allow:"encrypted-media; autoplay; fullscreen;",referrerPolicy:"no-referrer-when-downgrade"})}}]),r}(m.Component);l.default=E,h(E,"displayName","Kaltura"),h(E,"canPlay",A.canPlay.kaltura)}(Kaltura)),Kaltura}var FilePlayer={},hasRequiredFilePlayer;function requireFilePlayer(){return hasRequiredFilePlayer||(hasRequiredFilePlayer=1,function(l){function a(H){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(z){return typeof z}:a=function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},a(H)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=j(reactExports),o=utils,A=patterns;function D(){if(typeof WeakMap!="function")return null;var H=new WeakMap;return D=function(){return H},H}function j(H){if(H&&H.__esModule)return H;if(H===null||a(H)!=="object"&&typeof H!="function")return{default:H};var U=D();if(U&&U.has(H))return U.get(H);var z={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in H)if(Object.prototype.hasOwnProperty.call(H,V)){var L=K?Object.getOwnPropertyDescriptor(H,V):null;L&&(L.get||L.set)?Object.defineProperty(z,V,L):z[V]=H[V]}return z.default=H,U&&U.set(H,z),z}function re(){return re=Object.assign||function(H){for(var U=1;U<arguments.length;U++){var z=arguments[U];for(var K in z)Object.prototype.hasOwnProperty.call(z,K)&&(H[K]=z[K])}return H},re.apply(this,arguments)}function R(H,U){if(!(H instanceof U))throw new TypeError("Cannot call a class as a function")}function T(H,U){for(var z=0;z<U.length;z++){var K=U[z];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(H,K.key,K)}}function _(H,U,z){return U&&T(H.prototype,U),z&&T(H,z),H}function F(H,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(U&&U.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),U&&k(H,U)}function k(H,U){return k=Object.setPrototypeOf||function(K,V){return K.__proto__=V,K},k(H,U)}function S(H){var U=u();return function(){var K=h(H),V;if(U){var L=h(this).constructor;V=Reflect.construct(K,arguments,L)}else V=K.apply(this,arguments);return g(this,V)}}function g(H,U){return U&&(a(U)==="object"||typeof U=="function")?U:b(H)}function b(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function h(H){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)},h(H)}function I(H,U,z){return U in H?Object.defineProperty(H,U,{value:z,enumerable:!0,configurable:!0,writable:!0}):H[U]=z,H}var x=typeof navigator<"u",E=x&&navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,s=x&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||E)&&!window.MSStream,c=x&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!window.MSStream,r="https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js",e="Hls",t="https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js",n="dashjs",i="https://cdn.jsdelivr.net/npm/flv.js@VERSION/dist/flv.min.js",f="flvjs",M=/www\.dropbox\.com\/.+/,P=/https:\/\/watch\.cloudflarestream\.com\/([a-z0-9]+)/,B="https://videodelivery.net/{id}/manifest/video.m3u8",J=function(H){F(z,H);var U=S(z);function z(){var K;R(this,z);for(var V=arguments.length,L=new Array(V),y=0;y<V;y++)L[y]=arguments[y];return K=U.call.apply(U,[this].concat(L)),I(b(K),"onReady",function(){var p;return(p=K.props).onReady.apply(p,arguments)}),I(b(K),"onPlay",function(){var p;return(p=K.props).onPlay.apply(p,arguments)}),I(b(K),"onBuffer",function(){var p;return(p=K.props).onBuffer.apply(p,arguments)}),I(b(K),"onBufferEnd",function(){var p;return(p=K.props).onBufferEnd.apply(p,arguments)}),I(b(K),"onPause",function(){var p;return(p=K.props).onPause.apply(p,arguments)}),I(b(K),"onEnded",function(){var p;return(p=K.props).onEnded.apply(p,arguments)}),I(b(K),"onError",function(){var p;return(p=K.props).onError.apply(p,arguments)}),I(b(K),"onPlayBackRateChange",function(p){return K.props.onPlaybackRateChange(p.target.playbackRate)}),I(b(K),"onEnablePIP",function(){var p;return(p=K.props).onEnablePIP.apply(p,arguments)}),I(b(K),"onDisablePIP",function(p){var w=K.props,X=w.onDisablePIP,W=w.playing;X(p),W&&K.play()}),I(b(K),"onPresentationModeChange",function(p){if(K.player&&(0,o.supportsWebKitPresentationMode)(K.player)){var w=K.player.webkitPresentationMode;w==="picture-in-picture"?K.onEnablePIP(p):w==="inline"&&K.onDisablePIP(p)}}),I(b(K),"onSeek",function(p){K.props.onSeek(p.target.currentTime)}),I(b(K),"mute",function(){K.player.muted=!0}),I(b(K),"unmute",function(){K.player.muted=!1}),I(b(K),"renderSourceElement",function(p,w){return typeof p=="string"?m.default.createElement("source",{key:w,src:p}):m.default.createElement("source",re({key:w},p))}),I(b(K),"renderTrack",function(p,w){return m.default.createElement("track",re({key:w},p))}),I(b(K),"ref",function(p){K.player&&(K.prevPlayer=K.player),K.player=p}),K}return _(z,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this),this.addListeners(this.player),this.player.src=this.getSource(this.props.url),s&&this.player.load()}},{key:"componentDidUpdate",value:function(V){this.shouldUseAudio(this.props)!==this.shouldUseAudio(V)&&(this.removeListeners(this.prevPlayer,V.url),this.addListeners(this.player)),this.props.url!==V.url&&!(0,o.isMediaStream)(this.props.url)&&(this.player.srcObject=null)}},{key:"componentWillUnmount",value:function(){this.player.src="",this.removeListeners(this.player),this.hls&&this.hls.destroy()}},{key:"addListeners",value:function(V){var L=this.props,y=L.url,p=L.playsinline;V.addEventListener("play",this.onPlay),V.addEventListener("waiting",this.onBuffer),V.addEventListener("playing",this.onBufferEnd),V.addEventListener("pause",this.onPause),V.addEventListener("seeked",this.onSeek),V.addEventListener("ended",this.onEnded),V.addEventListener("error",this.onError),V.addEventListener("ratechange",this.onPlayBackRateChange),V.addEventListener("enterpictureinpicture",this.onEnablePIP),V.addEventListener("leavepictureinpicture",this.onDisablePIP),V.addEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(y)||V.addEventListener("canplay",this.onReady),p&&(V.setAttribute("playsinline",""),V.setAttribute("webkit-playsinline",""),V.setAttribute("x5-playsinline",""))}},{key:"removeListeners",value:function(V,L){V.removeEventListener("canplay",this.onReady),V.removeEventListener("play",this.onPlay),V.removeEventListener("waiting",this.onBuffer),V.removeEventListener("playing",this.onBufferEnd),V.removeEventListener("pause",this.onPause),V.removeEventListener("seeked",this.onSeek),V.removeEventListener("ended",this.onEnded),V.removeEventListener("error",this.onError),V.removeEventListener("ratechange",this.onPlayBackRateChange),V.removeEventListener("enterpictureinpicture",this.onEnablePIP),V.removeEventListener("leavepictureinpicture",this.onDisablePIP),V.removeEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(L)||V.removeEventListener("canplay",this.onReady)}},{key:"shouldUseAudio",value:function(V){return V.config.forceVideo||V.config.attributes.poster?!1:A.AUDIO_EXTENSIONS.test(V.url)||V.config.forceAudio}},{key:"shouldUseHLS",value:function(V){return this.props.config.forceHLS||c&&this.props.config.forceSafariHLS?!0:s?!1:A.HLS_EXTENSIONS.test(V)||P.test(V)}},{key:"shouldUseDASH",value:function(V){return A.DASH_EXTENSIONS.test(V)||this.props.config.forceDASH}},{key:"shouldUseFLV",value:function(V){return A.FLV_EXTENSIONS.test(V)||this.props.config.forceFLV}},{key:"load",value:function(V){var L=this,y=this.props.config,p=y.hlsVersion,w=y.hlsOptions,X=y.dashVersion,W=y.flvVersion;if(this.hls&&this.hls.destroy(),this.dash&&this.dash.reset(),this.shouldUseHLS(V)&&(0,o.getSDK)(r.replace("VERSION",p),e).then(function(Z){if(L.hls=new Z(w),L.hls.on(Z.Events.MANIFEST_PARSED,function(){L.props.onReady()}),L.hls.on(Z.Events.ERROR,function(ae,ie){L.props.onError(ae,ie,L.hls,Z)}),P.test(V)){var ee=V.match(P)[1];L.hls.loadSource(B.replace("{id}",ee))}else L.hls.loadSource(V);L.hls.attachMedia(L.player),L.props.onLoaded()}),this.shouldUseDASH(V)&&(0,o.getSDK)(t.replace("VERSION",X),n).then(function(Z){L.dash=Z.MediaPlayer().create(),L.dash.initialize(L.player,V,L.props.playing),L.dash.on("error",L.props.onError),parseInt(X)<3?L.dash.getDebug().setLogToBrowserConsole(!1):L.dash.updateSettings({debug:{logLevel:Z.Debug.LOG_LEVEL_NONE}}),L.props.onLoaded()}),this.shouldUseFLV(V)&&(0,o.getSDK)(i.replace("VERSION",W),f).then(function(Z){L.flv=Z.createPlayer({type:"flv",url:V}),L.flv.attachMediaElement(L.player),L.flv.on(Z.Events.ERROR,function(ee,ae){L.props.onError(ee,ae,L.flv,Z)}),L.flv.load(),L.props.onLoaded()}),V instanceof Array)this.player.load();else if((0,o.isMediaStream)(V))try{this.player.srcObject=V}catch{this.player.src=window.URL.createObjectURL(V)}}},{key:"play",value:function(){var V=this.player.play();V&&V.catch(this.props.onError)}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src"),this.dash&&this.dash.reset()}},{key:"seekTo",value:function(V){this.player.currentTime=V}},{key:"setVolume",value:function(V){this.player.volume=V}},{key:"enablePIP",value:function(){this.player.requestPictureInPicture&&document.pictureInPictureElement!==this.player?this.player.requestPictureInPicture():(0,o.supportsWebKitPresentationMode)(this.player)&&this.player.webkitPresentationMode!=="picture-in-picture"&&this.player.webkitSetPresentationMode("picture-in-picture")}},{key:"disablePIP",value:function(){document.exitPictureInPicture&&document.pictureInPictureElement===this.player?document.exitPictureInPicture():(0,o.supportsWebKitPresentationMode)(this.player)&&this.player.webkitPresentationMode!=="inline"&&this.player.webkitSetPresentationMode("inline")}},{key:"setPlaybackRate",value:function(V){try{this.player.playbackRate=V}catch(L){this.props.onError(L)}}},{key:"getDuration",value:function(){if(!this.player)return null;var V=this.player,L=V.duration,y=V.seekable;return L===1/0&&y.length>0?y.end(y.length-1):L}},{key:"getCurrentTime",value:function(){return this.player?this.player.currentTime:null}},{key:"getSecondsLoaded",value:function(){if(!this.player)return null;var V=this.player.buffered;if(V.length===0)return 0;var L=V.end(V.length-1),y=this.getDuration();return L>y?y:L}},{key:"getSource",value:function(V){var L=this.shouldUseHLS(V),y=this.shouldUseDASH(V),p=this.shouldUseFLV(V);if(!(V instanceof Array||(0,o.isMediaStream)(V)||L||y||p))return M.test(V)?V.replace("www.dropbox.com","dl.dropboxusercontent.com"):V}},{key:"render",value:function(){var V=this.props,L=V.url,y=V.playing,p=V.loop,w=V.controls,X=V.muted,W=V.config,Z=V.width,ee=V.height,ae=this.shouldUseAudio(this.props),ie=ae?"audio":"video",Y={width:Z==="auto"?Z:"100%",height:ee==="auto"?ee:"100%"};return m.default.createElement(ie,re({ref:this.ref,src:this.getSource(L),style:Y,preload:"auto",autoPlay:y||void 0,controls:w,muted:X,loop:p},W.attributes),L instanceof Array&&L.map(this.renderSourceElement),W.tracks.map(this.renderTrack))}}]),z}(m.Component);l.default=J,I(J,"displayName","FilePlayer"),I(J,"canPlay",A.canPlay.file)}(FilePlayer)),FilePlayer}(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var a=reactExports,m=utils,o=patterns;function A(R){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(_){return typeof _}:A=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},A(R)}function D(){if(typeof WeakMap!="function")return null;var R=new WeakMap;return D=function(){return R},R}function j(R){if(R&&R.__esModule)return R;if(R===null||A(R)!=="object"&&typeof R!="function")return{default:R};var T=D();if(T&&T.has(R))return T.get(R);var _={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in R)if(Object.prototype.hasOwnProperty.call(R,k)){var S=F?Object.getOwnPropertyDescriptor(R,k):null;S&&(S.get||S.set)?Object.defineProperty(_,k,S):_[k]=R[k]}return _.default=R,T&&T.set(R,_),_}var re=[{key:"youtube",name:"YouTube",canPlay:o.canPlay.youtube,lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireYouTube())})})},{key:"soundcloud",name:"SoundCloud",canPlay:o.canPlay.soundcloud,lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireSoundCloud())})})},{key:"vimeo",name:"Vimeo",canPlay:o.canPlay.vimeo,lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireVimeo())})})},{key:"facebook",name:"Facebook",canPlay:o.canPlay.facebook,lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireFacebook())})})},{key:"streamable",name:"Streamable",canPlay:o.canPlay.streamable,lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireStreamable())})})},{key:"wistia",name:"Wistia",canPlay:o.canPlay.wistia,lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireWistia())})})},{key:"twitch",name:"Twitch",canPlay:o.canPlay.twitch,lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireTwitch())})})},{key:"dailymotion",name:"DailyMotion",canPlay:o.canPlay.dailymotion,lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireDailyMotion())})})},{key:"mixcloud",name:"Mixcloud",canPlay:o.canPlay.mixcloud,lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireMixcloud())})})},{key:"vidyard",name:"Vidyard",canPlay:o.canPlay.vidyard,lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireVidyard())})})},{key:"kaltura",name:"Kaltura",canPlay:o.canPlay.kaltura,lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireKaltura())})})},{key:"file",name:"FilePlayer",canPlay:o.canPlay.file,canEnablePIP:function(T){return o.canPlay.file(T)&&(document.pictureInPictureEnabled||(0,m.supportsWebKitPresentationMode)())&&!o.AUDIO_EXTENSIONS.test(T)},lazyPlayer:(0,a.lazy)(function(){return Promise.resolve().then(function(){return j(requireFilePlayer())})})}];l.default=re})(players);var ReactPlayer$1={},safeIsNaN=Number.isNaN||function l(a){return typeof a=="number"&&a!==a};function isEqual(l,a){return!!(l===a||safeIsNaN(l)&&safeIsNaN(a))}function areInputsEqual(l,a){if(l.length!==a.length)return!1;for(var m=0;m<l.length;m++)if(!isEqual(l[m],a[m]))return!1;return!0}function memoizeOne(l,a){a===void 0&&(a=areInputsEqual);var m,o=[],A,D=!1;function j(){for(var re=[],R=0;R<arguments.length;R++)re[R]=arguments[R];return D&&m===this&&a(re,o)||(A=l.apply(this,re),D=!0,m=this,o=re),A}return j}const memoizeOne_esm=Object.freeze(Object.defineProperty({__proto__:null,default:memoizeOne},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(memoizeOne_esm);var hasElementType=typeof Element<"u",hasMap=typeof Map=="function",hasSet=typeof Set=="function",hasArrayBuffer=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function equal(l,a){if(l===a)return!0;if(l&&a&&typeof l=="object"&&typeof a=="object"){if(l.constructor!==a.constructor)return!1;var m,o,A;if(Array.isArray(l)){if(m=l.length,m!=a.length)return!1;for(o=m;o--!==0;)if(!equal(l[o],a[o]))return!1;return!0}var D;if(hasMap&&l instanceof Map&&a instanceof Map){if(l.size!==a.size)return!1;for(D=l.entries();!(o=D.next()).done;)if(!a.has(o.value[0]))return!1;for(D=l.entries();!(o=D.next()).done;)if(!equal(o.value[1],a.get(o.value[0])))return!1;return!0}if(hasSet&&l instanceof Set&&a instanceof Set){if(l.size!==a.size)return!1;for(D=l.entries();!(o=D.next()).done;)if(!a.has(o.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(a)){if(m=l.length,m!=a.length)return!1;for(o=m;o--!==0;)if(l[o]!==a[o])return!1;return!0}if(l.constructor===RegExp)return l.source===a.source&&l.flags===a.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof a.valueOf=="function")return l.valueOf()===a.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof a.toString=="function")return l.toString()===a.toString();if(A=Object.keys(l),m=A.length,m!==Object.keys(a).length)return!1;for(o=m;o--!==0;)if(!Object.prototype.hasOwnProperty.call(a,A[o]))return!1;if(hasElementType&&l instanceof Element)return!1;for(o=m;o--!==0;)if(!((A[o]==="_owner"||A[o]==="__v"||A[o]==="__o")&&l.$$typeof)&&!equal(l[A[o]],a[A[o]]))return!1;return!0}return l!==l&&a!==a}var reactFastCompare=function l(a,m){try{return equal(a,m)}catch(o){if((o.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw o}},props={};Object.defineProperty(props,"__esModule",{value:!0});props.defaultProps=props.propTypes=void 0;var _propTypes=_interopRequireDefault$1(requirePropTypes());function _interopRequireDefault$1(l){return l&&l.__esModule?l:{default:l}}var string=_propTypes.default.string,bool=_propTypes.default.bool,number=_propTypes.default.number,array=_propTypes.default.array,oneOfType=_propTypes.default.oneOfType,shape=_propTypes.default.shape,object=_propTypes.default.object,func=_propTypes.default.func,node=_propTypes.default.node,propTypes={url:oneOfType([string,array,object]),playing:bool,loop:bool,controls:bool,volume:number,muted:bool,playbackRate:number,width:oneOfType([string,number]),height:oneOfType([string,number]),style:object,progressInterval:number,playsinline:bool,pip:bool,stopOnUnmount:bool,light:oneOfType([bool,string,object]),playIcon:node,previewTabIndex:number,fallback:node,oEmbedUrl:string,wrapper:oneOfType([string,func,shape({render:func.isRequired})]),config:shape({soundcloud:shape({options:object}),youtube:shape({playerVars:object,embedOptions:object,onUnstarted:func}),facebook:shape({appId:string,version:string,playerId:string,attributes:object}),dailymotion:shape({params:object}),vimeo:shape({playerOptions:object,title:string}),file:shape({attributes:object,tracks:array,forceVideo:bool,forceAudio:bool,forceHLS:bool,forceSafariHLS:bool,forceDASH:bool,forceFLV:bool,hlsOptions:object,hlsVersion:string,dashVersion:string,flvVersion:string}),wistia:shape({options:object,playerId:string,customControls:array}),mixcloud:shape({options:object}),twitch:shape({options:object,playerId:string}),vidyard:shape({options:object})}),onReady:func,onStart:func,onPlay:func,onPause:func,onBuffer:func,onBufferEnd:func,onEnded:func,onError:func,onDuration:func,onSeek:func,onPlaybackRateChange:func,onProgress:func,onClickPreview:func,onEnablePIP:func,onDisablePIP:func};props.propTypes=propTypes;var noop=function l(){},defaultProps={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:noop},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0"},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:noop,onStart:noop,onPlay:noop,onPause:noop,onBuffer:noop,onBufferEnd:noop,onEnded:noop,onError:noop,onDuration:noop,onSeek:noop,onPlaybackRateChange:noop,onProgress:noop,onClickPreview:noop,onEnablePIP:noop,onDisablePIP:noop};props.defaultProps=defaultProps;var Player={};(function(l){function a(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(t){return typeof t}:a=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(r)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=R(reactExports),o=j(reactFastCompare),A=props,D=utils;function j(r){return r&&r.__esModule?r:{default:r}}function re(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return re=function(){return r},r}function R(r){if(r&&r.__esModule)return r;if(r===null||a(r)!=="object"&&typeof r!="function")return{default:r};var e=re();if(e&&e.has(r))return e.get(r);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var f=n?Object.getOwnPropertyDescriptor(r,i):null;f&&(f.get||f.set)?Object.defineProperty(t,i,f):t[i]=r[i]}return t.default=r,e&&e.set(r,t),t}function T(){return T=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},T.apply(this,arguments)}function _(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function F(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function k(r,e,t){return e&&F(r.prototype,e),t&&F(r,t),r}function S(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&g(r,e)}function g(r,e){return g=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},g(r,e)}function b(r){var e=I();return function(){var n=x(r),i;if(e){var f=x(this).constructor;i=Reflect.construct(n,arguments,f)}else i=n.apply(this,arguments);return u(this,i)}}function u(r,e){return e&&(a(e)==="object"||typeof e=="function")?e:h(r)}function h(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(r){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(r)}function E(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var s=5e3,c=function(r){S(t,r);var e=b(t);function t(){var n;_(this,t);for(var i=arguments.length,f=new Array(i),M=0;M<i;M++)f[M]=arguments[M];return n=e.call.apply(e,[this].concat(f)),E(h(n),"mounted",!1),E(h(n),"isReady",!1),E(h(n),"isPlaying",!1),E(h(n),"isLoading",!0),E(h(n),"loadOnReady",null),E(h(n),"startOnPlay",!0),E(h(n),"seekOnPlay",null),E(h(n),"onDurationCalled",!1),E(h(n),"handlePlayerMount",function(P){if(n.player){n.progress();return}n.player=P,n.player.load(n.props.url),n.progress()}),E(h(n),"getInternalPlayer",function(P){return n.player?n.player[P]:null}),E(h(n),"progress",function(){if(n.props.url&&n.player&&n.isReady){var P=n.getCurrentTime()||0,B=n.getSecondsLoaded(),J=n.getDuration();if(J){var H={playedSeconds:P,played:P/J};B!==null&&(H.loadedSeconds=B,H.loaded=B/J),(H.playedSeconds!==n.prevPlayed||H.loadedSeconds!==n.prevLoaded)&&n.props.onProgress(H),n.prevPlayed=H.playedSeconds,n.prevLoaded=H.loadedSeconds}}n.progressTimeout=setTimeout(n.progress,n.props.progressFrequency||n.props.progressInterval)}),E(h(n),"handleReady",function(){if(n.mounted){n.isReady=!0,n.isLoading=!1;var P=n.props,B=P.onReady,J=P.playing,H=P.volume,U=P.muted;B(),!U&&H!==null&&n.player.setVolume(H),n.loadOnReady?(n.player.load(n.loadOnReady,!0),n.loadOnReady=null):J&&n.player.play(),n.handleDurationCheck()}}),E(h(n),"handlePlay",function(){n.isPlaying=!0,n.isLoading=!1;var P=n.props,B=P.onStart,J=P.onPlay,H=P.playbackRate;n.startOnPlay&&(n.player.setPlaybackRate&&H!==1&&n.player.setPlaybackRate(H),B(),n.startOnPlay=!1),J(),n.seekOnPlay&&(n.seekTo(n.seekOnPlay),n.seekOnPlay=null),n.handleDurationCheck()}),E(h(n),"handlePause",function(P){n.isPlaying=!1,n.isLoading||n.props.onPause(P)}),E(h(n),"handleEnded",function(){var P=n.props,B=P.activePlayer,J=P.loop,H=P.onEnded;B.loopOnEnded&&J&&n.seekTo(0),J||(n.isPlaying=!1,H())}),E(h(n),"handleError",function(){var P;n.isLoading=!1,(P=n.props).onError.apply(P,arguments)}),E(h(n),"handleDurationCheck",function(){clearTimeout(n.durationCheckTimeout);var P=n.getDuration();P?n.onDurationCalled||(n.props.onDuration(P),n.onDurationCalled=!0):n.durationCheckTimeout=setTimeout(n.handleDurationCheck,100)}),E(h(n),"handleLoaded",function(){n.isLoading=!1}),n}return k(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(i){var f=this;if(this.player){var M=this.props,P=M.url,B=M.playing,J=M.volume,H=M.muted,U=M.playbackRate,z=M.pip,K=M.loop,V=M.activePlayer,L=M.disableDeferredLoading;if(!(0,o.default)(i.url,P)){if(this.isLoading&&!V.forceLoad&&!L&&!(0,D.isMediaStream)(P)){console.warn("ReactPlayer: the attempt to load ".concat(P," is being deferred until the player has loaded")),this.loadOnReady=P;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(P,this.isReady)}!i.playing&&B&&!this.isPlaying&&this.player.play(),i.playing&&!B&&this.isPlaying&&this.player.pause(),!i.pip&&z&&this.player.enablePIP&&this.player.enablePIP(),i.pip&&!z&&this.player.disablePIP&&this.player.disablePIP(),i.volume!==J&&J!==null&&this.player.setVolume(J),i.muted!==H&&(H?this.player.mute():(this.player.unmute(),J!==null&&setTimeout(function(){return f.player.setVolume(J)}))),i.playbackRate!==U&&this.player.setPlaybackRate&&this.player.setPlaybackRate(U),i.loop!==K&&this.player.setLoop&&this.player.setLoop(K)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(i,f){var M=this;if(!this.isReady){i!==0&&(this.seekOnPlay=i,setTimeout(function(){M.seekOnPlay=null},s));return}var P=f?f==="fraction":i>0&&i<1;if(P){var B=this.player.getDuration();if(!B){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(B*i);return}this.player.seekTo(i)}},{key:"render",value:function(){var i=this.props.activePlayer;return i?m.default.createElement(i,T({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}]),t}(m.Component);l.default=c,E(c,"displayName","Player"),E(c,"propTypes",A.propTypes),E(c,"defaultProps",A.defaultProps)})(Player);var Preview$1={},hasRequiredPreview;function requirePreview(){return hasRequiredPreview||(hasRequiredPreview=1,function(l){function a(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(r){return typeof r}:a=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},a(s)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var m=A(reactExports);function o(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return o=function(){return s},s}function A(s){if(s&&s.__esModule)return s;if(s===null||a(s)!=="object"&&typeof s!="function")return{default:s};var c=o();if(c&&c.has(s))return c.get(s);var r={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in s)if(Object.prototype.hasOwnProperty.call(s,t)){var n=e?Object.getOwnPropertyDescriptor(s,t):null;n&&(n.get||n.set)?Object.defineProperty(r,t,n):r[t]=s[t]}return r.default=s,c&&c.set(s,r),r}function D(s,c){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(s);c&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable})),r.push.apply(r,e)}return r}function j(s){for(var c=1;c<arguments.length;c++){var r=arguments[c]!=null?arguments[c]:{};c%2?D(Object(r),!0).forEach(function(e){h(s,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(r,e))})}return s}function re(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")}function R(s,c){for(var r=0;r<c.length;r++){var e=c[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(s,e.key,e)}}function T(s,c,r){return c&&R(s.prototype,c),r&&R(s,r),s}function _(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(c&&c.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),c&&F(s,c)}function F(s,c){return F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},F(s,c)}function k(s){var c=b();return function(){var e=u(s),t;if(c){var n=u(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return S(this,t)}}function S(s,c){return c&&(a(c)==="object"||typeof c=="function")?c:g(s)}function g(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function u(s){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},u(s)}function h(s,c,r){return c in s?Object.defineProperty(s,c,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[c]=r,s}var I="64px",x={},E=function(s){_(r,s);var c=k(r);function r(){var e;re(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=c.call.apply(c,[this].concat(n)),h(g(e),"mounted",!1),h(g(e),"state",{image:null}),h(g(e),"handleKeyPress",function(f){(f.key==="Enter"||f.key===" ")&&e.props.onClick()}),e}return T(r,[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(t){var n=this.props,i=n.url,f=n.light;(t.url!==i||t.light!==f)&&this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(t){var n=this,i=t.url,f=t.light,M=t.oEmbedUrl;if(!m.default.isValidElement(f)){if(typeof f=="string"){this.setState({image:f});return}if(x[i]){this.setState({image:x[i]});return}return this.setState({image:null}),window.fetch(M.replace("{url}",i)).then(function(P){return P.json()}).then(function(P){if(P.thumbnail_url&&n.mounted){var B=P.thumbnail_url.replace("height=100","height=480").replace("-d_295x166","-d_640");n.setState({image:B}),x[i]=B}})}}},{key:"render",value:function(){var t=this.props,n=t.light,i=t.onClick,f=t.playIcon,M=t.previewTabIndex,P=this.state.image,B=m.default.isValidElement(n),J={display:"flex",alignItems:"center",justifyContent:"center"},H={preview:j({width:"100%",height:"100%",backgroundImage:P&&!B?"url(".concat(P,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},J),shadow:j({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:I,width:I,height:I,position:B?"absolute":void 0},J),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},U=m.default.createElement("div",{style:H.shadow,className:"react-player__shadow"},m.default.createElement("div",{style:H.playIcon,className:"react-player__play-icon"}));return m.default.createElement("div",{style:H.preview,className:"react-player__preview",onClick:i,tabIndex:M,onKeyPress:this.handleKeyPress},B?n:null,f||U)}}]),r}(m.Component);l.default=E}(Preview$1)),Preview$1}Object.defineProperty(ReactPlayer$1,"__esModule",{value:!0});ReactPlayer$1.createReactPlayer=void 0;var _react=_interopRequireWildcard(reactExports),_deepmerge=_interopRequireDefault(cjs),_memoizeOne=_interopRequireDefault(require$$2),_reactFastCompare=_interopRequireDefault(reactFastCompare),_props=props,_utils=utils,_Player3=_interopRequireDefault(Player);function _interopRequireDefault(l){return l&&l.__esModule?l:{default:l}}function _typeof(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(m){return typeof m}:_typeof=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},_typeof(l)}function ownKeys(l,a){var m=Object.keys(l);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);a&&(o=o.filter(function(A){return Object.getOwnPropertyDescriptor(l,A).enumerable})),m.push.apply(m,o)}return m}function _objectSpread(l){for(var a=1;a<arguments.length;a++){var m=arguments[a]!=null?arguments[a]:{};a%2?ownKeys(Object(m),!0).forEach(function(o){_defineProperty(l,o,m[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(m)):ownKeys(Object(m)).forEach(function(o){Object.defineProperty(l,o,Object.getOwnPropertyDescriptor(m,o))})}return l}function _extends(){return _extends=Object.assign||function(l){for(var a=1;a<arguments.length;a++){var m=arguments[a];for(var o in m)Object.prototype.hasOwnProperty.call(m,o)&&(l[o]=m[o])}return l},_extends.apply(this,arguments)}function _toConsumableArray(l){return _arrayWithoutHoles(l)||_iterableToArray(l)||_unsupportedIterableToArray(l)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(l,a){if(l){if(typeof l=="string")return _arrayLikeToArray(l,a);var m=Object.prototype.toString.call(l).slice(8,-1);if(m==="Object"&&l.constructor&&(m=l.constructor.name),m==="Map"||m==="Set")return Array.from(l);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return _arrayLikeToArray(l,a)}}function _iterableToArray(l){if(typeof Symbol<"u"&&Symbol.iterator in Object(l))return Array.from(l)}function _arrayWithoutHoles(l){if(Array.isArray(l))return _arrayLikeToArray(l)}function _arrayLikeToArray(l,a){(a==null||a>l.length)&&(a=l.length);for(var m=0,o=new Array(a);m<a;m++)o[m]=l[m];return o}function _classCallCheck(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(l,a){for(var m=0;m<a.length;m++){var o=a[m];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,o.key,o)}}function _createClass(l,a,m){return a&&_defineProperties(l.prototype,a),m&&_defineProperties(l,m),l}function _inherits(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),a&&_setPrototypeOf(l,a)}function _setPrototypeOf(l,a){return _setPrototypeOf=Object.setPrototypeOf||function(o,A){return o.__proto__=A,o},_setPrototypeOf(l,a)}function _createSuper(l){var a=_isNativeReflectConstruct();return function(){var o=_getPrototypeOf(l),A;if(a){var D=_getPrototypeOf(this).constructor;A=Reflect.construct(o,arguments,D)}else A=o.apply(this,arguments);return _possibleConstructorReturn(this,A)}}function _possibleConstructorReturn(l,a){return a&&(_typeof(a)==="object"||typeof a=="function")?a:_assertThisInitialized(l)}function _assertThisInitialized(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _getPrototypeOf(l){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},_getPrototypeOf(l)}function _defineProperty(l,a,m){return a in l?Object.defineProperty(l,a,{value:m,enumerable:!0,configurable:!0,writable:!0}):l[a]=m,l}function _getRequireWildcardCache(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return _getRequireWildcardCache=function(){return l},l}function _interopRequireWildcard(l){if(l&&l.__esModule)return l;if(l===null||_typeof(l)!=="object"&&typeof l!="function")return{default:l};var a=_getRequireWildcardCache();if(a&&a.has(l))return a.get(l);var m={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in l)if(Object.prototype.hasOwnProperty.call(l,A)){var D=o?Object.getOwnPropertyDescriptor(l,A):null;D&&(D.get||D.set)?Object.defineProperty(m,A,D):m[A]=l[A]}return m.default=l,a&&a.set(l,m),m}var Preview=(0,_react.lazy)(function(){return Promise.resolve().then(function(){return _interopRequireWildcard(requirePreview())})}),IS_BROWSER=typeof window<"u"&&window.document,IS_GLOBAL=typeof commonjsGlobal<"u"&&commonjsGlobal.window&&commonjsGlobal.window.document,SUPPORTED_PROPS=Object.keys(_props.propTypes),UniversalSuspense=IS_BROWSER||IS_GLOBAL?_react.Suspense:function(){return null},customPlayers=[],createReactPlayer=function l(a,m){var o,A;return A=o=function(D){_inherits(re,D);var j=_createSuper(re);function re(){var R;_classCallCheck(this,re);for(var T=arguments.length,_=new Array(T),F=0;F<T;F++)_[F]=arguments[F];return R=j.call.apply(j,[this].concat(_)),_defineProperty(_assertThisInitialized(R),"state",{showPreview:!!R.props.light}),_defineProperty(_assertThisInitialized(R),"references",{wrapper:function(S){R.wrapper=S},player:function(S){R.player=S}}),_defineProperty(_assertThisInitialized(R),"handleClickPreview",function(k){R.setState({showPreview:!1}),R.props.onClickPreview(k)}),_defineProperty(_assertThisInitialized(R),"showPreview",function(){R.setState({showPreview:!0})}),_defineProperty(_assertThisInitialized(R),"getDuration",function(){return R.player?R.player.getDuration():null}),_defineProperty(_assertThisInitialized(R),"getCurrentTime",function(){return R.player?R.player.getCurrentTime():null}),_defineProperty(_assertThisInitialized(R),"getSecondsLoaded",function(){return R.player?R.player.getSecondsLoaded():null}),_defineProperty(_assertThisInitialized(R),"getInternalPlayer",function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"player";return R.player?R.player.getInternalPlayer(k):null}),_defineProperty(_assertThisInitialized(R),"seekTo",function(k,S){if(!R.player)return null;R.player.seekTo(k,S)}),_defineProperty(_assertThisInitialized(R),"handleReady",function(){R.props.onReady(_assertThisInitialized(R))}),_defineProperty(_assertThisInitialized(R),"getActivePlayer",(0,_memoizeOne.default)(function(k){for(var S=0,g=[].concat(customPlayers,_toConsumableArray(a));S<g.length;S++){var b=g[S];if(b.canPlay(k))return b}return m||null})),_defineProperty(_assertThisInitialized(R),"getConfig",(0,_memoizeOne.default)(function(k,S){var g=R.props.config;return _deepmerge.default.all([_props.defaultProps.config,_props.defaultProps.config[S]||{},g,g[S]||{}])})),_defineProperty(_assertThisInitialized(R),"getAttributes",(0,_memoizeOne.default)(function(k){return(0,_utils.omit)(R.props,SUPPORTED_PROPS)})),_defineProperty(_assertThisInitialized(R),"renderActivePlayer",function(k){if(!k)return null;var S=R.getActivePlayer(k);if(!S)return null;var g=R.getConfig(k,S.key);return _react.default.createElement(_Player3.default,_extends({},R.props,{key:S.key,ref:R.references.player,config:g,activePlayer:S.lazyPlayer||S,onReady:R.handleReady}))}),R}return _createClass(re,[{key:"shouldComponentUpdate",value:function(T,_){return!(0,_reactFastCompare.default)(this.props,T)||!(0,_reactFastCompare.default)(this.state,_)}},{key:"componentDidUpdate",value:function(T){var _=this.props.light;!T.light&&_&&this.setState({showPreview:!0}),T.light&&!_&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(T){if(!T)return null;var _=this.props,F=_.light,k=_.playIcon,S=_.previewTabIndex,g=_.oEmbedUrl;return _react.default.createElement(Preview,{url:T,light:F,playIcon:k,previewTabIndex:S,oEmbedUrl:g,onClick:this.handleClickPreview})}},{key:"render",value:function(){var T=this.props,_=T.url,F=T.style,k=T.width,S=T.height,g=T.fallback,b=T.wrapper,u=this.state.showPreview,h=this.getAttributes(_),I=typeof b=="string"?this.references.wrapper:void 0;return _react.default.createElement(b,_extends({ref:I,style:_objectSpread(_objectSpread({},F),{},{width:k,height:S})},h),_react.default.createElement(UniversalSuspense,{fallback:g},u?this.renderPreview(_):this.renderActivePlayer(_)))}}]),re}(_react.Component),_defineProperty(o,"displayName","ReactPlayer"),_defineProperty(o,"propTypes",_props.propTypes),_defineProperty(o,"defaultProps",_props.defaultProps),_defineProperty(o,"addCustomPlayer",function(D){customPlayers.push(D)}),_defineProperty(o,"removeCustomPlayers",function(){customPlayers.length=0}),_defineProperty(o,"canPlay",function(D){for(var j=0,re=[].concat(customPlayers,_toConsumableArray(a));j<re.length;j++){var R=re[j];if(R.canPlay(D))return!0}return!1}),_defineProperty(o,"canEnablePIP",function(D){for(var j=0,re=[].concat(customPlayers,_toConsumableArray(a));j<re.length;j++){var R=re[j];if(R.canEnablePIP&&R.canEnablePIP(D))return!0}return!1}),A};ReactPlayer$1.createReactPlayer=createReactPlayer;(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var a=o(players),m=ReactPlayer$1;function o(j){return j&&j.__esModule?j:{default:j}}var A=a.default[a.default.length-1],D=(0,m.createReactPlayer)(a.default,A);l.default=D})(lib);const ReactPlayer=getDefaultExportFromCjs(lib),FilePage=()=>{var T;const[l,a]=reactExports.useState(!1),{params:m,navigate:o,goBack:A}=useRouter(),{data:D}=useGetFileByIdWithAccessQuery({variables:{fileID:m.fileID||""},skip:!m.fileID,onError:()=>{a(!0)},fetchPolicy:"cache-and-network"}),j=()=>{a(!1),o("/")},re=()=>{var k;const _=D==null?void 0:D.getFileByIDWithAccess,F=getFileURL((k=D==null?void 0:D.getFileByIDWithAccess)==null?void 0:k.ID);return(_==null?void 0:_.fileType)==="png"||(_==null?void 0:_.fileType)==="jpg"||(_==null?void 0:_.fileType)==="svg"?jsx(Image,{src:F,preview:!1,className:"object-contain origin-top-left transition-transform duration-300 ease-out min-w-[300px]"}):(_==null?void 0:_.fileType)==="pdf"?jsx(PdfViewer,{url:F}):hasVideoExtension(String(_==null?void 0:_.fileType))?jsx(ReactPlayer,{url:F,controls:!0,height:"800px",width:"1422px"}):(_==null?void 0:_.fileType)==="text"?jsx(TextFileReader,{url:F}):_!=null&&_.fileType&&isAudioExtension(_==null?void 0:_.fileType)?jsx(bundle,{src:F,controls:!0}):jsxs("div",{className:"w-[300px] rounded-lg p-8 text-center shadow-2xl flex flex-col",style:{backgroundColor:"rgb(76, 73, 76)"},children:[jsx(Typography.Text,{className:"text-white mb-2",children:"Preview not available"}),jsx(Button,{icon:jsx(DownloadOutlined,{}),onClick:R,type:"primary",className:"shadow-none",children:"Download"})]})},R=()=>{downloadURI(String(D==null?void 0:D.getFileByIDWithAccess.ID),"files",(D==null?void 0:D.getFileByIDWithAccess.name)||"")};return jsxs(Fragment,{children:[jsxs("div",{className:"fixed top-0 left-0 right-0 bottom-0 bg-black bg-opacity-50 flex flex-col items-center justify-start z-50 h-full",children:[jsxs(Header,{className:"w-full flex items-center justify-between bg-header-black mb-8",children:[jsxs("div",{className:"flex gap-2 items-center",children:[jsx(ArrowLeftOutlined$1,{onClick:A,className:"text-white text-xl hover:bg-[rgba(145,144,144,0.87)] rounded-2xl p-2"}),jsx("span",{className:"text-white text-sm",children:(T=D==null?void 0:D.getFileByIDWithAccess)==null?void 0:T.name})]}),jsx("div",{children:jsx(DownloadOutlined,{onClick:R,className:"text-white text-xl hover:bg-[rgba(145,144,144,0.87)]  rounded-2xl p-2"})})]}),jsx("div",{className:"flex items-center justify-center h-full min-w-[500px]",children:re()})]}),l&&jsx(Modal,{title:"Access Denied",open:l,onOk:j,cancelButtonProps:{style:{display:"none"}},children:jsx(Typography.Text,{children:"You don't have access to this file"})})]})};export{FilePage};
