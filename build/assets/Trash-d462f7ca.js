import{r as F,A as g,_ as f,u as p,b as M,c as D,a as e,R as T,D as b,C as w,T as u,d as E,e as O,j as y,f as S,g as R,h as U,F as j,B as $}from"./index-69c07cab.js";import{E as A}from"./index-488b9160.js";import{M as B}from"./index-7ac34a3a.js";import{F as z,a as V,b as G,c as L,f as P}from"./index.es-1f96d64b.js";import{D as x}from"./DeleteOutlined-286cb938.js";import{s as Q}from"./styled-components.browser.esm-d2f299d7.js";import"./PlusOutlined-6d2c6c37.js";var _={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z"}}]},name:"file",theme:"filled"};const H=_;var v=function(l,a){return F.createElement(g,f(f({},l),{},{ref:a,icon:H}))};v.displayName="FileFilled";const q=F.forwardRef(v);var J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const K=J;var N=function(l,a){return F.createElement(g,f(f({},l),{},{ref:a,icon:K}))};N.displayName="RedoOutlined";const C=F.forwardRef(N),W=({files:c,handleClickItem:l,selectedItem:a,refetch:i})=>{const{showSuccessNotification:h,showErrorNotification:r}=p(),[m]=M(),[n]=D(),d=s=>[{label:"Restore",key:"1",icon:e(C,{}),onClick:async()=>{try{await m({variables:{fileID:s.ID}}),i(),h("File restored")}catch(t){r(t.message)}}},{label:"Delete Forever",key:"2",icon:e(x,{}),onClick:async()=>{try{const{data:t}=await n({variables:{fileID:s.ID}});i(),h((t==null?void 0:t.deleteFile)||"")}catch(t){r(t.message)}}}];return e(T,{className:"ml-7",children:c.map(s=>e(b,{menu:{items:d(s)},trigger:["contextMenu"],children:e(w,{className:"m-4",children:e(z,{cover:e(q,{className:"text-7xl mt-6"}),className:"w-[17rem]",onClick:()=>l(s),children:e(V,{className:`${(a==null?void 0:a.ID)===s.ID?"bg-blue-100":""}`,children:e(u.Text,{className:"w-full font-semibold pointer-events-none truncate inline-block select-none",children:s.name})})})})},s.ID))})},X=Q.div`
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  border-radius: 8px;
`,{Text:Y}=u,Z=({folders:c,selectedItem:l,handleClickFolder:a,refetch:i})=>{const{showSuccessNotification:h,showErrorNotification:r}=p(),[m]=E(),[n]=O(),d=s=>[{label:"Restore",key:"1",icon:e(C,{}),onClick:async()=>{try{const{data:t}=await m({variables:{folderID:s.ID}});i(),h((t==null?void 0:t.moveFolderOutOfTrash)||"")}catch(t){r(t.message)}}},{label:"Delete Forever",key:"2",icon:e(x,{}),onClick:async()=>{try{const{data:t}=await n({variables:{folderID:s.ID}});i(),h((t==null?void 0:t.deleteFolder)||"")}catch(t){r(t.message)}}}];return e(T,{className:"ml-7",children:c==null?void 0:c.map(s=>e(b,{menu:{items:d(s)},trigger:["contextMenu"],children:e(w,{className:"m-4",children:y(X,{className:`p-3 flex flex-row items-center min-w-[17rem] max-w-[17rem] ${(l==null?void 0:l.ID)===s.ID?"bg-blue-100":"bg-white hover:bg-neutral-100"}`,onClick:()=>a==null?void 0:a(s),children:[e(G,{className:"text-xl mr-3 flex items-center"}),e(Y,{className:"inline-block truncate select-none font-semibold",children:s.name})]})})},s.ID))})},le=()=>{const{showErrorNotification:c,showSuccessNotification:l}=p(),[a,i]=F.useState(!1),[h]=S(),{data:r,refetch:m}=R({fetchPolicy:"network-only"}),{data:n,refetch:d}=U({fetchPolicy:"network-only"}),[s,t]=F.useState(null),I=o=>{s&&s.ID===(o==null?void 0:o.ID)||t(o)},k=async()=>{try{const{data:o}=await h();o!=null&&o.emptyUserTrash&&(l(o==null?void 0:o.emptyUserTrash),i(!1),await m(),await d())}catch(o){c(o.message)}};return y(j,{children:[y("div",{className:"bg-gray-200 m-4 px-4 py-2 flex justify-between items-center rounded-xl",children:[e(u.Text,{children:"Trash"}),e($,{type:"text",onClick:()=>i(!0),children:"Empty Trash"})]}),!!(r!=null&&r.getUserTrashFolder.length)&&e(u.Text,{className:"inline-block p-4 font-semibold",children:"Folders"}),e(Z,{folders:(r==null?void 0:r.getUserTrashFolder)||[],selectedItem:s,refetch:m}),!!(n!=null&&n.getUserTrashFiles.length)&&e(u.Text,{className:"inline-block p-4 font-semibold",children:"Files"}),e(W,{files:(n==null?void 0:n.getUserTrashFiles)||[],handleClickItem:I,selectedItem:s,refetch:d}),!(r!=null&&r.getUserTrashFolder.length)&&!(n!=null&&n.getUserTrashFiles.length)&&e("div",{className:"h-full flex justify-center items-center",children:e(A,{description:"Trash is empty",image:e(L,{icon:P,style:{color:"#1264f3"}})})}),a&&e(B,{onOk:k,onCancel:()=>i(!1),open:a,title:"Confirm Empty Trash",children:e("div",{className:"flex justify-center items-center",children:e(u.Text,{className:"",children:"Are you sure?"})})})]})};export{le as Trash};
